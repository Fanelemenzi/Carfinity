{% extends 'base/base.html' %}
{% load static %}

{% block content %}
<br></br>
{% if user.is_authenticated %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assessment Dashboard - Insurance Claims Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/notifications.css' %}">
    <link rel="stylesheet" href="{% static 'css/optimized-dashboard.min.css' %}" data-critical="true">
    <link rel="stylesheet" href="{% static 'css/dashboard-integration.css' %}" data-critical="false">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#374151',
                        accent: '#f59e0b',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444'
                    }
                }
            }
        }
    </script>
    <style>
        /* Assessment Dashboard Custom Styles */
        .kpi-card {
            transition: all 0.3s ease;
        }
        
        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .status-indicator {
            position: relative;
        }
        
        .status-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
        }
        
        .urgent-indicator::after {
            background: #ef4444;
            animation: pulse 1s infinite;
        }
        
        .warning-indicator::after {
            background: #f59e0b;
        }
        
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        .trend-arrow {
            transition: transform 0.2s ease;
        }
        
        .trend-up {
            color: #10b981;
        }
        
        .trend-down {
            color: #ef4444;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
            transition: width 0.5s ease;
        }
        
        .alert-card {
            border-left: 4px solid #ef4444;
        }
        
        .warning-card {
            border-left: 4px solid #f59e0b;
        }
        
        .info-card {
            border-left: 4px solid #3b82f6;
        }
        
        .notification-badge {
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0,-8px,0);
            }
            70% {
                transform: translate3d(0,-4px,0);
            }
            90% {
                transform: translate3d(0,-2px,0);
            }
        }
        
        /* Tablet and Mobile Responsive Design */
        
        /* Collapsible Sidebar for Tablet */
        .tablet-sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 300px;
            height: 100vh;
            background: white;
            z-index: 1000;
            transition: left 0.3s ease;
            border-right: 1px solid #e5e7eb;
        }
        
        .tablet-sidebar.active {
            left: 0;
        }
        
        .tablet-sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        
        .tablet-sidebar-overlay.active {
            display: block;
        }
        
        .sidebar-toggle {
            display: none;
        }
        
        /* Touch-Friendly Interface Elements */
        .touch-friendly {
            min-height: 44px;
            min-width: 44px;
            padding: 0.75rem;
        }
        
        .touch-button {
            min-height: 48px;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            touch-action: manipulation;
        }
        
        /* Adaptive Grid Layouts */
        .adaptive-grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .adaptive-grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        
        .adaptive-grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        
        /* Tablet Breakpoint (768px - 1024px) */
        @media (min-width: 768px) and (max-width: 1024px) {
            .sidebar-toggle {
                display: block;
            }
            
            .desktop-sidebar {
                display: none;
            }
            
            .tablet-main-content {
                margin-left: 0;
                padding: 1rem;
            }
            
            .tablet-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .tablet-grid-3 {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .tablet-single {
                grid-template-columns: 1fr;
            }
            
            /* Tablet KPI Grid */
            .kpi-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
            }
            
            /* Tablet Dashboard Sections */
            .dashboard-section {
                margin-bottom: 1.5rem;
            }
            
            /* Tablet Cards */
            .tablet-card {
                padding: 1rem;
                border-radius: 0.75rem;
            }
            
            /* Tablet Navigation */
            .tablet-nav {
                padding: 0.75rem 1rem;
            }
            
            /* Tablet Search */
            .tablet-search {
                max-width: 400px;
            }
            
            /* Tablet Alerts Grid */
            .tablet-alerts {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }
        
        /* Mobile Breakpoint (max-width: 768px) */
        @media (max-width: 768px) {
            .sidebar-toggle {
                display: block;
            }
            
            .desktop-sidebar {
                display: none;
            }
            
            .mobile-main-content {
                margin-left: 0;
                padding: 0.75rem;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
            
            .dashboard-section {
                margin-bottom: 1rem;
            }
            
            .mobile-card {
                padding: 0.75rem;
                border-radius: 0.5rem;
            }
            
            .mobile-nav {
                padding: 0.5rem 0.75rem;
            }
            
            .mobile-search {
                display: none;
            }
            
            .mobile-alerts {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            /* Mobile Typography */
            .mobile-title {
                font-size: 1.25rem;
                line-height: 1.3;
            }
            
            .mobile-subtitle {
                font-size: 0.875rem;
                line-height: 1.4;
            }
        }
        
        @media (max-width: 640px) {
            .kpi-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .mobile-single {
                grid-template-columns: 1fr;
            }
        }
        
        /* Tablet-Specific Enhancements */
        @media (min-width: 768px) and (max-width: 1024px) {
            /* Tablet Header Adjustments */
            .tablet-header {
                padding: 0.75rem 1rem;
            }
            
            .tablet-header h1 {
                font-size: 1.25rem;
            }
            
            /* Tablet Breadcrumb */
            .tablet-breadcrumb {
                padding: 0.5rem 1rem;
            }
            
            /* Tablet Content Spacing */
            .tablet-content {
                padding: 1rem;
            }
            
            /* Tablet Button Sizing */
            .tablet-button {
                padding: 0.625rem 1.25rem;
                font-size: 0.875rem;
            }
            
            /* Tablet Modal Adjustments */
            .tablet-modal {
                margin: 2rem;
                max-width: calc(100vw - 4rem);
            }
            
            /* Tablet Table Responsiveness */
            .tablet-table {
                font-size: 0.875rem;
            }
            
            .tablet-table th,
            .tablet-table td {
                padding: 0.5rem;
            }
        }
        
        /* Touch Gesture Support */
        .swipe-container {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        
        .swipe-item {
            scroll-snap-align: start;
            flex-shrink: 0;
        }
        
        /* Tablet Landscape Orientation */
        @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
            .landscape-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .landscape-sidebar {
                width: 250px;
            }
            
            .landscape-content {
                padding: 0.75rem;
            }
        }
        
        /* Tablet Portrait Orientation */
        @media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
            .portrait-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .portrait-sidebar {
                width: 300px;
            }
            
            .portrait-content {
                padding: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header Navigation -->
    <nav class="dashboard-header tablet-header">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <!-- Tablet/Mobile Sidebar Toggle -->
                    <button class="sidebar-toggle touch-friendly mr-3 text-gray-600 hover:text-gray-900 focus:outline-none lg:hidden" id="sidebarToggle">
                        <i class="fas fa-bars text-lg"></i>
                    </button>
                    
                    <div class="flex-shrink-0">
                        <a href="{% url 'insurance:dashboard' %}" class="dashboard-logo">
                            <i class="fas fa-shield-alt"></i>
                            <span class="hidden sm:inline">Insurance Claims Portal</span>
                            <span class="sm:hidden">Claims</span>
                        </a>
                    </div>
                    
                    <!-- Desktop Navigation Menu -->
                    <div class="desktop-sidebar hidden lg:block ml-10">
                        <div class="nav-menu">
                            <a href="{% url 'insurance:dashboard' %}" class="nav-item">
                                <i class="fas fa-home mr-2"></i>Dashboard
                            </a>
                            <a href="{% url 'insurance:assessment_dashboard' %}" class="nav-item active">
                                <i class="fas fa-chart-line mr-2"></i>Assessments
                            </a>
                            <a href="{% url 'insurance:book_assessment' %}" class="nav-item">
                                <i class="fas fa-plus-circle mr-2"></i>New Booking
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Search Functionality -->
                <div class="tablet-search mobile-search hidden md:flex flex-1 max-w-lg mx-8">
                    <div class="relative w-full">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" 
                               class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary text-sm" 
                               placeholder="Search claims, assessments, or customers..."
                               id="globalSearch">
                    </div>
                </div>
                
                <!-- Quick Actions and Profile -->
                <div class="flex items-center space-x-4">
                    <!-- Quick Actions Toolbar -->
                    <div class="hidden lg:flex items-center space-x-2">
                        <button class="p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition-colors duration-200" title="New Assessment">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition-colors duration-200" title="Emergency Contact">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition-colors duration-200" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    
                    <!-- Notifications -->
                    <div class="relative" id="notificationBell">
                        <!-- Notification system will be initialized here by JavaScript -->
                    </div>
                    
                    <!-- Agent Profile -->
                    <div class="flex items-center space-x-3">
                        <div class="flex flex-col text-right">
                            <span class="text-sm font-medium text-gray-900">{{ user.get_full_name|default:user.username }}</span>
                            <span class="text-xs text-gray-500">Claims Agent</span>
                        </div>
                        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Tablet Sidebar Overlay -->
    <div class="tablet-sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Tablet Sidebar Navigation -->
    <div class="tablet-sidebar" id="tabletSidebar">
        <div class="flex flex-col h-full">
            <!-- Sidebar Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900">Navigation</h2>
                <button class="touch-friendly text-gray-600 hover:text-gray-900" id="sidebarClose">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
            
            <!-- Sidebar Menu -->
            <div class="flex-1 overflow-y-auto py-4">
                <nav class="space-y-2 px-4">
                    <a href="{% url 'insurance:dashboard' %}" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-100">
                        <i class="fas fa-home mr-3"></i>
                        Dashboard
                    </a>
                    <a href="{% url 'insurance:assessment_dashboard' %}" class="flex items-center px-3 py-2 text-sm font-medium text-primary bg-blue-50 rounded-md">
                        <i class="fas fa-chart-line mr-3"></i>
                        Assessments
                    </a>
                    <a href="{% url 'insurance:book_assessment' %}" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-100">
                        <i class="fas fa-plus-circle mr-3"></i>
                        New Booking
                    </a>
                </nav>
                
                <!-- Quick Actions -->
                <div class="mt-6 px-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Quick Actions</h3>
                    <div class="space-y-2">
                        <button class="w-full flex items-center px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100">
                            <i class="fas fa-search mr-3"></i>
                            Search Claims
                        </button>
                        <button class="w-full flex items-center px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100">
                            <i class="fas fa-download mr-3"></i>
                            Export Data
                        </button>
                        <button class="w-full flex items-center px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100">
                            <i class="fas fa-cog mr-3"></i>
                            Settings
                        </button>
                    </div>
                </div>
                
                <!-- Recent Items -->
                <div class="mt-6 px-4">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Recent</h3>
                    <div class="space-y-2">
                        <div class="px-3 py-2 text-sm text-gray-600 rounded-md hover:bg-gray-50">
                            <div class="font-medium">CLM-2024-156</div>
                            <div class="text-xs text-gray-500">Toyota Camry</div>
                        </div>
                        <div class="px-3 py-2 text-sm text-gray-600 rounded-md hover:bg-gray-50">
                            <div class="font-medium">CLM-2024-189</div>
                            <div class="text-xs text-gray-500">Honda Civic</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <div class="breadcrumb-nav tablet-breadcrumb">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-12">
                <nav class="flex" aria-label="Breadcrumb">
                    <ol class="breadcrumb-list flex items-center space-x-4">
                        <li>
                            <div>
                                <a href="{% url 'insurance:dashboard' %}" class="text-gray-400 hover:text-gray-500">
                                    <i class="fas fa-home"></i>
                                    <span class="sr-only">Home</span>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="flex items-center">
                                <i class="fas fa-chevron-right text-gray-300 mr-4"></i>
                                <span class="text-sm font-medium text-gray-900">Assessment Dashboard</span>
                            </div>
                        </li>
                    </ol>
                </nav>
                
                <!-- Page Actions -->
                <div class="flex items-center space-x-2">
                    <button class="tablet-button touch-button inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        <i class="fas fa-download mr-1"></i>
                        <span class="hidden sm:inline">Export</span>
                    </button>
                    <button class="tablet-button touch-button inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-primary hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        <i class="fas fa-plus mr-1"></i>
                        <span class="hidden sm:inline">New Assessment</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto tablet-main-content mobile-main-content tablet-content px-4 sm:px-6 lg:px-8 py-4 md:py-6">
        <!-- KPI Dashboard Section -->
        <div class="dashboard-section mb-6 md:mb-8">
            <div class="mb-4">
                <h2 class="mobile-title text-base md:text-lg font-medium text-gray-900">Key Performance Indicators</h2>
                <p class="mobile-subtitle text-xs md:text-sm text-gray-500">Real-time metrics and performance tracking</p>
            </div>
            
            <div class="kpi-grid adaptive-grid-2 tablet-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 md:gap-4" data-animate="fade">
                <!-- Active Claims KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 status-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clipboard-list text-blue-600"></i>
                        </div>
                        <div class="trend-arrow trend-up">
                            <i class="fas fa-arrow-up text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">24</div>
                        <div class="text-xs text-gray-500 font-medium">Active Claims</div>
                    </div>
                    <div class="flex items-center text-xs">
                        <span class="text-green-600">+12%</span>
                        <span class="text-gray-500 ml-1">vs target</span>
                    </div>
                </div>

                <!-- Pending Reviews KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 warning-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-clock text-yellow-600"></i>
                        </div>
                        <div class="trend-arrow trend-down">
                            <i class="fas fa-arrow-down text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">8</div>
                        <div class="text-xs text-gray-500 font-medium">Pending Reviews</div>
                    </div>
                    <div class="flex items-center text-xs">
                        <div class="pulse-dot w-2 h-2 bg-yellow-500 rounded-full mr-1"></div>
                        <span class="text-yellow-600">2 overdue</span>
                    </div>
                </div>

                <!-- Processing Time KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 status-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-stopwatch text-green-600"></i>
                        </div>
                        <div class="trend-arrow trend-up">
                            <i class="fas fa-arrow-up text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">2.4h</div>
                        <div class="text-xs text-gray-500 font-medium">Avg Processing</div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                        <div class="progress-bar h-1.5 rounded-full" style="width: 75%"></div>
                    </div>
                </div>

                <!-- Cost Savings KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 status-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-pound-sign text-purple-600"></i>
                        </div>
                        <div class="trend-arrow trend-up">
                            <i class="fas fa-arrow-up text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">£18.5k</div>
                        <div class="text-xs text-gray-500 font-medium">Monthly Savings</div>
                    </div>
                    <div class="flex items-center text-xs">
                        <span class="text-green-600">+8.2%</span>
                        <span class="text-gray-500 ml-1">this month</span>
                    </div>
                </div>

                <!-- Accuracy Rate KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 status-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-bullseye text-indigo-600"></i>
                        </div>
                        <div class="trend-arrow trend-up">
                            <i class="fas fa-arrow-up text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">98.5%</div>
                        <div class="text-xs text-gray-500 font-medium">Accuracy Rate</div>
                    </div>
                    <div class="flex items-center text-xs">
                        <span class="text-green-600">Above</span>
                        <span class="text-gray-500 ml-1">benchmark</span>
                    </div>
                </div>

                <!-- Customer Satisfaction KPI -->
                <div class="kpi-card bg-white rounded-lg shadow border border-gray-200 p-4 status-indicator cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <div class="w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-smile text-pink-600"></i>
                        </div>
                        <div class="trend-arrow trend-up">
                            <i class="fas fa-arrow-up text-sm"></i>
                        </div>
                    </div>
                    <div class="mb-1">
                        <div class="text-2xl font-bold text-gray-900">4.8</div>
                        <div class="text-xs text-gray-500 font-medium">Satisfaction</div>
                    </div>
                    <div class="flex items-center text-xs">
                        <span class="text-green-600">94%</span>
                        <span class="text-gray-500 ml-1">response rate</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Priority Alerts Section -->
        <div class="dashboard-section mb-6 md:mb-8">
            <div class="mb-4 cursor-pointer" data-collapsible="priorityAlertsContent">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="mobile-title text-base md:text-lg font-medium text-gray-900">Priority Alerts & Notifications</h2>
                        <p class="mobile-subtitle text-xs md:text-sm text-gray-500">Critical items requiring immediate attention</p>
                    </div>
                    <i class="fas fa-chevron-down collapse-icon text-gray-400 transition-transform duration-200"></i>
                </div>
            </div>
            <div id="priorityAlertsContent" class="transition-all duration-300 overflow-hidden" aria-expanded="true">
            
            <div class="tablet-alerts mobile-alerts adaptive-grid-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4 md:gap-6">
                <!-- Urgent Claims Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200 alert-card">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>
                            Urgent Claims
                        </h3>
                    </div>
                    <div class="p-4">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Total Loss Review</div>
                                    <div class="text-xs text-gray-500">CLM-2024-156</div>
                                </div>
                                <div class="text-xs text-red-600 font-medium">2h overdue</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Structural Damage</div>
                                    <div class="text-xs text-gray-500">CLM-2024-189</div>
                                </div>
                                <div class="text-xs text-red-600 font-medium">45m left</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">High Value Claim</div>
                                    <div class="text-xs text-gray-500">CLM-2024-203</div>
                                </div>
                                <div class="text-xs text-red-600 font-medium">1h left</div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="w-full text-center text-xs text-red-600 hover:text-red-700 font-medium">
                                View All Urgent (3)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- SLA Warnings Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200 warning-card">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-clock text-yellow-500 mr-2"></i>
                            SLA Warnings
                        </h3>
                    </div>
                    <div class="p-4">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Assessment Due</div>
                                    <div class="text-xs text-gray-500">ASS-2024-445</div>
                                </div>
                                <div class="text-xs text-yellow-600 font-medium">
                                    <i class="fas fa-stopwatch mr-1"></i>2h 15m
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Customer Response</div>
                                    <div class="text-xs text-gray-500">CLM-2024-178</div>
                                </div>
                                <div class="text-xs text-yellow-600 font-medium">
                                    <i class="fas fa-stopwatch mr-1"></i>4h 30m
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Engineer Report</div>
                                    <div class="text-xs text-gray-500">ASS-2024-467</div>
                                </div>
                                <div class="text-xs text-yellow-600 font-medium">
                                    <i class="fas fa-stopwatch mr-1"></i>6h 45m
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="w-full text-center text-xs text-yellow-600 hover:text-yellow-700 font-medium">
                                View All Warnings (5)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Fraud Alerts Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200 alert-card">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-shield-alt text-red-500 mr-2"></i>
                            Fraud Alerts
                        </h3>
                    </div>
                    <div class="p-4">
                        <div class="space-y-3">
                            <div class="flex items-center justify-between hover:bg-red-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900 flex items-center">
                                        <i class="fas fa-exclamation-triangle text-red-500 mr-2 text-xs"></i>
                                        Suspicious Pattern
                                    </div>
                                    <div class="text-xs text-gray-500">Multiple claims - Same customer</div>
                                    <div class="text-xs text-gray-400">CLM-2024-156, CLM-2024-189</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-red-600 font-medium">95% risk</div>
                                    <div class="w-12 bg-gray-200 rounded-full h-1 mt-1">
                                        <div class="bg-red-500 h-1 rounded-full" style="width: 95%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between hover:bg-red-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900 flex items-center">
                                        <i class="fas fa-camera text-red-500 mr-2 text-xs"></i>
                                        Photo Inconsistency
                                    </div>
                                    <div class="text-xs text-gray-500">AI detected metadata anomaly</div>
                                    <div class="text-xs text-gray-400">ASS-2024-445</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-red-600 font-medium">87% risk</div>
                                    <div class="w-12 bg-gray-200 rounded-full h-1 mt-1">
                                        <div class="bg-red-500 h-1 rounded-full" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between hover:bg-yellow-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900 flex items-center">
                                        <i class="fas fa-clock text-yellow-500 mr-2 text-xs"></i>
                                        Timeline Anomaly
                                    </div>
                                    <div class="text-xs text-gray-500">Incident date mismatch</div>
                                    <div class="text-xs text-gray-400">CLM-2024-203</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-yellow-600 font-medium">72% risk</div>
                                    <div class="w-12 bg-gray-200 rounded-full h-1 mt-1">
                                        <div class="bg-yellow-500 h-1 rounded-full" style="width: 72%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="w-full text-center text-xs text-red-600 hover:text-red-700 font-medium">
                                View All Alerts (2)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- System Notifications Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200 info-card">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                            System Updates
                        </h3>
                    </div>
                    <div class="p-4">
                        <div class="space-y-3">
                            <div class="flex items-start space-x-2 hover:bg-blue-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0 pulse-dot"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Platform Update v2.4.1</div>
                                    <div class="text-xs text-gray-500">Enhanced AI fraud detection available</div>
                                    <div class="text-xs text-gray-400 mt-1">
                                        <i class="fas fa-clock mr-1"></i>2 hours ago
                                    </div>
                                </div>
                                <div class="text-xs text-blue-600 font-medium">New</div>
                            </div>
                            <div class="flex items-start space-x-2 hover:bg-green-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">API Integration Restored</div>
                                    <div class="text-xs text-gray-500">DVLA and insurance provider services online</div>
                                    <div class="text-xs text-gray-400 mt-1">
                                        <i class="fas fa-clock mr-1"></i>4 hours ago
                                    </div>
                                </div>
                                <div class="text-xs text-green-600 font-medium">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                            <div class="flex items-start space-x-2 hover:bg-yellow-50 rounded p-2 cursor-pointer transition-colors duration-200">
                                <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-900">Scheduled Maintenance</div>
                                    <div class="text-xs text-gray-500">System maintenance tonight 11 PM - 2 AM GMT</div>
                                    <div class="text-xs text-gray-400 mt-1">
                                        <i class="fas fa-calendar mr-1"></i>Today at 23:00
                                    </div>
                                </div>
                                <div class="text-xs text-yellow-600 font-medium">
                                    <i class="fas fa-tools"></i>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button class="w-full text-center text-xs text-blue-600 hover:text-blue-700 font-medium">
                                View All Updates
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>

        <!-- Claims Overview Section -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Claims Overview Dashboard</h2>
                <p class="text-sm text-gray-500">Interactive status board and geographic distribution</p>
            </div>
            
            <!-- Tab Navigation -->
            <div class="mb-6">
                <nav class="flex space-x-8" aria-label="Claims Overview Tabs">
                    <button class="active text-primary border-primary whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm" 
                            data-tab="status-board" 
                            aria-selected="true">
                        Status Board
                    </button>
                    <button class="text-gray-500 hover:text-gray-700 border-transparent whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm" 
                            data-tab="geographic-map" 
                            aria-selected="false">
                        Geographic Map
                    </button>
                    <button class="text-gray-500 hover:text-gray-700 border-transparent whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm" 
                            data-tab="analytics" 
                            aria-selected="false">
                        Analytics
                    </button>
                </nav>
            </div>
            
            <!-- Tab Panels -->
            <div data-tab-panel="status-board">
            <!-- Interactive Status Board -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
                <!-- Filter Controls -->
                <div class="px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-lg">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                        <div class="flex items-center space-x-4">
                            <h3 class="text-sm font-medium text-gray-900 flex items-center">
                                <i class="fas fa-filter text-gray-500 mr-2"></i>
                                Filter Claims
                            </h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs text-gray-500">Showing:</span>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    <span class="w-2 h-2 bg-blue-600 rounded-full mr-1"></span>
                                    47 claims
                                </span>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap items-center gap-3">
                            <!-- Status Filter -->
                            <div class="flex items-center space-x-2">
                                <label class="text-xs font-medium text-gray-700">Status:</label>
                                <select id="statusFilter" class="text-xs border border-gray-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-primary focus:border-primary" data-filter="status">
                                    <option value="">All Statuses</option>
                                    <option value="new">New</option>
                                    <option value="in-progress">In Progress</option>
                                    <option value="under-review">Under Review</option>
                                    <option value="approved">Approved</option>
                                    <option value="rejected">Rejected</option>
                                    <option value="settled">Settled</option>
                                </select>
                            </div>
                            
                            <!-- Date Range Filter -->
                            <div class="flex items-center space-x-2">
                                <label class="text-xs font-medium text-gray-700">Date:</label>
                                <select id="dateFilter" class="text-xs border border-gray-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-primary focus:border-primary">
                                    <option value="today">Today</option>
                                    <option value="week">This Week</option>
                                    <option value="month" selected>This Month</option>
                                    <option value="quarter">This Quarter</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            
                            <!-- Assessor Filter -->
                            <div class="flex items-center space-x-2">
                                <label class="text-xs font-medium text-gray-700">Assessor:</label>
                                <select id="assessorFilter" class="text-xs border border-gray-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-primary focus:border-primary" data-filter="assessor">
                                    <option value="">All Assessors</option>
                                    <option value="john-smith">John Smith</option>
                                    <option value="sarah-jones">Sarah Jones</option>
                                    <option value="mike-wilson">Mike Wilson</option>
                                    <option value="emma-brown">Emma Brown</option>
                                </select>
                            </div>
                            
                            <!-- Priority Filter -->
                            <div class="flex items-center space-x-2">
                                <label class="text-xs font-medium text-gray-700">Priority:</label>
                                <select id="priorityFilter" class="text-xs border border-gray-300 rounded-md px-2 py-1 focus:ring-1 focus:ring-primary focus:border-primary" data-filter="priority">
                                    <option value="">All Priorities</option>
                                    <option value="urgent">Urgent</option>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                            </div>
                            
                            <!-- Clear Filters Button -->
                            <button id="clearFilters" class="text-xs text-gray-500 hover:text-gray-700 underline">
                                Clear All
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Bulk Actions Bar -->
                <div id="bulkActionsBar" class="px-6 py-3 bg-blue-50 border-b border-blue-200 hidden">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-sm font-medium text-blue-900">
                                <span id="selectedCount">0</span> claims selected
                            </span>
                            <button id="selectAll" class="text-xs text-blue-600 hover:text-blue-700 underline">
                                Select All
                            </button>
                            <button id="deselectAll" class="text-xs text-blue-600 hover:text-blue-700 underline">
                                Deselect All
                            </button>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <button class="inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <i class="fas fa-user-plus mr-1"></i>
                                Assign Assessor
                            </button>
                            <button class="inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <i class="fas fa-flag mr-1"></i>
                                Change Priority
                            </button>
                            <button class="inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <i class="fas fa-download mr-1"></i>
                                Export Selected
                            </button>
                            <button class="inline-flex items-center px-3 py-1.5 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                <i class="fas fa-archive mr-1"></i>
                                Archive
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Claims Status Board Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left">
                                    <input type="checkbox" id="selectAllCheckbox" class="rounded border-gray-300 text-primary focus:ring-primary">
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" data-sort="claim_id">
                                    <div class="flex items-center space-x-1">
                                        <span>Claim ID</span>
                                        <i class="fas fa-sort text-gray-400 sort-icon"></i>
                                    </div>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" data-sort="status">
                                    <div class="flex items-center space-x-1">
                                        <span>Status</span>
                                        <i class="fas fa-sort text-gray-400 sort-icon"></i>
                                    </div>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" data-sort="priority">
                                    <div class="flex items-center space-x-1">
                                        <span>Priority</span>
                                        <i class="fas fa-sort text-gray-400"></i>
                                    </div>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Customer & Vehicle
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" data-sort="assessor">
                                    <div class="flex items-center space-x-1">
                                        <span>Assessor</span>
                                        <i class="fas fa-sort text-gray-400"></i>
                                    </div>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" data-sort="date">
                                    <div class="flex items-center space-x-1">
                                        <span>Date Created</span>
                                        <i class="fas fa-sort text-gray-400"></i>
                                    </div>
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    SLA Timer
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody id="claimsTableBody" class="bg-white divide-y divide-gray-200" data-sortable-container>
                            <!-- Sample Claims Data -->
                            <tr class="hover:bg-gray-50 transition-colors duration-200" 
                                data-claim-id="CLM-2024-156"
                                data-filterable
                                data-sortable
                                data-status="under-review"
                                data-priority="urgent"
                                data-assessor="john-smith"
                                data-date="2024-01-15"
                                data-searchable>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <input type="checkbox" class="claim-checkbox rounded border-gray-300 text-primary focus:ring-primary" value="CLM-2024-156" data-bulk-action>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-sm font-medium text-gray-900">CLM-2024-156</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        <span class="w-1.5 h-1.5 bg-red-600 rounded-full mr-1"></span>
                                        Under Review
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                                        <i class="fas fa-exclamation-triangle mr-1"></i>
                                        Urgent
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">Sarah Mitchell</div>
                                    <div class="text-xs text-gray-500">2019 BMW X5 • ABC123XY</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2">
                                            <span class="text-xs font-medium text-blue-600">JS</span>
                                        </div>
                                        <div class="text-sm text-gray-900">John Smith</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div>Dec 15, 2024</div>
                                    <div class="text-xs text-gray-400">09:30 AM</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-xs text-red-600 font-medium">2h overdue</div>
                                        <div class="ml-2 w-12 bg-gray-200 rounded-full h-1">
                                            <div class="bg-red-500 h-1 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex items-center space-x-2">
                                        <button class="text-primary hover:text-blue-700" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="More Actions">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <tr class="hover:bg-gray-50 transition-colors duration-200" 
                                data-claim-id="CLM-2024-189"
                                data-filterable
                                data-sortable
                                data-status="in-progress"
                                data-priority="high"
                                data-assessor="sarah-jones"
                                data-date="2024-01-14"
                                data-searchable>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <input type="checkbox" class="claim-checkbox rounded border-gray-300 text-primary focus:ring-primary" value="CLM-2024-189">
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-sm font-medium text-gray-900">CLM-2024-189</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        <span class="w-1.5 h-1.5 bg-yellow-600 rounded-full mr-1"></span>
                                        In Progress
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800">
                                        <i class="fas fa-flag mr-1"></i>
                                        High
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">Michael Johnson</div>
                                    <div class="text-xs text-gray-500">2021 Audi A4 • DEF456ZW</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2">
                                            <span class="text-xs font-medium text-green-600">SJ</span>
                                        </div>
                                        <div class="text-sm text-gray-900">Sarah Jones</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div>Dec 14, 2024</div>
                                    <div class="text-xs text-gray-400">14:15 PM</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-xs text-yellow-600 font-medium">45m left</div>
                                        <div class="ml-2 w-12 bg-gray-200 rounded-full h-1">
                                            <div class="bg-yellow-500 h-1 rounded-full" style="width: 75%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex items-center space-x-2">
                                        <button class="text-primary hover:text-blue-700" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="More Actions">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <tr class="hover:bg-gray-50 transition-colors duration-200" data-claim-id="CLM-2024-203">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <input type="checkbox" class="claim-checkbox rounded border-gray-300 text-primary focus:ring-primary" value="CLM-2024-203">
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-sm font-medium text-gray-900">CLM-2024-203</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        <span class="w-1.5 h-1.5 bg-blue-600 rounded-full mr-1"></span>
                                        New
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                                        <i class="fas fa-exclamation-triangle mr-1"></i>
                                        Urgent
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">Emma Thompson</div>
                                    <div class="text-xs text-gray-500">2020 Mercedes C-Class • GHI789UV</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center mr-2">
                                            <i class="fas fa-user-plus text-xs text-gray-400"></i>
                                        </div>
                                        <div class="text-sm text-gray-500">Unassigned</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div>Dec 16, 2024</div>
                                    <div class="text-xs text-gray-400">11:45 AM</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-xs text-green-600 font-medium">1h left</div>
                                        <div class="ml-2 w-12 bg-gray-200 rounded-full h-1">
                                            <div class="bg-green-500 h-1 rounded-full" style="width: 25%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex items-center space-x-2">
                                        <button class="text-primary hover:text-blue-700" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="More Actions">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <tr class="hover:bg-gray-50 transition-colors duration-200" data-claim-id="CLM-2024-178">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <input type="checkbox" class="claim-checkbox rounded border-gray-300 text-primary focus:ring-primary" value="CLM-2024-178">
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-sm font-medium text-gray-900">CLM-2024-178</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        <span class="w-1.5 h-1.5 bg-green-600 rounded-full mr-1"></span>
                                        Approved
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Medium
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">David Wilson</div>
                                    <div class="text-xs text-gray-500">2018 Ford Focus • JKL012MN</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2">
                                            <span class="text-xs font-medium text-purple-600">MW</span>
                                        </div>
                                        <div class="text-sm text-gray-900">Mike Wilson</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div>Dec 13, 2024</div>
                                    <div class="text-xs text-gray-400">16:20 PM</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-xs text-green-600 font-medium">Completed</div>
                                        <div class="ml-2 w-12 bg-gray-200 rounded-full h-1">
                                            <div class="bg-green-500 h-1 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex items-center space-x-2">
                                        <button class="text-primary hover:text-blue-700" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="More Actions">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            
                            <tr class="hover:bg-gray-50 transition-colors duration-200" data-claim-id="CLM-2024-234">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <input type="checkbox" class="claim-checkbox rounded border-gray-300 text-primary focus:ring-primary" value="CLM-2024-234">
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-sm font-medium text-gray-900">CLM-2024-234</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        <span class="w-1.5 h-1.5 bg-gray-600 rounded-full mr-1"></span>
                                        Settled
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800">
                                        <i class="fas fa-minus mr-1"></i>
                                        Low
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-900">Lisa Anderson</div>
                                    <div class="text-xs text-gray-500">2017 Toyota Corolla • PQR345ST</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center mr-2">
                                            <span class="text-xs font-medium text-pink-600">EB</span>
                                        </div>
                                        <div class="text-sm text-gray-900">Emma Brown</div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <div>Dec 12, 2024</div>
                                    <div class="text-xs text-gray-400">10:30 AM</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="text-xs text-green-600 font-medium">Completed</div>
                                        <div class="ml-2 w-12 bg-gray-200 rounded-full h-1">
                                            <div class="bg-green-500 h-1 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                    <div class="flex items-center space-x-2">
                                        <button class="text-primary hover:text-blue-700" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="More Actions">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-700">
                                Showing <span class="font-medium">1</span> to <span class="font-medium">5</span> of <span class="font-medium">47</span> results
                            </span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <button class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-l-md disabled:opacity-50 disabled:cursor-not-allowed">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="relative inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
                                1
                            </button>
                            <button class="relative inline-flex items-center px-3 py-2 border border-gray-300 bg-primary text-sm font-medium text-white">
                                2
                            </button>
                            <button class="relative inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
                                3
                            </button>
                            <span class="relative inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">
                                ...
                            </span>
                            <button class="relative inline-flex items-center px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
                                10
                            </button>
                            <button class="relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 rounded-r-md">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            
            <div data-tab-panel="geographic-map" class="hidden">
            <!-- Geographic Claims Map -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mt-6">
                <div class="px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-lg">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <h3 class="text-sm font-medium text-gray-900 flex items-center">
                                <i class="fas fa-map-marked-alt text-gray-500 mr-2"></i>
                                Geographic Claims Distribution
                            </h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-xs text-gray-500">Active Claims:</span>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    <span class="w-2 h-2 bg-green-600 rounded-full mr-1"></span>
                                    24 locations
                                </span>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <!-- Map View Toggle -->
                            <div class="flex items-center space-x-2">
                                <button id="mapViewBtn" class="inline-flex items-center px-3 py-1.5 border border-primary text-xs font-medium rounded text-primary bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                                    <i class="fas fa-map mr-1"></i>
                                    Map View
                                </button>
                                <button id="listViewBtn" class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                                    <i class="fas fa-list mr-1"></i>
                                    List View
                                </button>
                            </div>
                            
                            <!-- Map Controls -->
                            <div class="flex items-center space-x-2">
                                <button class="text-xs text-gray-500 hover:text-gray-700 underline" onclick="toggleMapLayer('priority')">
                                    Priority View
                                </button>
                                <button class="text-xs text-gray-500 hover:text-gray-700 underline" onclick="toggleMapLayer('assessor')">
                                    Assessor View
                                </button>
                                <button class="text-xs text-gray-500 hover:text-gray-700 underline" onclick="toggleMapLayer('network')">
                                    Repair Network
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Map Container -->
                <div id="mapContainer" class="relative">
                    <!-- Interactive Map -->
                    <div id="claimsMap" class="h-96 bg-gray-100 relative overflow-hidden">
                        <!-- Map Background (Simulated) -->
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-100 via-green-50 to-blue-50">
                            <!-- Simulated Map Grid -->
                            <div class="absolute inset-0 opacity-20">
                                <div class="grid grid-cols-12 grid-rows-8 h-full">
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                    <div class="border border-gray-300"></div>
                                </div>
                            </div>
                            
                            <!-- Claim Location Pins -->
                            <!-- Urgent Claims (Red Pins) -->
                            <div class="absolute top-1/4 left-1/3 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer claim-pin" 
                                 data-claim-id="CLM-2024-156" 
                                 data-priority="urgent" 
                                 data-status="under-review"
                                 data-assessor="john-smith"
                                 onclick="showClaimPopup('CLM-2024-156')">
                                <div class="relative">
                                    <div class="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center animate-pulse">
                                        <i class="fas fa-exclamation text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-4 border-transparent border-t-red-500"></div>
                                </div>
                            </div>
                            
                            <div class="absolute top-2/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer claim-pin" 
                                 data-claim-id="CLM-2024-203" 
                                 data-priority="urgent" 
                                 data-status="new"
                                 data-assessor="unassigned"
                                 onclick="showClaimPopup('CLM-2024-203')">
                                <div class="relative">
                                    <div class="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center animate-pulse">
                                        <i class="fas fa-exclamation text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-4 border-transparent border-t-red-500"></div>
                                </div>
                            </div>
                            
                            <!-- High Priority Claims (Orange Pins) -->
                            <div class="absolute top-1/2 left-1/4 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer claim-pin" 
                                 data-claim-id="CLM-2024-189" 
                                 data-priority="high" 
                                 data-status="in-progress"
                                 data-assessor="sarah-jones"
                                 onclick="showClaimPopup('CLM-2024-189')">
                                <div class="relative">
                                    <div class="w-5 h-5 bg-orange-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
                                        <i class="fas fa-flag text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-3 border-transparent border-t-orange-500"></div>
                                </div>
                            </div>
                            
                            <!-- Medium Priority Claims (Blue Pins) -->
                            <div class="absolute top-3/4 left-3/4 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer claim-pin" 
                                 data-claim-id="CLM-2024-178" 
                                 data-priority="medium" 
                                 data-status="approved"
                                 data-assessor="mike-wilson"
                                 onclick="showClaimPopup('CLM-2024-178')">
                                <div class="relative">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
                                        <i class="fas fa-info text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-1 border-r-1 border-t-2 border-transparent border-t-blue-500"></div>
                                </div>
                            </div>
                            
                            <!-- Low Priority Claims (Gray Pins) -->
                            <div class="absolute top-1/3 left-2/3 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer claim-pin" 
                                 data-claim-id="CLM-2024-234" 
                                 data-priority="low" 
                                 data-status="settled"
                                 data-assessor="emma-brown"
                                 onclick="showClaimPopup('CLM-2024-234')">
                                <div class="relative">
                                    <div class="w-4 h-4 bg-gray-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
                                        <i class="fas fa-check text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-1 border-r-1 border-t-2 border-transparent border-t-gray-500"></div>
                                </div>
                            </div>
                            
                            <!-- Assessor Availability Indicators -->
                            <div class="assessor-indicators hidden">
                                <!-- Available Assessors (Green Circles) -->
                                <div class="absolute top-1/5 left-1/5 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-8 h-8 bg-green-400 rounded-full border-3 border-white shadow-lg flex items-center justify-center opacity-75">
                                        <i class="fas fa-user text-white text-sm"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">John Smith</div>
                                </div>
                                
                                <div class="absolute top-2/5 left-4/5 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-8 h-8 bg-green-400 rounded-full border-3 border-white shadow-lg flex items-center justify-center opacity-75">
                                        <i class="fas fa-user text-white text-sm"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">Sarah Jones</div>
                                </div>
                                
                                <!-- Busy Assessors (Yellow Circles) -->
                                <div class="absolute top-4/5 left-2/5 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-8 h-8 bg-yellow-400 rounded-full border-3 border-white shadow-lg flex items-center justify-center opacity-75">
                                        <i class="fas fa-user-clock text-white text-sm"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">Mike Wilson</div>
                                </div>
                            </div>
                            
                            <!-- Repair Network Indicators -->
                            <div class="repair-network hidden">
                                <!-- High Capacity Repair Shops (Large Green Squares) -->
                                <div class="absolute top-1/6 left-3/5 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-6 h-6 bg-green-600 border-2 border-white shadow-lg flex items-center justify-center opacity-80">
                                        <i class="fas fa-wrench text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">AutoFix Pro</div>
                                </div>
                                
                                <!-- Medium Capacity (Medium Yellow Squares) -->
                                <div class="absolute top-3/5 left-1/6 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-5 h-5 bg-yellow-600 border-2 border-white shadow-lg flex items-center justify-center opacity-80">
                                        <i class="fas fa-tools text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">Quick Repair</div>
                                </div>
                                
                                <!-- Low Capacity (Small Red Squares) -->
                                <div class="absolute top-5/6 left-5/6 transform -translate-x-1/2 -translate-y-1/2">
                                    <div class="w-4 h-4 bg-red-600 border-2 border-white shadow-lg flex items-center justify-center opacity-80">
                                        <i class="fas fa-hammer text-white text-xs"></i>
                                    </div>
                                    <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-700 font-medium whitespace-nowrap">City Garage</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Map Controls Overlay -->
                        <div class="absolute top-4 right-4 flex flex-col space-y-2">
                            <button class="w-8 h-8 bg-white border border-gray-300 rounded shadow-lg flex items-center justify-center hover:bg-gray-50" onclick="zoomIn()">
                                <i class="fas fa-plus text-gray-600 text-sm"></i>
                            </button>
                            <button class="w-8 h-8 bg-white border border-gray-300 rounded shadow-lg flex items-center justify-center hover:bg-gray-50" onclick="zoomOut()">
                                <i class="fas fa-minus text-gray-600 text-sm"></i>
                            </button>
                            <button class="w-8 h-8 bg-white border border-gray-300 rounded shadow-lg flex items-center justify-center hover:bg-gray-50" onclick="centerMap()">
                                <i class="fas fa-crosshairs text-gray-600 text-sm"></i>
                            </button>
                        </div>
                        
                        <!-- Map Legend -->
                        <div class="absolute bottom-4 left-4 bg-white border border-gray-300 rounded-lg shadow-lg p-3">
                            <h4 class="text-xs font-medium text-gray-900 mb-2">Legend</h4>
                            <div class="space-y-1">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span class="text-xs text-gray-700">Urgent Claims</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                    <span class="text-xs text-gray-700">High Priority</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                    <span class="text-xs text-gray-700">Medium Priority</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                    <span class="text-xs text-gray-700">Low Priority</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Claim Popup Modal -->
                    <div id="claimPopup" class="hidden absolute z-50 bg-white border border-gray-300 rounded-lg shadow-xl p-4 min-w-64">
                        <div class="flex items-start justify-between mb-3">
                            <h4 class="text-sm font-medium text-gray-900" id="popupClaimId">CLM-2024-156</h4>
                            <button onclick="hideClaimPopup()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </div>
                        
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500">Status:</span>
                                <span id="popupStatus" class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Under Review
                                </span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500">Priority:</span>
                                <span id="popupPriority" class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                                    Urgent
                                </span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500">Assessor:</span>
                                <span id="popupAssessor" class="text-xs text-gray-900">John Smith</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500">Customer:</span>
                                <span id="popupCustomer" class="text-xs text-gray-900">Sarah Mitchell</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500">Vehicle:</span>
                                <span id="popupVehicle" class="text-xs text-gray-900">2019 BMW X5</span>
                            </div>
                            
                            <div class="pt-2 border-t border-gray-200">
                                <div class="flex space-x-2">
                                    <button class="flex-1 inline-flex items-center justify-center px-3 py-1.5 border border-primary text-xs font-medium rounded text-primary bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                                        <i class="fas fa-eye mr-1"></i>
                                        View Details
                                    </button>
                                    <button class="flex-1 inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                                        <i class="fas fa-route mr-1"></i>
                                        Get Directions
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- List View (Hidden by default) -->
                <div id="listContainer" class="hidden p-6">
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">CLM-2024-156 - Sarah Mitchell</div>
                                    <div class="text-xs text-gray-500">2019 BMW X5 • Manchester, UK</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-red-600 font-medium">Urgent</span>
                                <span class="text-xs text-gray-500">John Smith</span>
                                <button class="text-primary hover:text-blue-700">
                                    <i class="fas fa-external-link-alt text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">CLM-2024-189 - Michael Johnson</div>
                                    <div class="text-xs text-gray-500">2021 Audi A4 • Birmingham, UK</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-orange-600 font-medium">High</span>
                                <span class="text-xs text-gray-500">Sarah Jones</span>
                                <button class="text-primary hover:text-blue-700">
                                    <i class="fas fa-external-link-alt text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">CLM-2024-178 - David Wilson</div>
                                    <div class="text-xs text-gray-500">2018 Ford Focus • London, UK</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-blue-600 font-medium">Medium</span>
                                <span class="text-xs text-gray-500">Mike Wilson</span>
                                <button class="text-primary hover:text-blue-700">
                                    <i class="fas fa-external-link-alt text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <div class="flex items-center space-x-4">
                                <div class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">CLM-2024-234 - Lisa Anderson</div>
                                    <div class="text-xs text-gray-500">2017 Toyota Corolla • Leeds, UK</div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-xs text-gray-600 font-medium">Low</span>
                                <span class="text-xs text-gray-500">Emma Brown</span>
                                <button class="text-primary hover:text-blue-700">
                                    <i class="fas fa-external-link-alt text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
            
            <div data-tab-panel="analytics" class="hidden">
                <div class="bg-white rounded-lg shadow border border-gray-200 p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Claims Analytics</h3>
                    <p class="text-gray-600">Advanced analytics and reporting features will be displayed here.</p>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-medium text-gray-900">Processing Time Trends</h4>
                            <p class="text-sm text-gray-600 mt-1">Average processing time over the last 30 days</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-medium text-gray-900">Cost Analysis</h4>
                            <p class="text-sm text-gray-600 mt-1">Cost breakdown by damage type and severity</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-medium text-gray-900">Performance Metrics</h4>
                            <p class="text-sm text-gray-600 mt-1">Key performance indicators and benchmarks</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Assessment Summary Section -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Main Assessment Summary</h2>
                <p class="text-sm text-gray-500">Comprehensive claim overview and assessment details</p>
            </div>

            <!-- Assessment Header Panel -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
                <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-clipboard-check text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Assessment #ASS-2024-445</h3>
                                <p class="text-sm text-gray-600">Claim Reference: CLM-2024-156</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="text-right">
                                <div class="text-sm font-medium text-gray-900">SLA Timer</div>
                                <div id="slaTimer" class="text-lg font-bold text-red-600">02:15:30</div>
                                <div class="text-xs text-gray-500">Time Remaining</div>
                            </div>
                            <div class="w-16 h-16 relative">
                                <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 64 64">
                                    <circle cx="32" cy="32" r="28" stroke="#e5e7eb" stroke-width="4" fill="none"></circle>
                                    <circle id="slaProgress" cx="32" cy="32" r="28" stroke="#ef4444" stroke-width="4" fill="none" 
                                            stroke-dasharray="175.93" stroke-dashoffset="43.98" stroke-linecap="round"></circle>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xs font-bold text-red-600">75%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comprehensive Claim Overview -->
                <div class="p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Vehicle Details -->
                        <div class="space-y-4">
                            <h4 class="text-sm font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-car text-blue-600 mr-2"></i>
                                Vehicle Details
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Make & Model:</span>
                                    <span class="text-sm font-medium text-gray-900">2019 BMW X5</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Registration:</span>
                                    <span class="text-sm font-medium text-gray-900">ABC123XY</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">VIN:</span>
                                    <span class="text-sm font-medium text-gray-900">WBAFR9C50DD123456</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Mileage:</span>
                                    <span class="text-sm font-medium text-gray-900">45,230 miles</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Market Value:</span>
                                    <span class="text-sm font-medium text-green-600">£18,750</span>
                                </div>
                            </div>
                        </div>

                        <!-- Customer Information -->
                        <div class="space-y-4">
                            <h4 class="text-sm font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-user text-green-600 mr-2"></i>
                                Customer Information
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Name:</span>
                                    <span class="text-sm font-medium text-gray-900">Sarah Mitchell</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Policy Number:</span>
                                    <span class="text-sm font-medium text-gray-900">POL-2024-789456</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Contact:</span>
                                    <span class="text-sm font-medium text-gray-900">+44 7700 900123</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Email:</span>
                                    <span class="text-sm font-medium text-gray-900">s.mitchell@email.com</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Excess:</span>
                                    <span class="text-sm font-medium text-gray-900">£500</span>
                                </div>
                            </div>
                        </div>

                        <!-- Location & Assignment -->
                        <div class="space-y-4">
                            <h4 class="text-sm font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-map-marker-alt text-red-600 mr-2"></i>
                                Location & Assignment
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Incident Location:</span>
                                    <span class="text-sm font-medium text-gray-900">Manchester, M1 4ET</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Incident Date:</span>
                                    <span class="text-sm font-medium text-gray-900">Dec 15, 2024</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Assigned Assessor:</span>
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2">
                                            <span class="text-xs font-medium text-blue-600">JS</span>
                                        </div>
                                        <span class="text-sm font-medium text-gray-900">John Smith</span>
                                    </div>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Assessment Date:</span>
                                    <span class="text-sm font-medium text-gray-900">Dec 16, 2024</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Status:</span>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        <span class="w-1.5 h-1.5 bg-yellow-600 rounded-full mr-1"></span>
                                        In Progress
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Critical Information Alert Bar -->
            <div class="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-lg shadow-sm mb-6">
                <div class="p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-sm font-semibold text-red-800 flex items-center">
                            <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                            Critical Alerts & Risk Indicators
                        </h4>
                        <button class="text-red-600 hover:text-red-800 transition-colors duration-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Total Loss Recommendation Alert -->
                        <div class="bg-white rounded-lg border border-red-200 p-4 hover:shadow-md transition-shadow duration-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-car-crash text-red-600"></i>
                                </div>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    HIGH RISK
                                </span>
                            </div>
                            <div class="mb-2">
                                <div class="text-sm font-semibold text-gray-900">Total Loss Recommended</div>
                                <div class="text-xs text-gray-600">Repair cost exceeds 70% of vehicle value</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="text-xs text-red-600 font-medium">
                                    Repair: £13,125 vs Value: £18,750
                                </div>
                                <div class="text-xs text-red-600 font-bold">70%</div>
                            </div>
                        </div>

                        <!-- Structural Damage Alert -->
                        <div class="bg-white rounded-lg border border-orange-200 p-4 hover:shadow-md transition-shadow duration-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-hard-hat text-orange-600"></i>
                                </div>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                    STRUCTURAL
                                </span>
                            </div>
                            <div class="mb-2">
                                <div class="text-sm font-semibold text-gray-900">Structural Damage</div>
                                <div class="text-xs text-gray-600">Frame damage detected in assessment</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="text-xs text-orange-600 font-medium">
                                    B-Pillar & Roof Rail
                                </div>
                                <div class="text-xs text-orange-600 font-bold">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Airbag Deployment Alert -->
                        <div class="bg-white rounded-lg border border-yellow-200 p-4 hover:shadow-md transition-shadow duration-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-shield-alt text-yellow-600"></i>
                                </div>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    SAFETY
                                </span>
                            </div>
                            <div class="mb-2">
                                <div class="text-sm font-semibold text-gray-900">Airbag Deployment</div>
                                <div class="text-xs text-gray-600">Multiple airbags deployed during impact</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="text-xs text-yellow-600 font-medium">
                                    Front & Side Airbags
                                </div>
                                <div class="text-xs text-yellow-600 font-bold">2 Units</div>
                            </div>
                        </div>

                        <!-- High Value Claim Alert -->
                        <div class="bg-white rounded-lg border border-purple-200 p-4 hover:shadow-md transition-shadow duration-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-pound-sign text-purple-600"></i>
                                </div>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                    HIGH VALUE
                                </span>
                            </div>
                            <div class="mb-2">
                                <div class="text-sm font-semibold text-gray-900">High Value Claim</div>
                                <div class="text-xs text-gray-600">Claim value exceeds £15,000 threshold</div>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="text-xs text-purple-600 font-medium">
                                    Estimated: £18,750
                                </div>
                                <div class="text-xs text-purple-600 font-bold">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fraud Risk Indicators -->
                    <div class="mt-6 pt-4 border-t border-red-200">
                        <h5 class="text-sm font-semibold text-red-800 mb-3 flex items-center">
                            <i class="fas fa-shield-alt text-red-600 mr-2"></i>
                            Fraud Risk Assessment
                        </h5>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- Overall Risk Score -->
                            <div class="bg-white rounded-lg border border-red-200 p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-xs font-medium text-gray-700">Overall Risk Score</span>
                                    <span class="text-xs font-bold text-red-600">87%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-red-500 h-2 rounded-full relative" style="width: 87%">
                                        <div class="absolute right-0 top-0 w-2 h-2 bg-red-600 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                                <div class="mt-2 text-xs text-red-600 font-medium">High Risk - Review Required</div>
                            </div>

                            <!-- Pattern Analysis -->
                            <div class="bg-white rounded-lg border border-yellow-200 p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-xs font-medium text-gray-700">Pattern Analysis</span>
                                    <span class="text-xs font-bold text-yellow-600">72%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 72%"></div>
                                </div>
                                <div class="mt-2 text-xs text-yellow-600 font-medium">
                                    <i class="fas fa-exclamation-triangle mr-1"></i>
                                    Multiple Claims Detected
                                </div>
                            </div>

                            <!-- Photo Verification -->
                            <div class="bg-white rounded-lg border border-green-200 p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-xs font-medium text-gray-700">Photo Verification</span>
                                    <span class="text-xs font-bold text-green-600">95%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 95%"></div>
                                </div>
                                <div class="mt-2 text-xs text-green-600 font-medium">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Photos Verified
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Executive Summary Card -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
                <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50">
                    <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                        <i class="fas fa-chart-line text-indigo-600 mr-2"></i>
                        Executive Summary & Financial Analysis
                    </h4>
                    <p class="text-sm text-gray-600 mt-1">Comprehensive assessment overview with financial recommendations</p>
                </div>

                <div class="p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6">
                        <!-- Overall Severity Rating -->
                        <div class="bg-gradient-to-br from-red-50 to-orange-50 rounded-lg p-4 border border-red-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-semibold text-gray-900">Severity Rating</h5>
                                <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-red-600"></i>
                                </div>
                            </div>
                            
                            <!-- Severity Scale 1-10 -->
                            <div class="mb-3">
                                <div class="flex items-center justify-center mb-2">
                                    <div class="text-3xl font-bold text-red-600">8.5</div>
                                    <div class="text-sm text-gray-600 ml-2">/ 10</div>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-sm font-medium text-red-700">Severe Damage</div>
                                <div class="text-xs text-gray-600">Structural & Safety Systems</div>
                            </div>
                        </div>

                        <!-- Estimated Cost with Confidence Intervals -->
                        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-semibold text-gray-900">Estimated Cost</h5>
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-calculator text-blue-600"></i>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <div class="text-center mb-2">
                                    <div class="text-2xl font-bold text-blue-600">£13,125</div>
                                    <div class="text-xs text-gray-600">Best Estimate</div>
                                </div>
                                
                                <!-- Confidence Interval -->
                                <div class="space-y-2">
                                    <div class="flex justify-between text-xs">
                                        <span class="text-gray-600">Low (95% CI):</span>
                                        <span class="font-medium text-green-600">£11,800</span>
                                    </div>
                                    <div class="flex justify-between text-xs">
                                        <span class="text-gray-600">High (95% CI):</span>
                                        <span class="font-medium text-red-600">£14,450</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-sm font-medium text-blue-700">95% Confidence</div>
                                <div class="text-xs text-gray-600">±£1,325 variance</div>
                            </div>
                        </div>

                        <!-- Market Value Comparison -->
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-semibold text-gray-900">Value Analysis</h5>
                                <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-balance-scale text-green-600"></i>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-xs text-gray-600">Market Value:</span>
                                    <span class="text-sm font-medium text-green-600">£18,750</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-xs text-gray-600">Repair Cost:</span>
                                    <span class="text-sm font-medium text-blue-600">£13,125</span>
                                </div>
                                <div class="flex justify-between border-t border-green-200 pt-2">
                                    <span class="text-xs font-medium text-gray-700">Repair-to-Value:</span>
                                    <span class="text-sm font-bold text-red-600">70%</span>
                                </div>
                            </div>
                            
                            <div class="mt-3 text-center">
                                <div class="text-sm font-medium text-red-700">Total Loss Threshold</div>
                                <div class="text-xs text-gray-600">Exceeds 70% rule</div>
                            </div>
                        </div>

                        <!-- Classification & Compliance -->
                        <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-semibold text-gray-900">Classification</h5>
                                <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-certificate text-purple-600"></i>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <!-- UK Classification -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs text-gray-600">UK Category:</span>
                                        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                                            Category S
                                        </span>
                                    </div>
                                    <div class="text-xs text-gray-500">Structural damage - Repairable</div>
                                </div>
                                
                                <!-- SA 70% Rule -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs text-gray-600">SA 70% Rule:</span>
                                        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                                            <i class="fas fa-times mr-1"></i>
                                            Non-Compliant
                                        </span>
                                    </div>
                                    <div class="text-xs text-gray-500">Exceeds threshold by 0%</div>
                                </div>
                                
                                <!-- DVLA Notification -->
                                <div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-xs text-gray-600">DVLA Notification:</span>
                                        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Required
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendation Summary -->
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-4 border border-gray-200">
                            <div class="flex items-start space-x-4">
                                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-lightbulb text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h5 class="text-sm font-semibold text-gray-900 mb-2">Assessment Recommendation</h5>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div class="text-center">
                                            <div class="text-lg font-bold text-red-600">Total Loss</div>
                                            <div class="text-xs text-gray-600">Primary Recommendation</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-lg font-bold text-green-600">£5,625</div>
                                            <div class="text-xs text-gray-600">Potential Savings</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-lg font-bold text-blue-600">Category S</div>
                                            <div class="text-xs text-gray-600">DVLA Classification</div>
                                        </div>
                                    </div>
                                    <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded">
                                        <div class="text-sm text-yellow-800">
                                            <i class="fas fa-exclamation-triangle mr-2"></i>
                                            <strong>Action Required:</strong> Due to structural damage and 70% repair-to-value ratio, 
                                            recommend total loss settlement. DVLA notification required for Category S classification.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Assessment Viewer -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
                <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-list-alt text-blue-600 mr-2"></i>
                                Detailed Assessment Viewer
                            </h4>
                            <p class="text-sm text-gray-600 mt-1">Comprehensive assessment sections with progress tracking</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="text-right">
                                <div class="text-sm font-medium text-gray-900">Overall Progress</div>
                                <div class="text-lg font-bold text-green-600">92%</div>
                            </div>
                            <div class="w-12 h-12 relative">
                                <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 48 48">
                                    <circle cx="24" cy="24" r="20" stroke="#e5e7eb" stroke-width="3" fill="none"></circle>
                                    <circle cx="24" cy="24" r="20" stroke="#10b981" stroke-width="3" fill="none" 
                                            stroke-dasharray="125.66" stroke-dashoffset="10.05" stroke-linecap="round"></circle>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xs font-bold text-green-600">92%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-6">
                    <!-- Hierarchical Navigation Menu -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Assessment Sections Navigation -->
                        <div class="lg:col-span-1">
                            <h5 class="text-sm font-semibold text-gray-900 mb-4 flex items-center">
                                <i class="fas fa-sitemap text-gray-600 mr-2"></i>
                                Assessment Sections
                            </h5>
                            
                            <div class="space-y-2" id="assessmentSections">
                                <!-- Executive Summary -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="executive-summary" onclick="showSectionDetails('executive-summary')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Executive Summary</div>
                                                <div class="text-xs text-green-600">Complete</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Exterior Damage -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="exterior-damage" onclick="showSectionDetails('exterior-damage')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Exterior Damage</div>
                                                <div class="text-xs text-green-600">38/38 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Wheels & Tires -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="wheels-tires" onclick="showSectionDetails('wheels-tires')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Wheels & Tires</div>
                                                <div class="text-xs text-green-600">12/12 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Interior Damage -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="interior-damage" onclick="showSectionDetails('interior-damage')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Interior Damage</div>
                                                <div class="text-xs text-green-600">19/19 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Mechanical Systems -->
                                <div class="assessment-section-item bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition-colors duration-200" 
                                     data-section="mechanical-systems" onclick="showSectionDetails('mechanical-systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-exclamation-triangle text-yellow-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mechanical Systems</div>
                                                <div class="text-xs text-yellow-600">18/20 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-yellow-600 font-bold">90%</div>
                                    </div>
                                </div>

                                <!-- Electrical Systems -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="electrical-systems" onclick="showSectionDetails('electrical-systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Electrical Systems</div>
                                                <div class="text-xs text-green-600">9/9 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Safety Systems -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="safety-systems" onclick="showSectionDetails('safety-systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Safety Systems</div>
                                                <div class="text-xs text-green-600">6/6 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Frame & Structural -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="frame-structural" onclick="showSectionDetails('frame-structural')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Frame & Structural</div>
                                                <div class="text-xs text-green-600">6/6 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Fluid Systems -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="fluid-systems" onclick="showSectionDetails('fluid-systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Fluid Systems</div>
                                                <div class="text-xs text-green-600">6/6 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Documentation -->
                                <div class="assessment-section-item bg-yellow-50 border border-yellow-200 rounded-lg p-3 cursor-pointer hover:bg-yellow-100 transition-colors duration-200" 
                                     data-section="documentation" onclick="showSectionDetails('documentation')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-exclamation-triangle text-yellow-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Documentation</div>
                                                <div class="text-xs text-yellow-600">3/4 points</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-yellow-600 font-bold">75%</div>
                                    </div>
                                </div>

                                <!-- Photo Evidence -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="photo-evidence" onclick="showSectionDetails('photo-evidence')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Photo Evidence</div>
                                                <div class="text-xs text-green-600">47 photos</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>

                                <!-- Reports & Estimates -->
                                <div class="assessment-section-item bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors duration-200" 
                                     data-section="reports-estimates" onclick="showSectionDetails('reports-estimates')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600 text-xs"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Reports & Estimates</div>
                                                <div class="text-xs text-green-600">3 estimates</div>
                                            </div>
                                        </div>
                                        <div class="text-xs text-green-600 font-bold">100%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Component Detail Views -->
                        <div class="lg:col-span-2">
                            <div class="flex items-center justify-between mb-4">
                                <h5 class="text-sm font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-cogs text-gray-600 mr-2"></i>
                                    Section Details
                                </h5>
                                <div class="flex items-center space-x-2">
                                    <button onclick="expandAllSections()" class="text-xs text-blue-600 hover:text-blue-700 underline">
                                        Expand All
                                    </button>
                                    <button onclick="collapseAllSections()" class="text-xs text-gray-600 hover:text-gray-700 underline">
                                        Collapse All
                                    </button>
                                </div>
                            </div>

                            <div id="sectionDetailsContainer" class="space-y-4">
                                <!-- Default message when no section is selected -->
                                <div id="defaultMessage" class="text-center py-8 text-gray-500">
                                    <i class="fas fa-mouse-pointer text-3xl mb-3"></i>
                                    <p class="text-sm">Select an assessment section from the left to view detailed information</p>
                                </div>

                                <!-- Section detail templates will be populated here via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visual Damage Overview -->
            <div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
                <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                <i class="fas fa-car text-red-600 mr-2"></i>
                                Visual Damage Overview
                            </h4>
                            <p class="text-sm text-gray-600 mt-1">Interactive vehicle damage map with severity indicators</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button id="resetDamageView" class="px-3 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50">
                                Reset View
                            </button>
                            <button id="toggleDamageView" class="px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700">
                                Toggle View
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6">
                    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                        <!-- Interactive Vehicle Damage Map -->
                        <div class="xl:col-span-2">
                            <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                                <div class="relative">
                                    <!-- Vehicle SVG Diagram -->
                                    <div id="vehicleDamageMap" class="w-full max-w-2xl mx-auto">
                                        <svg viewBox="0 0 800 400" class="w-full h-auto">
                                            <!-- Vehicle Outline -->
                                            <rect x="100" y="100" width="600" height="200" rx="20" ry="20" 
                                                  fill="#f3f4f6" stroke="#6b7280" stroke-width="2"/>
                                            
                                            <!-- Front Section -->
                                            <rect id="front-bumper" x="50" y="120" width="60" height="160" rx="10" ry="10" 
                                                  fill="#ef4444" stroke="#dc2626" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="front-bumper" data-severity="severe" data-cost="2500"
                                                  onclick="showDamageDetail('front-bumper')"/>
                                            
                                            <!-- Front Left -->
                                            <rect id="front-left" x="100" y="100" width="150" height="80" rx="5" ry="5" 
                                                  fill="#f59e0b" stroke="#d97706" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="front-left" data-severity="moderate" data-cost="1800"
                                                  onclick="showDamageDetail('front-left')"/>
                                            
                                            <!-- Front Right -->
                                            <rect id="front-right" x="100" y="220" width="150" height="80" rx="5" ry="5" 
                                                  fill="#10b981" stroke="#059669" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="front-right" data-severity="minor" data-cost="450"
                                                  onclick="showDamageDetail('front-right')"/>
                                            
                                            <!-- Driver Side -->
                                            <rect id="driver-side" x="250" y="80" width="200" height="40" rx="5" ry="5" 
                                                  fill="#ef4444" stroke="#dc2626" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="driver-side" data-severity="severe" data-cost="3200"
                                                  onclick="showDamageDetail('driver-side')"/>
                                            
                                            <!-- Passenger Side -->
                                            <rect id="passenger-side" x="250" y="280" width="200" height="40" rx="5" ry="5" 
                                                  fill="#f59e0b" stroke="#d97706" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="passenger-side" data-severity="moderate" data-cost="1600"
                                                  onclick="showDamageDetail('passenger-side')"/>
                                            
                                            <!-- Roof -->
                                            <rect id="roof" x="250" y="120" width="200" height="160" rx="10" ry="10" 
                                                  fill="#6b7280" stroke="#4b5563" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="roof" data-severity="none" data-cost="0"
                                                  onclick="showDamageDetail('roof')"/>
                                            
                                            <!-- Rear Left -->
                                            <rect id="rear-left" x="450" y="100" width="150" height="80" rx="5" ry="5" 
                                                  fill="#f59e0b" stroke="#d97706" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="rear-left" data-severity="moderate" data-cost="1200"
                                                  onclick="showDamageDetail('rear-left')"/>
                                            
                                            <!-- Rear Right -->
                                            <rect id="rear-right" x="450" y="220" width="150" height="80" rx="5" ry="5" 
                                                  fill="#10b981" stroke="#059669" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="rear-right" data-severity="minor" data-cost="350"
                                                  onclick="showDamageDetail('rear-right')"/>
                                            
                                            <!-- Rear Bumper -->
                                            <rect id="rear-bumper" x="690" y="120" width="60" height="160" rx="10" ry="10" 
                                                  fill="#10b981" stroke="#059669" stroke-width="2" 
                                                  class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                  data-section="rear-bumper" data-severity="minor" data-cost="280"
                                                  onclick="showDamageDetail('rear-bumper')"/>
                                            
                                            <!-- Wheels -->
                                            <circle id="front-left-wheel" cx="180" cy="350" r="25" 
                                                    fill="#ef4444" stroke="#dc2626" stroke-width="2" 
                                                    class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                    data-section="front-left-wheel" data-severity="severe" data-cost="800"
                                                    onclick="showDamageDetail('front-left-wheel')"/>
                                            <circle id="front-right-wheel" cx="180" cy="50" r="25" 
                                                    fill="#6b7280" stroke="#4b5563" stroke-width="2" 
                                                    class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                    data-section="front-right-wheel" data-severity="none" data-cost="0"
                                                    onclick="showDamageDetail('front-right-wheel')"/>
                                            <circle id="rear-left-wheel" cx="520" cy="350" r="25" 
                                                    fill="#f59e0b" stroke="#d97706" stroke-width="2" 
                                                    class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                    data-section="rear-left-wheel" data-severity="moderate" data-cost="600"
                                                    onclick="showDamageDetail('rear-left-wheel')"/>
                                            <circle id="rear-right-wheel" cx="520" cy="50" r="25" 
                                                    fill="#6b7280" stroke="#4b5563" stroke-width="2" 
                                                    class="damage-section cursor-pointer hover:opacity-80 transition-opacity"
                                                    data-section="rear-right-wheel" data-severity="none" data-cost="0"
                                                    onclick="showDamageDetail('rear-right-wheel')"/>
                                            
                                            <!-- Labels -->
                                            <text x="400" y="30" text-anchor="middle" class="text-sm font-medium fill-gray-700">Front</text>
                                            <text x="400" y="390" text-anchor="middle" class="text-sm font-medium fill-gray-700">Rear</text>
                                            <text x="30" y="205" text-anchor="middle" class="text-sm font-medium fill-gray-700" transform="rotate(-90 30 205)">Driver Side</text>
                                            <text x="770" y="205" text-anchor="middle" class="text-sm font-medium fill-gray-700" transform="rotate(90 770 205)">Passenger Side</text>
                                        </svg>
                                    </div>
                                    
                                    <!-- Damage Detail Popup -->
                                    <div id="damageDetailPopup" class="absolute top-4 right-4 bg-white border border-gray-300 rounded-lg shadow-lg p-4 hidden z-10 w-64">
                                        <div class="flex items-center justify-between mb-2">
                                            <h6 id="damageTitle" class="text-sm font-semibold text-gray-900"></h6>
                                            <button onclick="hideDamageDetail()" class="text-gray-400 hover:text-gray-600">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                        <div id="damageContent" class="space-y-2">
                                            <!-- Content populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Legend -->
                                <div class="mt-4 flex items-center justify-center space-x-6">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-4 h-4 bg-red-500 rounded"></div>
                                        <span class="text-xs text-gray-600">Severe Damage</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                                        <span class="text-xs text-gray-600">Moderate Damage</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-4 h-4 bg-green-500 rounded"></div>
                                        <span class="text-xs text-gray-600">Minor Damage</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-4 h-4 bg-gray-500 rounded"></div>
                                        <span class="text-xs text-gray-600">No Damage</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Severity Matrix -->
                        <div class="space-y-4">
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                    <i class="fas fa-th-large text-gray-600 mr-2"></i>
                                    Damage Severity Matrix
                                </h5>
                                
                                <div class="space-y-3">
                                    <!-- Severe Damage -->
                                    <div class="bg-red-50 border border-red-200 rounded p-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-medium text-red-800">Severe Damage</span>
                                            <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded">4 Areas</span>
                                        </div>
                                        <div class="space-y-1 text-xs text-red-700">
                                            <div>• Front Bumper (£2,500)</div>
                                            <div>• Driver Side (£3,200)</div>
                                            <div>• Front Left Wheel (£800)</div>
                                        </div>
                                        <div class="mt-2 text-xs font-medium text-red-800">
                                            Total: £6,500
                                        </div>
                                    </div>
                                    
                                    <!-- Moderate Damage -->
                                    <div class="bg-yellow-50 border border-yellow-200 rounded p-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-medium text-yellow-800">Moderate Damage</span>
                                            <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">4 Areas</span>
                                        </div>
                                        <div class="space-y-1 text-xs text-yellow-700">
                                            <div>• Front Left Panel (£1,800)</div>
                                            <div>• Passenger Side (£1,600)</div>
                                            <div>• Rear Left Panel (£1,200)</div>
                                            <div>• Rear Left Wheel (£600)</div>
                                        </div>
                                        <div class="mt-2 text-xs font-medium text-yellow-800">
                                            Total: £5,200
                                        </div>
                                    </div>
                                    
                                    <!-- Minor Damage -->
                                    <div class="bg-green-50 border border-green-200 rounded p-3">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm font-medium text-green-800">Minor Damage</span>
                                            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">3 Areas</span>
                                        </div>
                                        <div class="space-y-1 text-xs text-green-700">
                                            <div>• Front Right Panel (£450)</div>
                                            <div>• Rear Right Panel (£350)</div>
                                            <div>• Rear Bumper (£280)</div>
                                        </div>
                                        <div class="mt-2 text-xs font-medium text-green-800">
                                            Total: £1,080
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Summary -->
                                <div class="mt-4 pt-3 border-t border-gray-200">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium text-gray-900">Total Repair Cost:</span>
                                        <span class="text-lg font-bold text-red-600">£12,780</span>
                                    </div>
                                    <div class="flex justify-between items-center mt-1">
                                        <span class="text-xs text-gray-600">Affected Areas:</span>
                                        <span class="text-xs font-medium text-gray-900">11 of 12 sections</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quick Navigation -->
                            <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                    <i class="fas fa-search text-blue-600 mr-2"></i>
                                    Detailed View Navigation
                                </h5>
                                
                                <div class="space-y-2">
                                    <button onclick="focusSection('structural')" class="w-full text-left px-3 py-2 text-xs bg-white border border-blue-200 rounded hover:bg-blue-50 transition-colors">
                                        <i class="fas fa-hard-hat text-red-600 mr-2"></i>
                                        Structural Components
                                    </button>
                                    <button onclick="focusSection('body')" class="w-full text-left px-3 py-2 text-xs bg-white border border-blue-200 rounded hover:bg-blue-50 transition-colors">
                                        <i class="fas fa-car text-yellow-600 mr-2"></i>
                                        Body Panels
                                    </button>
                                    <button onclick="focusSection('mechanical')" class="w-full text-left px-3 py-2 text-xs bg-white border border-blue-200 rounded hover:bg-blue-50 transition-colors">
                                        <i class="fas fa-cog text-blue-600 mr-2"></i>
                                        Mechanical Systems
                                    </button>
                                    <button onclick="focusSection('safety')" class="w-full text-left px-3 py-2 text-xs bg-white border border-blue-200 rounded hover:bg-blue-50 transition-colors">
                                        <i class="fas fa-shield-alt text-green-600 mr-2"></i>
                                        Safety Systems
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quality Assurance and Validation System -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Quality Assurance & Validation</h2>
                <p class="text-sm text-gray-500">Assessment quality metrics and multi-source comparison</p>
            </div>
            
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                <!-- Quality Metrics Display -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-chart-bar text-blue-600 mr-2"></i>
                                    Quality Metrics
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">Assessment completeness and quality indicators</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="px-3 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50">
                                    Export Report
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-6">
                        <!-- Completeness Indicators -->
                        <div class="mb-6">
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-tasks text-blue-600 mr-2"></i>
                                Assessment Completeness
                            </h5>
                            
                            <div class="space-y-4">
                                <!-- Overall Completeness -->
                                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-check text-green-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Overall Assessment</div>
                                                <div class="text-xs text-gray-600">All required sections completed</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-green-600">92%</div>
                                            <div class="text-xs text-gray-500">Complete</div>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: 92%"></div>
                                    </div>
                                </div>

                                <!-- Photo Quality -->
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-camera text-blue-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Photo Quality</div>
                                                <div class="text-xs text-gray-600">47 photos • High resolution</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-blue-600">95%</div>
                                            <div class="text-xs text-gray-500">Quality Score</div>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: 95%"></div>
                                    </div>
                                </div>

                                <!-- Assessment Score -->
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                                <i class="fas fa-star text-purple-600"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Assessment Score</div>
                                                <div class="text-xs text-gray-600">AI confidence rating</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-lg font-bold text-purple-600">8.7</div>
                                            <div class="text-xs text-gray-500">out of 10</div>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full transition-all duration-500" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Evidence Summary -->
                        <div class="mb-6">
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-folder-open text-gray-600 mr-2"></i>
                                Evidence Summary
                            </h5>
                            
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Photos</div>
                                            <div class="text-xs text-gray-600">High-res evidence</div>
                                        </div>
                                        <div class="text-lg font-bold text-gray-900">47</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Documents</div>
                                            <div class="text-xs text-gray-600">Supporting docs</div>
                                        </div>
                                        <div class="text-lg font-bold text-gray-900">12</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Estimates</div>
                                            <div class="text-xs text-gray-600">Repair quotes</div>
                                        </div>
                                        <div class="text-lg font-bold text-gray-900">3</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Reports</div>
                                            <div class="text-xs text-gray-600">Technical reports</div>
                                        </div>
                                        <div class="text-lg font-bold text-gray-900">2</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Validation Controls -->
                        <div>
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-clipboard-check text-green-600 mr-2"></i>
                                Validation Controls
                            </h5>
                            
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-check text-green-600 text-xs"></i>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Technical Review</div>
                                            <div class="text-xs text-gray-600">Senior assessor approved</div>
                                        </div>
                                    </div>
                                    <div class="text-xs text-green-600 font-medium">Approved</div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-clock text-yellow-600 text-xs"></i>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Quality Review</div>
                                            <div class="text-xs text-gray-600">Pending QA team review</div>
                                        </div>
                                    </div>
                                    <div class="text-xs text-yellow-600 font-medium">Pending</div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-user-check text-blue-600 text-xs"></i>
                                        </div>
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Final Approval</div>
                                            <div class="text-xs text-gray-600">Manager sign-off required</div>
                                        </div>
                                    </div>
                                    <button class="px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700">
                                        Request Approval
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Multi-Source Comparison -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-balance-scale text-green-600 mr-2"></i>
                                    Multi-Source Comparison
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">Estimate comparison and recommendation system</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="px-3 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50">
                                    Add Source
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-6">
                        <!-- Estimate Comparison Table -->
                        <div class="mb-6">
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-table text-gray-600 mr-2"></i>
                                Estimate Comparison
                            </h5>
                            
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-gray-200">
                                            <th class="text-left py-2 px-3 font-medium text-gray-900">Source</th>
                                            <th class="text-right py-2 px-3 font-medium text-gray-900">Parts</th>
                                            <th class="text-right py-2 px-3 font-medium text-gray-900">Labor</th>
                                            <th class="text-right py-2 px-3 font-medium text-gray-900">Total</th>
                                            <th class="text-center py-2 px-3 font-medium text-gray-900">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-100">
                                        <tr class="hover:bg-gray-50">
                                            <td class="py-3 px-3">
                                                <div class="flex items-center space-x-2">
                                                    <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                                        <i class="fas fa-robot text-blue-600 text-xs"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-medium text-gray-900">AI Analysis</div>
                                                        <div class="text-xs text-gray-500">System generated</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3 px-3 text-right font-medium">£8,450</td>
                                            <td class="py-3 px-3 text-right font-medium">£4,675</td>
                                            <td class="py-3 px-3 text-right font-bold text-blue-600">£13,125</td>
                                            <td class="py-3 px-3 text-center">
                                                <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">Primary</span>
                                            </td>
                                        </tr>
                                        
                                        <tr class="hover:bg-gray-50">
                                            <td class="py-3 px-3">
                                                <div class="flex items-center space-x-2">
                                                    <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center">
                                                        <i class="fas fa-user text-green-600 text-xs"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-medium text-gray-900">Human Assessor</div>
                                                        <div class="text-xs text-gray-500">John Smith, Senior</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3 px-3 text-right font-medium">£8,200</td>
                                            <td class="py-3 px-3 text-right font-medium">£4,950</td>
                                            <td class="py-3 px-3 text-right font-bold text-green-600">£13,150</td>
                                            <td class="py-3 px-3 text-center">
                                                <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full">Verified</span>
                                            </td>
                                        </tr>
                                        
                                        <tr class="hover:bg-gray-50">
                                            <td class="py-3 px-3">
                                                <div class="flex items-center space-x-2">
                                                    <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center">
                                                        <i class="fas fa-store text-purple-600 text-xs"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-medium text-gray-900">BMW Dealer</div>
                                                        <div class="text-xs text-gray-500">Official quote</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3 px-3 text-right font-medium">£9,850</td>
                                            <td class="py-3 px-3 text-right font-medium">£5,200</td>
                                            <td class="py-3 px-3 text-right font-bold text-purple-600">£15,050</td>
                                            <td class="py-3 px-3 text-center">
                                                <span class="px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full">OEM</span>
                                            </td>
                                        </tr>
                                        
                                        <tr class="hover:bg-gray-50">
                                            <td class="py-3 px-3">
                                                <div class="flex items-center space-x-2">
                                                    <div class="w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center">
                                                        <i class="fas fa-wrench text-orange-600 text-xs"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-medium text-gray-900">Approved Shop</div>
                                                        <div class="text-xs text-gray-500">Network partner</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-3 px-3 text-right font-medium">£7,650</td>
                                            <td class="py-3 px-3 text-right font-medium">£4,200</td>
                                            <td class="py-3 px-3 text-right font-bold text-orange-600">£11,850</td>
                                            <td class="py-3 px-3 text-center">
                                                <span class="px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full">Network</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Parts, Labor, and Timeline Breakdown -->
                        <div class="mb-6">
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-chart-pie text-gray-600 mr-2"></i>
                                Breakdown Analysis
                            </h5>
                            
                            <div class="grid grid-cols-3 gap-4">
                                <!-- Parts Breakdown -->
                                <div class="bg-blue-50 rounded-lg p-4">
                                    <div class="text-center mb-3">
                                        <div class="text-lg font-bold text-blue-600">£8,450</div>
                                        <div class="text-xs text-gray-600">Average Parts Cost</div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Range:</span>
                                            <span class="font-medium">£7,650 - £9,850</span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Variance:</span>
                                            <span class="font-medium">±13%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Labor Breakdown -->
                                <div class="bg-green-50 rounded-lg p-4">
                                    <div class="text-center mb-3">
                                        <div class="text-lg font-bold text-green-600">£4,756</div>
                                        <div class="text-xs text-gray-600">Average Labor Cost</div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Range:</span>
                                            <span class="font-medium">£4,200 - £5,200</span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Hours:</span>
                                            <span class="font-medium">32-42h</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Timeline Breakdown -->
                                <div class="bg-purple-50 rounded-lg p-4">
                                    <div class="text-center mb-3">
                                        <div class="text-lg font-bold text-purple-600">7-10</div>
                                        <div class="text-xs text-gray-600">Days Estimate</div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Fastest:</span>
                                            <span class="font-medium">5 days</span>
                                        </div>
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-600">Parts wait:</span>
                                            <span class="font-medium">2-3 days</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recommendation System -->
                        <div>
                            <h5 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-lightbulb text-yellow-600 mr-2"></i>
                                AI Recommendations
                            </h5>
                            
                            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-star text-yellow-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="text-sm font-semibold text-gray-900 mb-2">Recommended Approach</div>
                                        <div class="text-sm text-gray-700 mb-3">
                                            Based on cost analysis and quality factors, we recommend the <strong>Human Assessor estimate</strong> 
                                            (£13,150) as it provides the best balance of cost-effectiveness and quality assurance.
                                        </div>
                                        
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-3">
                                            <div class="flex items-center space-x-2">
                                                <i class="fas fa-check-circle text-green-600 text-sm"></i>
                                                <span class="text-xs text-gray-700">Cost competitive</span>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <i class="fas fa-check-circle text-green-600 text-sm"></i>
                                                <span class="text-xs text-gray-700">Quality assured</span>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <i class="fas fa-check-circle text-green-600 text-sm"></i>
                                                <span class="text-xs text-gray-700">Verified estimate</span>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-center space-x-3">
                                            <button class="px-4 py-2 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition-colors">
                                                Accept Recommendation
                                            </button>
                                            <button class="px-4 py-2 border border-gray-300 text-gray-700 text-sm rounded hover:bg-gray-50 transition-colors">
                                                Request Additional Quote
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workflow Tracking System -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Workflow Tracking & Communication</h2>
                <p class="text-sm text-gray-500">Assessment timeline, stakeholder communication, and bottleneck identification</p>
            </div>
            
            <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                <!-- Assessment Timeline -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-timeline text-green-600 mr-2"></i>
                                    Assessment Timeline
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">Progress tracking with milestones</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-green-600">78%</div>
                                <div class="text-xs text-gray-500">Complete</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Progress Bar -->
                        <div class="mb-6">
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Overall Progress</span>
                                <span>78% Complete</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500" style="width: 78%"></div>
                            </div>
                        </div>
                        
                        <!-- Timeline Steps -->
                        <div class="space-y-4">
                            <!-- Completed Steps -->
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-900">Assessment Assigned</p>
                                        <span class="text-xs text-gray-500">2 days ago</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Assigned to John Smith - Senior Assessor</p>
                                    <div class="text-xs text-green-600 mt-1">
                                        <i class="fas fa-clock mr-1"></i>Completed on time
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-900">Photos Uploaded</p>
                                        <span class="text-xs text-gray-500">1 day ago</span>
                                    </div>
                                    <p class="text-xs text-gray-500">47 photos uploaded and processed</p>
                                    <div class="text-xs text-green-600 mt-1">
                                        <i class="fas fa-camera mr-1"></i>High quality images
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-900">System Analysis Complete</p>
                                        <span class="text-xs text-gray-500">18 hours ago</span>
                                    </div>
                                    <p class="text-xs text-gray-500">AI analysis and damage assessment completed</p>
                                    <div class="text-xs text-green-600 mt-1">
                                        <i class="fas fa-robot mr-1"></i>95% confidence score
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Current Step -->
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center pulse-dot">
                                    <i class="fas fa-user text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-900">Human Review Started</p>
                                        <span class="text-xs text-blue-600">In Progress</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Senior assessor reviewing AI analysis</p>
                                    <div class="text-xs text-blue-600 mt-1">
                                        <i class="fas fa-stopwatch mr-1"></i>2h 15m remaining
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Pending Steps -->
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i class="fas fa-clipboard-check text-gray-500 text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-500">Quality Check</p>
                                        <span class="text-xs text-gray-400">Pending</span>
                                    </div>
                                    <p class="text-xs text-gray-400">Final quality assurance review</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i class="fas fa-paper-plane text-gray-500 text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-500">Customer Notification</p>
                                        <span class="text-xs text-gray-400">Pending</span>
                                    </div>
                                    <p class="text-xs text-gray-400">Send assessment results to customer</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check-double text-gray-500 text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <p class="text-sm font-medium text-gray-500">Final Approval</p>
                                        <span class="text-xs text-gray-400">Pending</span>
                                    </div>
                                    <p class="text-xs text-gray-400">Management approval and case closure</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Milestone Indicators -->
                        <div class="mt-6 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between text-xs">
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full mr-1"></div>
                                        <span class="text-gray-600">Completed (4)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-blue-500 rounded-full mr-1"></div>
                                        <span class="text-gray-600">In Progress (1)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-gray-300 rounded-full mr-1"></div>
                                        <span class="text-gray-600">Pending (3)</span>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-700 font-medium">View Details</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Stakeholder Communication Log -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-comments text-blue-600 mr-2"></i>
                                    Communication Log
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">Stakeholder interactions and messages</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors" title="Send Message">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                                <button class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors" title="Refresh">
                                    <i class="fas fa-sync text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Communication Timeline -->
                        <div class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Recent Message -->
                            <div class="flex items-start space-x-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                <div class="flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <p class="text-sm font-medium text-gray-900">John Smith (Assessor)</p>
                                        <span class="text-xs text-gray-500">2 hours ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">Assessment review in progress. Initial findings show moderate damage to front bumper and headlight assembly. Requesting additional photos of undercarriage for complete evaluation.</p>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <button class="text-xs text-blue-600 hover:text-blue-700 font-medium">Reply</button>
                                        <button class="text-xs text-blue-600 hover:text-blue-700 font-medium">Forward</button>
                                        <span class="text-xs text-gray-500">• Internal</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Customer Message -->
                            <div class="flex items-start space-x-3 p-3 bg-green-50 rounded-lg border border-green-200">
                                <div class="flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-circle text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <p class="text-sm font-medium text-gray-900">Sarah Johnson (Customer)</p>
                                        <span class="text-xs text-gray-500">4 hours ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">Thank you for the update. I've uploaded the additional photos you requested. The vehicle is currently at Manchester Repair Centre as discussed. Please let me know if you need anything else.</p>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <button class="text-xs text-green-600 hover:text-green-700 font-medium">Reply</button>
                                        <button class="text-xs text-green-600 hover:text-green-700 font-medium">Call Customer</button>
                                        <span class="text-xs text-gray-500">• External</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Repair Shop Message -->
                            <div class="flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                                <div class="flex-shrink-0 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-wrench text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <p class="text-sm font-medium text-gray-900">Manchester Repair Centre</p>
                                        <span class="text-xs text-gray-500">6 hours ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">Vehicle received and initial inspection completed. Confirming damage assessment matches photos. Parts availability: Front bumper (2-3 days), Headlight assembly (1-2 days). Estimated repair time: 3-4 working days.</p>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <button class="text-xs text-yellow-600 hover:text-yellow-700 font-medium">Reply</button>
                                        <button class="text-xs text-yellow-600 hover:text-yellow-700 font-medium">Request Quote</button>
                                        <span class="text-xs text-gray-500">• Partner</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- System Alert -->
                            <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg border border-gray-200">
                                <div class="flex-shrink-0 w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <p class="text-sm font-medium text-gray-900">System Alert</p>
                                        <span class="text-xs text-gray-500">1 day ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">AI analysis completed. Damage severity: Moderate. Estimated repair cost: £2,850 ± £350. Confidence level: 95%. No fraud indicators detected.</p>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <button class="text-xs text-gray-600 hover:text-gray-700 font-medium">View Report</button>
                                        <span class="text-xs text-gray-500">• Automated</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Initial Assignment -->
                            <div class="flex items-start space-x-3 p-3 bg-purple-50 rounded-lg border border-purple-200">
                                <div class="flex-shrink-0 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-clipboard text-white text-xs"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <p class="text-sm font-medium text-gray-900">Assessment Manager</p>
                                        <span class="text-xs text-gray-500">2 days ago</span>
                                    </div>
                                    <p class="text-sm text-gray-700">Case CLM-2024-156 assigned to John Smith. Priority: Standard. SLA: 48 hours for initial assessment. Customer contact details and incident report attached.</p>
                                    <div class="flex items-center space-x-2 mt-2">
                                        <button class="text-xs text-purple-600 hover:text-purple-700 font-medium">View Assignment</button>
                                        <span class="text-xs text-gray-500">• Internal</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="mt-6 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <button class="inline-flex items-center px-3 py-1.5 border border-blue-300 text-xs font-medium rounded text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors">
                                        <i class="fas fa-phone mr-1"></i>
                                        Call Customer
                                    </button>
                                    <button class="inline-flex items-center px-3 py-1.5 border border-green-300 text-xs font-medium rounded text-green-700 bg-green-50 hover:bg-green-100 transition-colors">
                                        <i class="fas fa-envelope mr-1"></i>
                                        Send Update
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500">
                                    <i class="fas fa-clock mr-1"></i>Last updated 2 hours ago
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bottleneck Identification -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                                    Bottleneck Detection
                                </h4>
                                <p class="text-sm text-gray-600 mt-1">Automated delay identification and resolution</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-red-600">2</div>
                                <div class="text-xs text-gray-500">Active Issues</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <!-- Active Bottlenecks -->
                        <div class="space-y-4">
                            <!-- Critical Bottleneck -->
                            <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-red-500 rounded-full mr-2 pulse-dot"></div>
                                        <h5 class="text-sm font-semibold text-red-900">Parts Pricing Lookup Delay</h5>
                                    </div>
                                    <span class="text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full font-medium">Critical</span>
                                </div>
                                
                                <p class="text-sm text-red-800 mb-3">
                                    Parts pricing lookup has been pending for 4 hours, exceeding normal processing time of 30 minutes. 
                                    This is blocking the final cost estimation and delaying customer notification.
                                </p>
                                
                                <div class="grid grid-cols-2 gap-3 mb-3">
                                    <div class="text-xs">
                                        <span class="text-red-600 font-medium">Impact:</span>
                                        <span class="text-red-800">SLA breach in 2h 15m</span>
                                    </div>
                                    <div class="text-xs">
                                        <span class="text-red-600 font-medium">Affected:</span>
                                        <span class="text-red-800">Customer notification</span>
                                    </div>
                                </div>
                                
                                <!-- Resolution Suggestions -->
                                <div class="bg-white rounded-lg p-3 border border-red-200">
                                    <h6 class="text-xs font-semibold text-red-900 mb-2">Suggested Actions:</h6>
                                    <div class="space-y-2">
                                        <button class="w-full text-left text-xs text-red-700 hover:text-red-800 hover:bg-red-100 p-2 rounded transition-colors">
                                            <i class="fas fa-phone mr-2"></i>
                                            Contact parts supplier directly (Manchester Auto Parts)
                                        </button>
                                        <button class="w-full text-left text-xs text-red-700 hover:text-red-800 hover:bg-red-100 p-2 rounded transition-colors">
                                            <i class="fas fa-search mr-2"></i>
                                            Use alternative pricing source (Europarts Database)
                                        </button>
                                        <button class="w-full text-left text-xs text-red-700 hover:text-red-800 hover:bg-red-100 p-2 rounded transition-colors">
                                            <i class="fas fa-user-tie mr-2"></i>
                                            Escalate to Senior Assessor (John Smith)
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Warning Bottleneck -->
                            <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                        <h5 class="text-sm font-semibold text-yellow-900">Engineer Report Overdue</h5>
                                    </div>
                                    <span class="text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full font-medium">Warning</span>
                                </div>
                                
                                <p class="text-sm text-yellow-800 mb-3">
                                    Structural engineer report for case ASS-2024-467 is 2 hours overdue. 
                                    This may impact the final assessment timeline and customer satisfaction.
                                </p>
                                
                                <div class="grid grid-cols-2 gap-3 mb-3">
                                    <div class="text-xs">
                                        <span class="text-yellow-600 font-medium">Expected:</span>
                                        <span class="text-yellow-800">2 hours ago</span>
                                    </div>
                                    <div class="text-xs">
                                        <span class="text-yellow-600 font-medium">Engineer:</span>
                                        <span class="text-yellow-800">Dr. Michael Brown</span>
                                    </div>
                                </div>
                                
                                <!-- Resolution Suggestions -->
                                <div class="bg-white rounded-lg p-3 border border-yellow-200">
                                    <h6 class="text-xs font-semibold text-yellow-900 mb-2">Suggested Actions:</h6>
                                    <div class="space-y-2">
                                        <button class="w-full text-left text-xs text-yellow-700 hover:text-yellow-800 hover:bg-yellow-100 p-2 rounded transition-colors">
                                            <i class="fas fa-phone mr-2"></i>
                                            Call Dr. Michael Brown (+44 161 555 0123)
                                        </button>
                                        <button class="w-full text-left text-xs text-yellow-700 hover:text-yellow-800 hover:bg-yellow-100 p-2 rounded transition-colors">
                                            <i class="fas fa-user-plus mr-2"></i>
                                            Assign backup engineer (Dr. Sarah Wilson)
                                        </button>
                                        <button class="w-full text-left text-xs text-yellow-700 hover:text-yellow-800 hover:bg-yellow-100 p-2 rounded transition-colors">
                                            <i class="fas fa-clock mr-2"></i>
                                            Request deadline extension (24 hours)
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bottleneck Analytics -->
                        <div class="mt-6 pt-4 border-t border-gray-200">
                            <h6 class="text-sm font-semibold text-gray-900 mb-3">Common Bottlenecks (Last 30 Days)</h6>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Parts pricing delays</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-red-500 h-1.5 rounded-full" style="width: 65%"></div>
                                        </div>
                                        <span class="text-gray-900 font-medium">13 cases</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Engineer report delays</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-yellow-500 h-1.5 rounded-full" style="width: 45%"></div>
                                        </div>
                                        <span class="text-gray-900 font-medium">9 cases</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Customer response delays</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-blue-500 h-1.5 rounded-full" style="width: 30%"></div>
                                        </div>
                                        <span class="text-gray-900 font-medium">6 cases</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 flex items-center justify-between">
                                <button class="text-xs text-blue-600 hover:text-blue-700 font-medium">
                                    View Full Analytics Report
                                </button>
                                <div class="text-xs text-gray-500">
                                    <i class="fas fa-sync mr-1"></i>Updated 5 minutes ago
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Decision Support Tools Section -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Decision Support Tools</h2>
                <p class="text-sm text-gray-500">Assessment decision making and settlement tools</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Action Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-gavel text-blue-500 mr-2"></i>
                            Action Panel
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Three-button decision interface -->
                        <div class="space-y-3 mb-6">
                            <button class="w-full flex items-center justify-center px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200">
                                <i class="fas fa-check-circle mr-2"></i>
                                Approve Total Loss
                            </button>
                            <button class="w-full flex items-center justify-center px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200">
                                <i class="fas fa-times-circle mr-2"></i>
                                Reject Assessment
                            </button>
                            <button class="w-full flex items-center justify-center px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors duration-200">
                                <i class="fas fa-eye mr-2"></i>
                                Review Required
                            </button>
                        </div>

                        <!-- Settlement Options -->
                        <div class="border-t border-gray-200 pt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Settlement Options</h4>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between p-2 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">Market Value</div>
                                        <div class="text-xs text-gray-500">Current market assessment</div>
                                    </div>
                                    <div class="text-sm font-bold text-gray-900">£18,750</div>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">Trade Value</div>
                                        <div class="text-xs text-gray-500">Trade-in equivalent</div>
                                    </div>
                                    <div class="text-sm font-bold text-gray-900">£16,200</div>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-blue-50 rounded cursor-pointer hover:bg-blue-100 transition-colors duration-200 border border-blue-200">
                                    <div>
                                        <div class="text-sm font-medium text-blue-900">Negotiate Settlement</div>
                                        <div class="text-xs text-blue-600">Custom amount</div>
                                    </div>
                                    <div class="text-sm font-bold text-blue-900">£17,500</div>
                                </div>
                            </div>
                        </div>

                        <!-- Next Steps Functionality -->
                        <div class="border-t border-gray-200 pt-4 mt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Next Steps</h4>
                            <div class="grid grid-cols-3 gap-2">
                                <button class="flex flex-col items-center justify-center p-3 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-phone text-lg mb-1"></i>
                                    <span class="text-xs font-medium">Call</span>
                                </button>
                                <button class="flex flex-col items-center justify-center p-3 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-envelope text-lg mb-1"></i>
                                    <span class="text-xs font-medium">Email</span>
                                </button>
                                <button class="flex flex-col items-center justify-center p-3 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-file-alt text-lg mb-1"></i>
                                    <span class="text-xs font-medium">Generate</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settlement Calculator -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-calculator text-green-500 mr-2"></i>
                            Settlement Calculator
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Comprehensive settlement breakdown -->
                        <div class="space-y-4">
                            <div class="bg-gray-50 rounded-lg p-3">
                                <h4 class="text-sm font-medium text-gray-900 mb-2">Policy Coverage</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Coverage Limit:</span>
                                        <span class="font-medium">£25,000</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Deductible:</span>
                                        <span class="font-medium text-red-600">-£500</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Available:</span>
                                        <span class="font-medium text-green-600">£24,500</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-blue-50 rounded-lg p-3">
                                <h4 class="text-sm font-medium text-gray-900 mb-2">Vehicle Valuation</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Market Value:</span>
                                        <span class="font-medium">£18,750</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Salvage Value:</span>
                                        <span class="font-medium text-green-600">+£2,100</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Net Loss:</span>
                                        <span class="font-medium">£16,650</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                                <h4 class="text-sm font-medium text-gray-900 mb-2">Final Settlement</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Net Loss:</span>
                                        <span class="font-medium">£16,650</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Customer Deductible:</span>
                                        <span class="font-medium text-red-600">-£500</span>
                                    </div>
                                    <div class="flex justify-between border-t border-green-300 pt-2">
                                        <span class="text-gray-900 font-medium">Settlement Amount:</span>
                                        <span class="font-bold text-green-700 text-lg">£16,150</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Authorization workflow -->
                            <div class="pt-2">
                                <button class="w-full flex items-center justify-center px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200">
                                    <i class="fas fa-check-double mr-2"></i>
                                    Authorize Settlement
                                </button>
                                <div class="text-xs text-gray-500 text-center mt-2">
                                    Requires supervisor approval for amounts over £15,000
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Write-off Classification Panel -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-clipboard-check text-orange-500 mr-2"></i>
                            Write-off Classification
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- UK Classification System -->
                        <div class="mb-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">UK Classification</h4>
                            <div class="space-y-2">
                                <label class="flex items-center p-2 bg-red-50 rounded cursor-pointer hover:bg-red-100 transition-colors duration-200">
                                    <input type="radio" name="uk_classification" value="A" class="mr-3 text-red-600">
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-red-900">Category A</div>
                                        <div class="text-xs text-red-600">Scrap only - no parts salvage</div>
                                    </div>
                                </label>
                                <label class="flex items-center p-2 bg-orange-50 rounded cursor-pointer hover:bg-orange-100 transition-colors duration-200">
                                    <input type="radio" name="uk_classification" value="B" class="mr-3 text-orange-600">
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-orange-900">Category B</div>
                                        <div class="text-xs text-orange-600">Body shell scrap - parts salvage allowed</div>
                                    </div>
                                </label>
                                <label class="flex items-center p-2 bg-yellow-50 rounded cursor-pointer hover:bg-yellow-100 transition-colors duration-200 border border-yellow-200">
                                    <input type="radio" name="uk_classification" value="S" class="mr-3 text-yellow-600" checked>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-yellow-900">Category S</div>
                                        <div class="text-xs text-yellow-600">Structural damage - repairable</div>
                                    </div>
                                </label>
                                <label class="flex items-center p-2 bg-blue-50 rounded cursor-pointer hover:bg-blue-100 transition-colors duration-200">
                                    <input type="radio" name="uk_classification" value="N" class="mr-3 text-blue-600">
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-blue-900">Category N</div>
                                        <div class="text-xs text-blue-600">Non-structural damage</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- SA Classification with 70% rule -->
                        <div class="border-t border-gray-200 pt-4 mb-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">SA Classification</h4>
                            <div class="bg-blue-50 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">Repair Cost:</span>
                                    <span class="font-medium">£13,125</span>
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">Vehicle Value:</span>
                                    <span class="font-medium">£18,750</span>
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">Damage Ratio:</span>
                                    <span class="font-medium text-green-600">70%</span>
                                </div>
                                <div class="border-t border-blue-200 pt-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm font-medium text-gray-900">70% Rule Status:</span>
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            <i class="fas fa-check mr-1"></i>
                                            Compliant
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Justification and DVLA requirements -->
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Justification</label>
                                <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" rows="3" placeholder="Enter classification justification...">Structural damage to A-pillar and roof frame exceeds economical repair threshold. Vehicle meets Category S criteria due to significant structural compromise requiring specialized repair techniques.</textarea>
                            </div>
                            
                            <div class="bg-yellow-50 rounded-lg p-3 border border-yellow-200">
                                <h5 class="text-sm font-medium text-yellow-900 mb-2">DVLA Notification Required</h5>
                                <div class="text-xs text-yellow-700 space-y-1">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-alt mr-2"></i>
                                        Form V23 - Notification of Total Loss
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-calendar mr-2"></i>
                                        Submit within 7 days of classification
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-certificate mr-2"></i>
                                        Certificate of Destruction (if applicable)
                                    </div>
                                </div>
                            </div>

                            <button class="w-full flex items-center justify-center px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white font-medium rounded-lg transition-colors duration-200">
                                <i class="fas fa-stamp mr-2"></i>
                                Submit Classification
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Financial Dashboard Section -->
        <div class="dashboard-section mb-8">
            <div class="mb-4">
                <h2 class="text-lg font-medium text-gray-900">Financial Dashboard</h2>
                <p class="text-sm text-gray-500">Cost analytics, budget tracking, and financial performance metrics</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Cost Analytics Display -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-chart-line text-blue-500 mr-2"></i>
                            Monthly Claims Analysis
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Monthly Claims Trend -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="text-sm font-medium text-gray-900">Claims Trend (Last 6 Months)</h4>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        <i class="fas fa-arrow-up mr-1"></i>
                                        +12.5%
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Simple Chart Representation -->
                            <div class="space-y-2">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Sep 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£142k</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Aug 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 78%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£138k</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Jul 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 92%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£156k</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Jun 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 70%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£125k</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">May 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 65%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£118k</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">Apr 2024</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-24 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 60%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900 w-12 text-right">£112k</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Metrics -->
                        <div class="border-t border-gray-200 pt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Performance Metrics</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-blue-50 rounded-lg p-3">
                                    <div class="text-xs text-gray-600 mb-1">Cost per Assessment</div>
                                    <div class="text-lg font-bold text-blue-900">£485</div>
                                    <div class="flex items-center text-xs">
                                        <i class="fas fa-arrow-down text-green-500 mr-1"></i>
                                        <span class="text-green-600">-8.2%</span>
                                    </div>
                                </div>
                                <div class="bg-green-50 rounded-lg p-3">
                                    <div class="text-xs text-gray-600 mb-1">Settlement Accuracy</div>
                                    <div class="text-lg font-bold text-green-900">94.8%</div>
                                    <div class="flex items-center text-xs">
                                        <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                        <span class="text-green-600">+2.1%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Budget Utilization Display -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-wallet text-green-500 mr-2"></i>
                            Budget Utilization & Remaining Funds
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Budget Overview -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">Monthly Budget</span>
                                <span class="text-sm font-medium text-gray-900">£250,000</span>
                            </div>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">Utilized</span>
                                <span class="text-sm font-medium text-gray-900">£142,350</span>
                            </div>
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-gray-900">Remaining</span>
                                <span class="text-lg font-bold text-green-600">£107,650</span>
                            </div>
                            
                            <!-- Budget Progress Bar -->
                            <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                                <div class="bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500" style="width: 57%"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500">
                                <span>57% utilized</span>
                                <span>43% remaining</span>
                            </div>
                        </div>

                        <!-- Budget Breakdown -->
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-700">Assessments</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-medium text-gray-900">£85,200</div>
                                    <div class="text-xs text-gray-500">34.1%</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-700">Settlements</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-medium text-gray-900">£45,800</div>
                                    <div class="text-xs text-gray-500">18.3%</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-700">Operations</span>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-medium text-gray-900">£11,350</div>
                                    <div class="text-xs text-gray-500">4.5%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Budget Alert -->
                        <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <div class="text-sm">
                                    <div class="font-medium text-green-900">Budget on Track</div>
                                    <div class="text-green-700">Projected to finish 8% under budget</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reporting and Analytics Section -->
            <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                <!-- Performance Analytics Dashboard -->
                <div class="xl:col-span-2 bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-chart-bar text-purple-500 mr-2"></i>
                            Performance Analytics Dashboard
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Velocity Charts -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Claims Processing Velocity (30-Day Trend)</h4>
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div class="bg-blue-50 rounded-lg p-3">
                                    <div class="text-xs text-gray-600 mb-1">Average Processing Time</div>
                                    <div class="text-2xl font-bold text-blue-900">2.4h</div>
                                    <div class="flex items-center text-xs">
                                        <i class="fas fa-arrow-down text-green-500 mr-1"></i>
                                        <span class="text-green-600">-15% vs last month</span>
                                    </div>
                                </div>
                                <div class="bg-green-50 rounded-lg p-3">
                                    <div class="text-xs text-gray-600 mb-1">Claims Completed</div>
                                    <div class="text-2xl font-bold text-green-900">156</div>
                                    <div class="flex items-center text-xs">
                                        <i class="fas fa-arrow-up text-green-500 mr-1"></i>
                                        <span class="text-green-600">+22% vs last month</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Velocity Chart Representation -->
                            <div class="space-y-2">
                                <div class="text-xs text-gray-500 mb-2">Daily Processing Volume (Last 7 Days)</div>
                                <div class="flex items-end justify-between h-20 bg-gray-50 rounded p-2">
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-500 rounded-t" style="height: 45px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Mon</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-500 rounded-t" style="height: 60px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Tue</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-500 rounded-t" style="height: 35px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Wed</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-500 rounded-t" style="height: 70px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Thu</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-500 rounded-t" style="height: 55px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Fri</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-400 rounded-t" style="height: 25px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Sat</span>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="w-6 bg-blue-400 rounded-t" style="height: 15px;"></div>
                                        <span class="text-xs text-gray-500 mt-1">Sun</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Customer Satisfaction Tracking -->
                        <div class="border-t border-gray-200 pt-4 mb-6">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Customer Satisfaction Tracking</h4>
                            <div class="grid grid-cols-3 gap-4">
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-green-600 mb-1">4.8</div>
                                    <div class="text-xs text-gray-500">Average Rating</div>
                                    <div class="flex justify-center mt-1">
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-blue-600 mb-1">94%</div>
                                    <div class="text-xs text-gray-500">Response Rate</div>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-blue-500 h-1.5 rounded-full" style="width: 94%"></div>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-purple-600 mb-1">87%</div>
                                    <div class="text-xs text-gray-500">Recommend Rate</div>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-purple-500 h-1.5 rounded-full" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Satisfaction Breakdown -->
                            <div class="mt-4 space-y-2">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Communication Quality</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-green-500 h-1.5 rounded-full" style="width: 92%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900">4.6</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Processing Speed</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-green-500 h-1.5 rounded-full" style="width: 88%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900">4.4</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-600">Settlement Fairness</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-200 rounded-full h-1.5 mr-2">
                                            <div class="bg-green-500 h-1.5 rounded-full" style="width: 96%"></div>
                                        </div>
                                        <span class="font-medium text-gray-900">4.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trend Analysis with Benchmarks -->
                        <div class="border-t border-gray-200 pt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Trend Analysis & Benchmarks</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-xs text-gray-600">Industry Benchmark</span>
                                        <span class="text-xs font-medium text-gray-500">3.2h avg</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-600">Our Performance</span>
                                        <span class="text-xs font-medium text-green-600">2.4h avg (-25%)</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-green-500 h-1.5 rounded-full" style="width: 75%"></div>
                                    </div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-3">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-xs text-gray-600">Cost Efficiency</span>
                                        <span class="text-xs font-medium text-gray-500">£520 benchmark</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-xs text-gray-600">Our Cost</span>
                                        <span class="text-xs font-medium text-green-600">£485 (-6.7%)</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-green-500 h-1.5 rounded-full" style="width: 93%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Geographic Analysis -->
                <div class="bg-white rounded-lg shadow border border-gray-200">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="text-sm font-medium text-gray-900 flex items-center">
                            <i class="fas fa-map-marked-alt text-red-500 mr-2"></i>
                            Geographic Analysis
                        </h3>
                    </div>
                    <div class="p-4">
                        <!-- Regional Claims Distribution -->
                        <div class="mb-6">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Regional Claims Distribution</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">London</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">42</div>
                                        <div class="text-xs text-gray-500">27%</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Manchester</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">28</div>
                                        <div class="text-xs text-gray-500">18%</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Birmingham</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">24</div>
                                        <div class="text-xs text-gray-500">15%</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Leeds</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">19</div>
                                        <div class="text-xs text-gray-500">12%</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Other</span>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">43</div>
                                        <div class="text-xs text-gray-500">28%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Assessor Availability -->
                        <div class="border-t border-gray-200 pt-4 mb-6">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Assessor Availability</h4>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between p-2 bg-green-50 rounded">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Available</span>
                                    </div>
                                    <span class="text-sm font-medium text-green-700">12</span>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-yellow-50 rounded">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-yellow-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Busy</span>
                                    </div>
                                    <span class="text-sm font-medium text-yellow-700">8</span>
                                </div>
                                <div class="flex items-center justify-between p-2 bg-red-50 rounded">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                                        <span class="text-sm text-gray-700">Unavailable</span>
                                    </div>
                                    <span class="text-sm font-medium text-red-700">3</span>
                                </div>
                            </div>
                        </div>

                        <!-- Repair Network Capacity -->
                        <div class="border-t border-gray-200 pt-4">
                            <h4 class="text-sm font-medium text-gray-900 mb-3">Repair Network Capacity</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Network Utilization</span>
                                    <span class="text-sm font-medium text-gray-900">73%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 73%"></div>
                                </div>
                                <div class="grid grid-cols-2 gap-2 text-xs">
                                    <div class="bg-gray-50 rounded p-2 text-center">
                                        <div class="font-medium text-gray-900">18</div>
                                        <div class="text-gray-500">Active Shops</div>
                                    </div>
                                    <div class="bg-gray-50 rounded p-2 text-center">
                                        <div class="font-medium text-gray-900">156</div>
                                        <div class="text-gray-500">Queue Length</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Assessment Dashboard JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            initializeAssessmentDashboard();
        });
        
        function initializeAssessmentDashboard() {
            // Initialize search functionality
            setupGlobalSearch();
            
            // Initialize SLA Timer
            initializeSLATimer();
            
            // Initialize KPI card interactions
            setupKPIInteractions();
            
            // Initialize alert interactions
            setupAlertInteractions();

            // Initialize decision support tools
            setupDecisionSupportTools();
            
            // Initialize claims overview dashboard
            setupClaimsOverview();
            
            // Initialize workflow tracking system
            setupWorkflowTracking();
            
            // Initialize real-time updates
            startRealTimeUpdates();
        }
        
        function setupWorkflowTracking() {
            // Initialize timeline interactions
            setupTimelineInteractions();
            
            // Initialize communication log
            setupCommunicationLog();
            
            // Initialize bottleneck detection
            setupBottleneckDetection();
            
            // Start real-time updates for workflow tracking
            startWorkflowUpdates();
        }
        
        function setupTimelineInteractions() {
            // Timeline progress animation
            const progressBar = document.querySelector('.bg-gradient-to-r.from-green-500.to-emerald-500');
            if (progressBar) {
                // Animate progress bar on load
                setTimeout(() => {
                    progressBar.style.width = '78%';
                }, 500);
            }
            
            // Timeline step hover effects
            const timelineSteps = document.querySelectorAll('.flex.items-start.space-x-3');
            timelineSteps.forEach(step => {
                step.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(4px)';
                    this.style.transition = 'transform 0.2s ease';
                });
                
                step.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
        }
        
        function setupCommunicationLog() {
            // Auto-refresh communication log every 30 seconds
            setInterval(refreshCommunicationLog, 30000);
            
            // Setup message interaction handlers
            const messageActions = document.querySelectorAll('.text-xs.font-medium');
            messageActions.forEach(action => {
                if (action.textContent.includes('Reply') || action.textContent.includes('Call') || action.textContent.includes('Forward')) {
                    action.addEventListener('click', function(e) {
                        e.preventDefault();
                        handleMessageAction(this.textContent, this.closest('.flex.items-start.space-x-3'));
                    });
                }
            });
            
            // Setup quick action buttons
            const quickActionButtons = document.querySelectorAll('.inline-flex.items-center');
            quickActionButtons.forEach(button => {
                if (button.textContent.includes('Call Customer')) {
                    button.addEventListener('click', function() {
                        initiateCustomerCall();
                    });
                } else if (button.textContent.includes('Send Update')) {
                    button.addEventListener('click', function() {
                        openUpdateModal();
                    });
                }
            });
        }
        
        function setupBottleneckDetection() {
            // Setup bottleneck resolution action handlers
            const resolutionButtons = document.querySelectorAll('.w-full.text-left.text-xs');
            resolutionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    handleBottleneckResolution(this.textContent.trim());
                });
            });
            
            // Auto-refresh bottleneck detection every 60 seconds
            setInterval(refreshBottleneckDetection, 60000);
        }
        
        function startWorkflowUpdates() {
            // Simulate real-time updates for demonstration
            setInterval(() => {
                updateTimelineProgress();
                updateCommunicationBadges();
                updateBottleneckStatus();
            }, 10000);
        }
        
        function refreshCommunicationLog() {
            // In a real implementation, this would fetch new messages from the server
            console.log('Refreshing communication log...');
            
            // Add visual indicator for refresh
            const refreshButton = document.querySelector('.fa-sync');
            if (refreshButton) {
                refreshButton.classList.add('fa-spin');
                setTimeout(() => {
                    refreshButton.classList.remove('fa-spin');
                }, 1000);
            }
        }
        
        function handleMessageAction(actionType, messageElement) {
            const messageAuthor = messageElement.querySelector('.text-sm.font-medium.text-gray-900').textContent;
            
            switch(actionType) {
                case 'Reply':
                    openReplyModal(messageAuthor, messageElement);
                    break;
                case 'Call Customer':
                    initiateCustomerCall();
                    break;
                case 'Forward':
                    openForwardModal(messageElement);
                    break;
                default:
                    console.log('Unknown action:', actionType);
            }
        }
        
        function openReplyModal(recipient, messageElement) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.id = 'replyModal';
            
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Reply to ${recipient}</h3>
                        <button onclick="closeReplyModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" rows="4" placeholder="Type your reply..."></textarea>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="urgentReply" class="rounded">
                            <label for="urgentReply" class="text-sm text-gray-700">Mark as urgent</label>
                        </div>
                    </form>
                    
                    <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
                        <button onclick="closeReplyModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button onclick="sendReply()" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                            Send Reply
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeReplyModal() {
            const modal = document.getElementById('replyModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function sendReply() {
            // In a real implementation, this would send the reply to the server
            console.log('Sending reply...');
            alert('Reply sent successfully!');
            closeReplyModal();
        }
        
        function initiateCustomerCall() {
            // In a real implementation, this would integrate with a phone system
            console.log('Initiating customer call...');
            alert('Initiating call to customer: +44 161 555 0198\n\nIn a real system, this would connect through your phone system.');
        }
        
        function openUpdateModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.id = 'updateModal';
            
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Send Customer Update</h3>
                        <button onclick="closeUpdateModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Update Type</label>
                            <select class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="progress">Progress Update</option>
                                <option value="completion">Assessment Complete</option>
                                <option value="delay">Delay Notification</option>
                                <option value="request">Information Request</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" rows="4" placeholder="Enter your update message..."></textarea>
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2">
                                <input type="checkbox" id="emailUpdate" class="rounded" checked>
                                <label for="emailUpdate" class="text-sm text-gray-700">Send via Email</label>
                            </div>
                            <div class="flex items-center space-x-2">
                                <input type="checkbox" id="smsUpdate" class="rounded">
                                <label for="smsUpdate" class="text-sm text-gray-700">Send via SMS</label>
                            </div>
                        </div>
                    </form>
                    
                    <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
                        <button onclick="closeUpdateModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button onclick="sendUpdate()" class="px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700">
                            Send Update
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeUpdateModal() {
            const modal = document.getElementById('updateModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function sendUpdate() {
            // In a real implementation, this would send the update to the server
            console.log('Sending customer update...');
            alert('Customer update sent successfully!');
            closeUpdateModal();
        }
        
        function handleBottleneckResolution(actionText) {
            console.log('Handling bottleneck resolution:', actionText);
            
            if (actionText.includes('Contact parts supplier')) {
                alert('Contacting Manchester Auto Parts...\nPhone: +44 161 555 0156\nThis would normally integrate with your phone system.');
            } else if (actionText.includes('Use alternative pricing')) {
                alert('Switching to Europarts Database...\nThis would normally redirect to the alternative pricing system.');
            } else if (actionText.includes('Escalate to Senior Assessor')) {
                alert('Escalating to John Smith...\nThis would normally send an urgent notification to the senior assessor.');
            } else if (actionText.includes('Call Dr. Michael Brown')) {
                alert('Calling Dr. Michael Brown...\nPhone: +44 161 555 0123\nThis would normally integrate with your phone system.');
            } else if (actionText.includes('Assign backup engineer')) {
                alert('Assigning Dr. Sarah Wilson as backup engineer...\nThis would normally update the case assignment.');
            } else if (actionText.includes('Request deadline extension')) {
                alert('Requesting 24-hour deadline extension...\nThis would normally send a request to the case manager.');
            }
        }
        
        function refreshBottleneckDetection() {
            console.log('Refreshing bottleneck detection...');
            // In a real implementation, this would check for new bottlenecks
        }
        
        function updateTimelineProgress() {
            // Simulate timeline progress updates
            const progressElements = document.querySelectorAll('.text-2xl.font-bold');
            progressElements.forEach(element => {
                if (element.textContent.includes('%')) {
                    // Simulate small progress increments
                    const currentProgress = parseInt(element.textContent);
                    if (currentProgress < 100 && Math.random() > 0.8) {
                        element.textContent = (currentProgress + 1) + '%';
                    }
                }
            });
        }
        
        function updateCommunicationBadges() {
            // Simulate new message notifications
            const badges = document.querySelectorAll('.notification-badge');
            badges.forEach(badge => {
                if (Math.random() > 0.9) {
                    const currentCount = parseInt(badge.textContent) || 0;
                    badge.textContent = currentCount + 1;
                }
            });
        }
        
        function updateBottleneckStatus() {
            // Simulate bottleneck status changes
            const bottleneckCount = document.querySelector('.text-2xl.font-bold.text-red-600');
            if (bottleneckCount && Math.random() > 0.95) {
                const currentCount = parseInt(bottleneckCount.textContent);
                if (currentCount > 0) {
                    bottleneckCount.textContent = Math.max(0, currentCount - 1);
                }
            }
        }

        function setupGlobalSearch() {
            const searchInput = document.getElementById('globalSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const query = e.target.value;
                    // Implement search functionality
                    console.log('Searching for:', query);
                });
            }
        }
        
        function setupKPIInteractions() {
            const kpiCards = document.querySelectorAll('.kpi-card');
            kpiCards.forEach((card, index) => {
                card.addEventListener('click', function() {
                    // Handle KPI card click-through functionality
                    const kpiType = getKPIType(index);
                    navigateToDetailedView(kpiType);
                });
                
                // Add hover effects for better interactivity
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-4px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(-2px)';
                });
            });
        }
        
        function getKPIType(index) {
            const kpiTypes = ['active-claims', 'pending-reviews', 'processing-time', 'cost-savings', 'accuracy-rate', 'customer-satisfaction'];
            return kpiTypes[index] || 'unknown';
        }
        
        function navigateToDetailedView(kpiType) {
            // Navigate to detailed view based on KPI type
            switch(kpiType) {
                case 'active-claims':
                    console.log('Navigating to active claims detailed view');
                    // window.location.href = '/insurance/claims/active/';
                    break;
                case 'pending-reviews':
                    console.log('Navigating to pending reviews detailed view');
                    // window.location.href = '/insurance/reviews/pending/';
                    break;
                case 'processing-time':
                    console.log('Navigating to processing time analytics');
                    // window.location.href = '/insurance/analytics/processing-time/';
                    break;
                case 'cost-savings':
                    console.log('Navigating to cost savings report');
                    // window.location.href = '/insurance/reports/cost-savings/';
                    break;
                case 'accuracy-rate':
                    console.log('Navigating to accuracy metrics');
                    // window.location.href = '/insurance/metrics/accuracy/';
                    break;
                case 'customer-satisfaction':
                    console.log('Navigating to customer satisfaction dashboard');
                    // window.location.href = '/insurance/satisfaction/dashboard/';
                    break;
                default:
                    console.log('Unknown KPI type:', kpiType);
            }
        }
        
        function setupAlertInteractions() {
            // Add click handlers for alert panels
            const alertButtons = document.querySelectorAll('button[class*="View All"], button[class*="view-all"]');
            alertButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const alertType = getAlertType(this);
                    navigateToAlertDetails(alertType);
                });
            });
            
            // Initialize countdown timers for SLA warnings
            initializeCountdownTimers();
            
            // Setup alert item interactions
            setupAlertItemInteractions();
        }
        
        function getAlertType(button) {
            const panel = button.closest('.bg-white');
            const header = panel.querySelector('h3');
            
            if (header.textContent.includes('Urgent')) return 'urgent';
            if (header.textContent.includes('SLA')) return 'sla';
            if (header.textContent.includes('Fraud')) return 'fraud';
            if (header.textContent.includes('System')) return 'system';
            
            return 'unknown';
        }
        
        function navigateToAlertDetails(alertType) {
            switch(alertType) {
                case 'urgent':
                    console.log('Navigating to urgent claims list');
                    // window.location.href = '/insurance/alerts/urgent/';
                    break;
                case 'sla':
                    console.log('Navigating to SLA warnings dashboard');
                    // window.location.href = '/insurance/alerts/sla/';
                    break;
                case 'fraud':
                    console.log('Navigating to fraud investigation dashboard');
                    // window.location.href = '/insurance/alerts/fraud/';
                    break;
                case 'system':
                    console.log('Navigating to system notifications');
                    // window.location.href = '/insurance/alerts/system/';
                    break;
                default:
                    console.log('Unknown alert type:', alertType);
            }
        }
        
        function initializeCountdownTimers() {
            // Initialize countdown timers for SLA warnings
            const slaTimers = [
                { element: 'sla-timer-1', endTime: new Date(Date.now() + 2 * 60 * 60 * 1000 + 15 * 60 * 1000) }, // 2h 15m
                { element: 'sla-timer-2', endTime: new Date(Date.now() + 4 * 60 * 60 * 1000 + 30 * 60 * 1000) }, // 4h 30m
                { element: 'sla-timer-3', endTime: new Date(Date.now() + 6 * 60 * 60 * 1000 + 45 * 60 * 1000) }  // 6h 45m
            ];
            
            // Update timers every minute
            setInterval(() => {
                updateCountdownTimers(slaTimers);
            }, 60000);
            
            // Initial update
            updateCountdownTimers(slaTimers);
        }
        
        function updateCountdownTimers(timers) {
            timers.forEach((timer, index) => {
                const now = new Date();
                const timeLeft = timer.endTime - now;
                
                if (timeLeft > 0) {
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    
                    const timerText = `${hours}h ${minutes}m`;
                    
                    // Find the timer element in SLA warnings panel
                    const slaPanel = document.querySelector('.warning-card').closest('.bg-white');
                    const timerElements = slaPanel.querySelectorAll('.text-xs.text-yellow-600');
                    
                    if (timerElements[index]) {
                        timerElements[index].innerHTML = `<i class="fas fa-stopwatch mr-1"></i>${timerText}`;
                        
                        // Add urgency styling if less than 1 hour
                        if (timeLeft < 60 * 60 * 1000) {
                            timerElements[index].classList.remove('text-yellow-600');
                            timerElements[index].classList.add('text-red-600');
                        }
                    }
                } else {
                    // Timer expired - move to urgent
                    console.log(`Timer ${index + 1} expired`);
                }
            });
        }
        
        function setupAlertItemInteractions() {
            // Add click handlers for individual alert items
            const alertItems = document.querySelectorAll('.space-y-3 > div');
            
            alertItems.forEach(item => {
                item.style.cursor = 'pointer';
                item.classList.add('hover:bg-gray-50', 'rounded', 'p-2', 'transition-colors', 'duration-200');
                
                item.addEventListener('click', function() {
                    const claimId = this.querySelector('.text-xs.text-gray-500').textContent;
                    navigateToClaimDetails(claimId);
                });
            });
        }
        
        function navigateToClaimDetails(claimId) {
            console.log('Navigating to claim details:', claimId);
            // window.location.href = `/insurance/claims/${claimId}/`;
        }
        
        function startRealTimeUpdates() {
            // Simulate real-time updates for demo purposes
            setInterval(function() {
                updateNotificationBadge();
                updateKPIValues();
            }, 30000); // Update every 30 seconds
        }
        
        function updateNotificationBadge() {
            const badge = document.querySelector('.notification-badge');
            if (badge) {
                // Simulate notification count changes
                const currentCount = parseInt(badge.textContent);
                if (Math.random() > 0.7) {
                    badge.textContent = currentCount + 1;
                }
            }
        }
        
        function updateKPIValues() {
            // Simulate real-time KPI value updates
            const kpiCards = document.querySelectorAll('.kpi-card');
            
            kpiCards.forEach((card, index) => {
                const valueElement = card.querySelector('.text-2xl');
                const trendElement = card.querySelector('.trend-arrow');
                const progressBar = card.querySelector('.progress-bar');
                
                if (valueElement && Math.random() > 0.8) {
                    // Simulate value changes
                    animateValueChange(valueElement, index);
                }
                
                if (trendElement && Math.random() > 0.9) {
                    // Simulate trend changes
                    updateTrendIndicator(trendElement);
                }
                
                if (progressBar && Math.random() > 0.85) {
                    // Simulate progress bar updates
                    updateProgressBar(progressBar);
                }
            });
        }
        
        function animateValueChange(element, kpiIndex) {
            const currentValue = element.textContent;
            element.style.transition = 'all 0.3s ease';
            element.style.transform = 'scale(1.1)';
            element.style.color = '#10b981';
            
            setTimeout(() => {
                element.style.transform = 'scale(1)';
                element.style.color = '';
            }, 300);
        }
        
        function updateTrendIndicator(trendElement) {
            const isUp = Math.random() > 0.5;
            const icon = trendElement.querySelector('i');
            
            if (isUp) {
                icon.className = 'fas fa-arrow-up text-sm';
                trendElement.className = 'trend-arrow trend-up';
            } else {
                icon.className = 'fas fa-arrow-down text-sm';
                trendElement.className = 'trend-arrow trend-down';
            }
        }
        
        function updateProgressBar(progressBar) {
            const newWidth = Math.floor(Math.random() * 40) + 60; // 60-100%
            progressBar.style.width = newWidth + '%';
            
            // Update color based on progress
            if (newWidth >= 80) {
                progressBar.style.background = 'linear-gradient(90deg, #10b981 0%, #34d399 100%)';
            } else if (newWidth >= 60) {
                progressBar.style.background = 'linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%)';
            } else {
                progressBar.style.background = 'linear-gradient(90deg, #ef4444 0%, #f87171 100%)';
            }
        }
        
        // Claims Overview Dashboard Functions
        function setupClaimsOverview() {
            // Initialize filter controls
            setupFilterControls();
            
            // Initialize bulk actions
            setupBulkActions();
            
            // Initialize table interactions
            setupTableInteractions();
            
            // Initialize sorting functionality
            setupTableSorting();
            
            // Initialize geographic map
            setupGeographicMap();
        }
        
        function setupFilterControls() {
            const filters = ['statusFilter', 'dateFilter', 'assessorFilter', 'priorityFilter'];
            
            filters.forEach(filterId => {
                const filter = document.getElementById(filterId);
                if (filter) {
                    filter.addEventListener('change', function() {
                        applyFilters();
                        updateFilteredCount();
                    });
                }
            });
            
            // Clear filters button
            const clearButton = document.getElementById('clearFilters');
            if (clearButton) {
                clearButton.addEventListener('click', function() {
                    clearAllFilters();
                });
            }
        }
        
        function setupBulkActions() {
            const selectAllCheckbox = document.getElementById('selectAllCheckbox');
            const claimCheckboxes = document.querySelectorAll('.claim-checkbox');
            const bulkActionsBar = document.getElementById('bulkActionsBar');
            const selectedCountSpan = document.getElementById('selectedCount');
            
            // Select all functionality
            if (selectAllCheckbox) {
                selectAllCheckbox.addEventListener('change', function() {
                    const isChecked = this.checked;
                    claimCheckboxes.forEach(checkbox => {
                        checkbox.checked = isChecked;
                    });
                    updateBulkActionsVisibility();
                });
            }
            
            // Individual checkbox functionality
            claimCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateBulkActionsVisibility();
                    updateSelectAllState();
                });
            });
            
            // Bulk action buttons
            const selectAllBtn = document.getElementById('selectAll');
            const deselectAllBtn = document.getElementById('deselectAll');
            
            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', function() {
                    claimCheckboxes.forEach(checkbox => checkbox.checked = true);
                    updateBulkActionsVisibility();
                    updateSelectAllState();
                });
            }
            
            if (deselectAllBtn) {
                deselectAllBtn.addEventListener('click', function() {
                    claimCheckboxes.forEach(checkbox => checkbox.checked = false);
                    selectAllCheckbox.checked = false;
                    updateBulkActionsVisibility();
                });
            }
        }
        
        function setupTableInteractions() {
            // Row hover effects and click handlers
            const tableRows = document.querySelectorAll('#claimsTableBody tr');
            
            tableRows.forEach(row => {
                // Add click handler for row (excluding checkbox and action buttons)
                row.addEventListener('click', function(e) {
                    if (!e.target.closest('input[type="checkbox"]') && !e.target.closest('button')) {
                        const claimId = this.dataset.claimId;
                        navigateToClaimDetails(claimId);
                    }
                });
                
                // Action button handlers
                const viewBtn = row.querySelector('button[title="View Details"]');
                const editBtn = row.querySelector('button[title="Edit"]');
                const moreBtn = row.querySelector('button[title="More Actions"]');
                
                if (viewBtn) {
                    viewBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const claimId = row.dataset.claimId;
                        navigateToClaimDetails(claimId);
                    });
                }
                
                if (editBtn) {
                    editBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const claimId = row.dataset.claimId;
                        openEditModal(claimId);
                    });
                }
                
                if (moreBtn) {
                    moreBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const claimId = row.dataset.claimId;
                        showMoreActionsMenu(claimId, e);
                    });
                }
            });
        }
        
        function setupTableSorting() {
            // This function will be called by onclick handlers in the table headers
            window.sortTable = function(column) {
                console.log('Sorting by:', column);
                // Implement sorting logic here
                const tableBody = document.getElementById('claimsTableBody');
                const rows = Array.from(tableBody.querySelectorAll('tr'));
                
                // Simple sorting implementation (can be enhanced)
                rows.sort((a, b) => {
                    const aValue = getSortValue(a, column);
                    const bValue = getSortValue(b, column);
                    
                    if (aValue < bValue) return -1;
                    if (aValue > bValue) return 1;
                    return 0;
                });
                
                // Re-append sorted rows
                rows.forEach(row => tableBody.appendChild(row));
                
                // Update sort indicators
                updateSortIndicators(column);
            };
        }
        
        function getSortValue(row, column) {
            switch(column) {
                case 'claim_id':
                    return row.querySelector('td:nth-child(2)').textContent.trim();
                case 'status':
                    return row.querySelector('td:nth-child(3)').textContent.trim();
                case 'priority':
                    return row.querySelector('td:nth-child(4)').textContent.trim();
                case 'assessor':
                    return row.querySelector('td:nth-child(6)').textContent.trim();
                case 'date':
                    return row.querySelector('td:nth-child(7)').textContent.trim();
                default:
                    return '';
            }
        }
        
        function updateSortIndicators(activeColumn) {
            // Update sort icons to show current sort direction
            const headers = document.querySelectorAll('th[onclick]');
            headers.forEach(header => {
                const icon = header.querySelector('i');
                if (icon) {
                    if (header.getAttribute('onclick').includes(activeColumn)) {
                        icon.className = 'fas fa-sort-up text-primary';
                    } else {
                        icon.className = 'fas fa-sort text-gray-400';
                    }
                }
            });
        }
        
        function applyFilters() {
            const statusFilter = document.getElementById('statusFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            const assessorFilter = document.getElementById('assessorFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;
            
            const rows = document.querySelectorAll('#claimsTableBody tr');
            
            rows.forEach(row => {
                let showRow = true;
                
                // Apply status filter
                if (statusFilter) {
                    const statusText = row.querySelector('td:nth-child(3)').textContent.toLowerCase();
                    if (!statusText.includes(statusFilter.toLowerCase().replace('-', ' '))) {
                        showRow = false;
                    }
                }
                
                // Apply priority filter
                if (priorityFilter) {
                    const priorityText = row.querySelector('td:nth-child(4)').textContent.toLowerCase();
                    if (!priorityText.includes(priorityFilter.toLowerCase())) {
                        showRow = false;
                    }
                }
                
                // Apply assessor filter
                if (assessorFilter) {
                    const assessorText = row.querySelector('td:nth-child(6)').textContent.toLowerCase();
                    if (!assessorText.includes(assessorFilter.toLowerCase().replace('-', ' '))) {
                        showRow = false;
                    }
                }
                
                // Show/hide row
                row.style.display = showRow ? '' : 'none';
            });
        }
        
        function clearAllFilters() {
            document.getElementById('statusFilter').value = '';
            document.getElementById('dateFilter').value = 'month';
            document.getElementById('assessorFilter').value = '';
            document.getElementById('priorityFilter').value = '';
            
            // Show all rows
            const rows = document.querySelectorAll('#claimsTableBody tr');
            rows.forEach(row => {
                row.style.display = '';
            });
            
            updateFilteredCount();
        }
        
        function updateFilteredCount() {
            const visibleRows = document.querySelectorAll('#claimsTableBody tr:not([style*="display: none"])');
            const countElement = document.querySelector('.bg-blue-100.text-blue-800 span:last-child');
            if (countElement) {
                countElement.textContent = `${visibleRows.length} claims`;
            }
        }
        
        function updateBulkActionsVisibility() {
            const checkedBoxes = document.querySelectorAll('.claim-checkbox:checked');
            const bulkActionsBar = document.getElementById('bulkActionsBar');
            const selectedCountSpan = document.getElementById('selectedCount');
            
            if (checkedBoxes.length > 0) {
                bulkActionsBar.classList.remove('hidden');
                selectedCountSpan.textContent = checkedBoxes.length;
            } else {
                bulkActionsBar.classList.add('hidden');
            }
        }
        
        function updateSelectAllState() {
            const allCheckboxes = document.querySelectorAll('.claim-checkbox');
            const checkedBoxes = document.querySelectorAll('.claim-checkbox:checked');
            const selectAllCheckbox = document.getElementById('selectAllCheckbox');
            
            if (checkedBoxes.length === 0) {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
            } else if (checkedBoxes.length === allCheckboxes.length) {
                selectAllCheckbox.checked = true;
                selectAllCheckbox.indeterminate = false;
            } else {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = true;
            }
        }
        
        function navigateToClaimDetails(claimId) {
            console.log('Navigating to claim details:', claimId);
            // Implement navigation to claim details page
            // window.location.href = `/insurance/claims/${claimId}/`;
        }
        
        function openEditModal(claimId) {
            console.log('Opening edit modal for claim:', claimId);
            // Implement edit modal functionality
        }
        
        function showMoreActionsMenu(claimId, event) {
            console.log('Showing more actions menu for claim:', claimId);
            // Implement dropdown menu for additional actions
        }
        
        // Geographic Claims Map Functions
        function setupGeographicMap() {
            // Initialize map view toggle
            setupMapViewToggle();
            
            // Initialize map layer controls
            setupMapLayerControls();
            
            // Initialize claim popup functionality
            setupClaimPopups();
            
            // Initialize map controls
            setupMapControls();
        }
        
        function setupMapViewToggle() {
            const mapViewBtn = document.getElementById('mapViewBtn');
            const listViewBtn = document.getElementById('listViewBtn');
            const mapContainer = document.getElementById('mapContainer');
            const listContainer = document.getElementById('listContainer');
            
            if (mapViewBtn && listViewBtn) {
                mapViewBtn.addEventListener('click', function() {
                    // Switch to map view
                    mapContainer.classList.remove('hidden');
                    listContainer.classList.add('hidden');
                    
                    // Update button styles
                    mapViewBtn.className = 'inline-flex items-center px-3 py-1.5 border border-primary text-xs font-medium rounded text-primary bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary';
                    listViewBtn.className = 'inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500';
                });
                
                listViewBtn.addEventListener('click', function() {
                    // Switch to list view
                    mapContainer.classList.add('hidden');
                    listContainer.classList.remove('hidden');
                    
                    // Update button styles
                    listViewBtn.className = 'inline-flex items-center px-3 py-1.5 border border-primary text-xs font-medium rounded text-primary bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary';
                    mapViewBtn.className = 'inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500';
                });
            }
        }
        
        function setupMapLayerControls() {
            // These functions are called by onclick handlers in the template
            window.toggleMapLayer = function(layer) {
                const assessorIndicators = document.querySelector('.assessor-indicators');
                const repairNetwork = document.querySelector('.repair-network');
                const claimPins = document.querySelectorAll('.claim-pin');
                
                // Hide all layers first
                if (assessorIndicators) assessorIndicators.classList.add('hidden');
                if (repairNetwork) repairNetwork.classList.add('hidden');
                
                // Show selected layer
                switch(layer) {
                    case 'priority':
                        // Show claims by priority (default view)
                        claimPins.forEach(pin => {
                            pin.style.display = '';
                        });
                        break;
                    case 'assessor':
                        // Show assessor availability
                        if (assessorIndicators) {
                            assessorIndicators.classList.remove('hidden');
                        }
                        break;
                    case 'network':
                        // Show repair network capacity
                        if (repairNetwork) {
                            repairNetwork.classList.remove('hidden');
                        }
                        break;
                }
                
                console.log('Toggled map layer:', layer);
            };
        }
        
        function setupClaimPopups() {
            // This function is called by onclick handlers in the template
            window.showClaimPopup = function(claimId) {
                const popup = document.getElementById('claimPopup');
                const pin = document.querySelector(`[data-claim-id="${claimId}"]`);
                
                if (popup && pin) {
                    // Get claim data from pin attributes
                    const priority = pin.dataset.priority;
                    const status = pin.dataset.status;
                    const assessor = pin.dataset.assessor;
                    
                    // Update popup content
                    document.getElementById('popupClaimId').textContent = claimId;
                    
                    // Update status
                    const statusElement = document.getElementById('popupStatus');
                    statusElement.textContent = status.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
                    statusElement.className = getStatusBadgeClass(status);
                    
                    // Update priority
                    const priorityElement = document.getElementById('popupPriority');
                    priorityElement.textContent = priority.charAt(0).toUpperCase() + priority.slice(1);
                    priorityElement.className = getPriorityBadgeClass(priority);
                    
                    // Update assessor
                    document.getElementById('popupAssessor').textContent = 
                        assessor === 'unassigned' ? 'Unassigned' : assessor.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
                    
                    // Update customer and vehicle (mock data)
                    const mockData = getClaimMockData(claimId);
                    document.getElementById('popupCustomer').textContent = mockData.customer;
                    document.getElementById('popupVehicle').textContent = mockData.vehicle;
                    
                    // Position popup near the pin
                    const pinRect = pin.getBoundingClientRect();
                    const mapRect = document.getElementById('claimsMap').getBoundingClientRect();
                    
                    popup.style.left = (pinRect.left - mapRect.left + 30) + 'px';
                    popup.style.top = (pinRect.top - mapRect.top - 10) + 'px';
                    
                    // Show popup
                    popup.classList.remove('hidden');
                }
            };
            
            window.hideClaimPopup = function() {
                const popup = document.getElementById('claimPopup');
                if (popup) {
                    popup.classList.add('hidden');
                }
            };
        }
        
        function setupMapControls() {
            // These functions are called by onclick handlers in the template
            window.zoomIn = function() {
                console.log('Zooming in');
                // Implement zoom in functionality
                const map = document.getElementById('claimsMap');
                if (map) {
                    // Simulate zoom effect
                    map.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        map.style.transform = 'scale(1)';
                    }, 200);
                }
            };
            
            window.zoomOut = function() {
                console.log('Zooming out');
                // Implement zoom out functionality
                const map = document.getElementById('claimsMap');
                if (map) {
                    // Simulate zoom effect
                    map.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        map.style.transform = 'scale(1)';
                    }, 200);
                }
            };
            
            window.centerMap = function() {
                console.log('Centering map');
                // Implement center map functionality
                const map = document.getElementById('claimsMap');
                if (map) {
                    // Simulate center effect
                    map.style.transform = 'translateX(10px)';
                    setTimeout(() => {
                        map.style.transform = 'translateX(0)';
                    }, 200);
                }
            };
        }
        
        function getStatusBadgeClass(status) {
            const statusClasses = {
                'new': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800',
                'in-progress': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800',
                'under-review': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800',
                'approved': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800',
                'rejected': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800',
                'settled': 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800'
            };
            return statusClasses[status] || statusClasses['new'];
        }
        
        function getPriorityBadgeClass(priority) {
            const priorityClasses = {
                'urgent': 'inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800',
                'high': 'inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800',
                'medium': 'inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800',
                'low': 'inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800'
            };
            return priorityClasses[priority] || priorityClasses['medium'];
        }
        
        function getClaimMockData(claimId) {
            const mockData = {
                'CLM-2024-156': { customer: 'Sarah Mitchell', vehicle: '2019 BMW X5' },
                'CLM-2024-189': { customer: 'Michael Johnson', vehicle: '2021 Audi A4' },
                'CLM-2024-203': { customer: 'Emma Thompson', vehicle: '2020 Mercedes C-Class' },
                'CLM-2024-178': { customer: 'David Wilson', vehicle: '2018 Ford Focus' },
                'CLM-2024-234': { customer: 'Lisa Anderson', vehicle: '2017 Toyota Corolla' }
            };
            return mockData[claimId] || { customer: 'Unknown Customer', vehicle: 'Unknown Vehicle' };
        }
        
        function initializeSLATimer() {
            // SLA Timer functionality with real-time countdown
            let slaEndTime = new Date();
            slaEndTime.setHours(slaEndTime.getHours() + 2);
            slaEndTime.setMinutes(slaEndTime.getMinutes() + 15);
            slaEndTime.setSeconds(slaEndTime.getSeconds() + 30);
            
            function updateSLATimer() {
                const now = new Date();
                const timeLeft = slaEndTime - now;
                
                if (timeLeft > 0) {
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    const timerElement = document.getElementById('slaTimer');
                    if (timerElement) {
                        timerElement.textContent = 
                            String(hours).padStart(2, '0') + ':' +
                            String(minutes).padStart(2, '0') + ':' +
                            String(seconds).padStart(2, '0');
                        
                        // Update progress circle
                        const totalTime = 8 * 60 * 60 * 1000; // 8 hours in milliseconds
                        const elapsed = totalTime - timeLeft;
                        const percentage = Math.min((elapsed / totalTime) * 100, 100);
                        
                        const progressCircle = document.getElementById('slaProgress');
                        if (progressCircle) {
                            const circumference = 175.93; // 2 * π * 28
                            const offset = circumference - (percentage / 100) * circumference;
                            progressCircle.style.strokeDashoffset = offset;
                            
                            // Change color based on time remaining
                            if (percentage > 75) {
                                progressCircle.style.stroke = '#ef4444'; // red
                                timerElement.className = 'text-lg font-bold text-red-600';
                            } else if (percentage > 50) {
                                progressCircle.style.stroke = '#f59e0b'; // yellow
                                timerElement.className = 'text-lg font-bold text-yellow-600';
                            } else {
                                progressCircle.style.stroke = '#10b981'; // green
                                timerElement.className = 'text-lg font-bold text-green-600';
                            }
                        }
                    }
                } else {
                    // Timer expired
                    const timerElement = document.getElementById('slaTimer');
                    if (timerElement) {
                        timerElement.textContent = 'EXPIRED';
                        timerElement.className = 'text-lg font-bold text-red-600 animate-pulse';
                    }
                }
            }
            
            // Update timer immediately and then every second
            updateSLATimer();
            setInterval(updateSLATimer, 1000);
        }
        
        // Visual Damage Overview Functions
        function showDamageDetail(sectionId) {
            const section = document.getElementById(sectionId);
            const popup = document.getElementById('damageDetailPopup');
            const title = document.getElementById('damageTitle');
            const content = document.getElementById('damageContent');
            
            if (section && popup && title && content) {
                const severity = section.getAttribute('data-severity');
                const cost = section.getAttribute('data-cost');
                const sectionName = sectionId.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                
                title.textContent = sectionName;
                
                const severityColors = {
                    'severe': 'text-red-600',
                    'moderate': 'text-yellow-600',
                    'minor': 'text-green-600',
                    'none': 'text-gray-600'
                };
                
                const severityLabels = {
                    'severe': 'Severe Damage',
                    'moderate': 'Moderate Damage',
                    'minor': 'Minor Damage',
                    'none': 'No Damage'
                };
                
                content.innerHTML = `
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-600">Severity:</span>
                        <span class="text-xs font-medium ${severityColors[severity]}">${severityLabels[severity]}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-600">Repair Cost:</span>
                        <span class="text-xs font-medium text-gray-900">£${parseInt(cost).toLocaleString()}</span>
                    </div>
                    <div class="mt-2 pt-2 border-t border-gray-200">
                        <button onclick="viewDetailedAssessment('${sectionId}')" class="w-full text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700">
                            View Detailed Assessment
                        </button>
                    </div>
                `;
                
                popup.classList.remove('hidden');
            }
        }
        
        function hideDamageDetail() {
            const popup = document.getElementById('damageDetailPopup');
            if (popup) {
                popup.classList.add('hidden');
            }
        }
        
        function viewDetailedAssessment(sectionId) {
            console.log('Viewing detailed assessment for:', sectionId);
            // This would navigate to a detailed assessment view
            hideDamageDetail();
        }
        
        function focusSection(category) {
            console.log('Focusing on category:', category);
            // This would highlight specific sections based on category
            const sections = document.querySelectorAll('.damage-section');
            sections.forEach(section => {
                section.style.opacity = '0.3';
            });
            
            // Reset after 2 seconds
            setTimeout(() => {
                sections.forEach(section => {
                    section.style.opacity = '1';
                });
            }, 2000);
        }
        
        // Detailed Assessment Viewer Functions
        function showSectionDetails(sectionId) {
            // Remove active state from all sections
            const allSections = document.querySelectorAll('.assessment-section-item');
            allSections.forEach(section => {
                section.classList.remove('ring-2', 'ring-blue-500', 'bg-blue-50');
            });
            
            // Add active state to selected section
            const selectedSection = document.querySelector(`[data-section="${sectionId}"]`);
            if (selectedSection) {
                selectedSection.classList.add('ring-2', 'ring-blue-500', 'bg-blue-50');
            }
            
            // Hide default message
            const defaultMessage = document.getElementById('defaultMessage');
            if (defaultMessage) {
                defaultMessage.style.display = 'none';
            }
            
            // Get section details container
            const container = document.getElementById('sectionDetailsContainer');
            if (!container) return;
            
            // Generate section-specific content
            const sectionData = getSectionData(sectionId);
            
            container.innerHTML = `
                <div class="bg-white border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 ${sectionData.iconBg} rounded-lg flex items-center justify-center">
                                <i class="${sectionData.icon} ${sectionData.iconColor}"></i>
                            </div>
                            <div>
                                <h6 class="text-lg font-semibold text-gray-900">${sectionData.title}</h6>
                                <p class="text-sm text-gray-600">${sectionData.description}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium ${sectionData.statusColor}">${sectionData.status}</div>
                            <div class="text-xs text-gray-500">${sectionData.progress}</div>
                        </div>
                    </div>
                    
                    ${generateComponentDetails(sectionData.components)}
                </div>
            `;
        }
        
        function getSectionData(sectionId) {
            const sectionDataMap = {
                'executive-summary': {
                    title: 'Executive Summary',
                    description: 'Overall assessment overview and key findings',
                    status: 'Complete',
                    statusColor: 'text-green-600',
                    progress: '100% Complete',
                    icon: 'fas fa-chart-line',
                    iconBg: 'bg-green-100',
                    iconColor: 'text-green-600',
                    components: [
                        { name: 'Overall Assessment', severity: 'severe', cost: 13125, status: 'complete', photos: 5 },
                        { name: 'Damage Summary', severity: 'severe', cost: 0, status: 'complete', photos: 3 },
                        { name: 'Recommendations', severity: 'none', cost: 0, status: 'complete', photos: 0 }
                    ]
                },
                'exterior-damage': {
                    title: 'Exterior Damage Assessment',
                    description: 'Comprehensive exterior damage evaluation',
                    status: 'Complete',
                    statusColor: 'text-green-600',
                    progress: '38/38 Points',
                    icon: 'fas fa-car',
                    iconBg: 'bg-green-100',
                    iconColor: 'text-green-600',
                    components: [
                        { name: 'Front Bumper', severity: 'severe', cost: 1250, status: 'complete', photos: 8 },
                        { name: 'Hood', severity: 'moderate', cost: 850, status: 'complete', photos: 6 },
                        { name: 'Front Fenders', severity: 'severe', cost: 1800, status: 'complete', photos: 12 },
                        { name: 'Doors', severity: 'minor', cost: 450, status: 'complete', photos: 4 },
                        { name: 'Rear Quarter Panel', severity: 'none', cost: 0, status: 'complete', photos: 2 }
                    ]
                },
                'mechanical-systems': {
                    title: 'Mechanical Systems',
                    description: 'Engine, transmission, and mechanical components',
                    status: 'In Progress',
                    statusColor: 'text-yellow-600',
                    progress: '18/20 Points',
                    icon: 'fas fa-cogs',
                    iconBg: 'bg-yellow-100',
                    iconColor: 'text-yellow-600',
                    components: [
                        { name: 'Engine Block', severity: 'minor', cost: 2500, status: 'complete', photos: 4 },
                        { name: 'Transmission', severity: 'none', cost: 0, status: 'complete', photos: 2 },
                        { name: 'Cooling System', severity: 'moderate', cost: 750, status: 'pending', photos: 1 },
                        { name: 'Exhaust System', severity: 'minor', cost: 400, status: 'pending', photos: 0 }
                    ]
                }
            };
            
            return sectionDataMap[sectionId] || {
                title: 'Section Details',
                description: 'Assessment section information',
                status: 'Unknown',
                statusColor: 'text-gray-600',
                progress: 'N/A',
                icon: 'fas fa-info-circle',
                iconBg: 'bg-gray-100',
                iconColor: 'text-gray-600',
                components: []
            };
        }
        
        function generateComponentDetails(components) {
            if (!components || components.length === 0) {
                return '<div class="text-center py-4 text-gray-500">No component details available</div>';
            }
            
            return `
                <div class="space-y-3">
                    ${components.map(component => `
                        <div class="border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors duration-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 ${getSeverityBadge(component.severity).bg} rounded-full flex items-center justify-center">
                                        <i class="${getSeverityBadge(component.severity).icon} ${getSeverityBadge(component.severity).color} text-xs"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">${component.name}</div>
                                        <div class="text-xs ${getSeverityBadge(component.severity).textColor}">${getSeverityLabel(component.severity)}</div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-medium text-gray-900">£${component.cost.toLocaleString()}</div>
                                    <div class="text-xs text-gray-500">${component.photos} photos</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusBadge(component.status).class}">
                                        ${getStatusBadge(component.status).label}
                                    </span>
                                    ${component.photos > 0 ? `
                                        <button onclick="viewComponentPhotos('${component.name}')" class="text-xs text-blue-600 hover:text-blue-700 underline">
                                            View Photos (${component.photos})
                                        </button>
                                    ` : ''}
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="toggleComponentDetails('${component.name.replace(/\s+/g, '-').toLowerCase()}')" class="text-xs text-gray-600 hover:text-gray-700 underline">
                                        <i class="fas fa-chevron-down component-toggle-icon"></i> Details
                                    </button>
                                    <button onclick="viewRepairRecommendations('${component.name}')" class="text-xs text-blue-600 hover:text-blue-700 underline">
                                        Repair Info
                                    </button>
                                    <button onclick="editComponent('${component.name}')" class="text-xs text-blue-600 hover:text-blue-700">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Expandable Component Details -->
                            <div id="details-${component.name.replace(/\s+/g, '-').toLowerCase()}" class="hidden mt-3 pt-3 border-t border-gray-200">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Damage Details -->
                                    <div class="space-y-2">
                                        <h6 class="text-xs font-semibold text-gray-900 uppercase tracking-wide">Damage Assessment</h6>
                                        <div class="space-y-1">
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Impact Type:</span>
                                                <span class="text-gray-900">${getImpactType(component.severity)}</span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Affected Area:</span>
                                                <span class="text-gray-900">${getAffectedArea(component.name)}</span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Repair Method:</span>
                                                <span class="text-gray-900">${getRepairMethod(component.severity)}</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cost Breakdown -->
                                    <div class="space-y-2">
                                        <h6 class="text-xs font-semibold text-gray-900 uppercase tracking-wide">Cost Breakdown</h6>
                                        <div class="space-y-1">
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Parts:</span>
                                                <span class="text-gray-900">£${Math.round(component.cost * 0.6).toLocaleString()}</span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Labor:</span>
                                                <span class="text-gray-900">£${Math.round(component.cost * 0.3).toLocaleString()}</span>
                                            </div>
                                            <div class="flex justify-between text-xs">
                                                <span class="text-gray-600">Materials:</span>
                                                <span class="text-gray-900">£${Math.round(component.cost * 0.1).toLocaleString()}</span>
                                            </div>
                                            <div class="flex justify-between text-xs font-medium border-t border-gray-200 pt-1">
                                                <span class="text-gray-900">Total:</span>
                                                <span class="text-gray-900">£${component.cost.toLocaleString()}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Photo References -->
                                ${component.photos > 0 ? `
                                    <div class="mt-4 pt-3 border-t border-gray-200">
                                        <h6 class="text-xs font-semibold text-gray-900 uppercase tracking-wide mb-2">Photo References</h6>
                                        <div class="flex space-x-2">
                                            ${Array.from({length: Math.min(component.photos, 4)}, (_, i) => `
                                                <div class="w-12 h-12 bg-gray-200 rounded border cursor-pointer hover:bg-gray-300 transition-colors duration-200 flex items-center justify-center" 
                                                     onclick="viewComponentPhotos('${component.name}', ${i})">
                                                    <i class="fas fa-image text-gray-500 text-xs"></i>
                                                </div>
                                            `).join('')}
                                            ${component.photos > 4 ? `
                                                <div class="w-12 h-12 bg-blue-100 rounded border cursor-pointer hover:bg-blue-200 transition-colors duration-200 flex items-center justify-center" 
                                                     onclick="viewComponentPhotos('${component.name}')">
                                                    <span class="text-xs font-medium text-blue-600">+${component.photos - 4}</span>
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function getSeverityBadge(severity) {
            const badges = {
                'severe': { bg: 'bg-red-100', icon: 'fas fa-exclamation-triangle', color: 'text-red-600', textColor: 'text-red-600' },
                'moderate': { bg: 'bg-yellow-100', icon: 'fas fa-exclamation-circle', color: 'text-yellow-600', textColor: 'text-yellow-600' },
                'minor': { bg: 'bg-blue-100', icon: 'fas fa-info-circle', color: 'text-blue-600', textColor: 'text-blue-600' },
                'none': { bg: 'bg-green-100', icon: 'fas fa-check-circle', color: 'text-green-600', textColor: 'text-green-600' }
            };
            return badges[severity] || badges['none'];
        }
        
        function getSeverityLabel(severity) {
            const labels = {
                'severe': 'Severe Damage',
                'moderate': 'Moderate Damage',
                'minor': 'Minor Damage',
                'none': 'No Damage'
            };
            return labels[severity] || 'Unknown';
        }
        
        function getStatusBadge(status) {
            const badges = {
                'complete': { class: 'bg-green-100 text-green-800', label: 'Complete' },
                'pending': { class: 'bg-yellow-100 text-yellow-800', label: 'Pending' },
                'in-progress': { class: 'bg-blue-100 text-blue-800', label: 'In Progress' }
            };
            return badges[status] || badges['pending'];
        }
        
        function expandAllSections() {
            const sections = document.querySelectorAll('.assessment-section-item');
            sections.forEach(section => {
                section.style.maxHeight = 'none';
            });
        }
        
        function collapseAllSections() {
            const sections = document.querySelectorAll('.assessment-section-item');
            sections.forEach(section => {
                section.style.maxHeight = '60px';
            });
        }
        
        function viewComponentPhotos(componentName, startIndex = 0) {
            console.log('Viewing photos for:', componentName, 'starting at index:', startIndex);
            
            // Create photo gallery modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 overflow-y-auto h-full w-full z-50';
            modal.id = 'photoGalleryModal';
            
            const photos = getComponentPhotos(componentName);
            
            modal.innerHTML = `
                <div class="relative min-h-screen flex items-center justify-center p-4">
                    <div class="relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-screen overflow-hidden">
                        <!-- Gallery Header -->
                        <div class="flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-images text-blue-600"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">Photo Gallery: ${componentName}</h3>
                                    <p class="text-sm text-gray-600">${photos.length} photos • Assessment Evidence</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-3">
                                <!-- Photo Categories Filter -->
                                <div class="flex items-center space-x-2">
                                    <button onclick="filterPhotos('all')" class="photo-filter-btn active px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700">
                                        All (${photos.length})
                                    </button>
                                    <button onclick="filterPhotos('damage')" class="photo-filter-btn px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200">
                                        Damage (${photos.filter(p => p.category === 'damage').length})
                                    </button>
                                    <button onclick="filterPhotos('overview')" class="photo-filter-btn px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200">
                                        Overview (${photos.filter(p => p.category === 'overview').length})
                                    </button>
                                    <button onclick="filterPhotos('detail')" class="photo-filter-btn px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200">
                                        Detail (${photos.filter(p => p.category === 'detail').length})
                                    </button>
                                </div>
                                
                                <button onclick="closePhotoGallery()" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Gallery Content -->
                        <div class="flex h-96 md:h-[32rem]">
                            <!-- Main Photo Display -->
                            <div class="flex-1 relative bg-gray-900 flex items-center justify-center">
                                <div id="mainPhotoContainer" class="relative w-full h-full flex items-center justify-center">
                                    <img id="mainPhoto" 
                                         src="${photos[startIndex]?.url || '/static/images/placeholder-photo.jpg'}" 
                                         alt="${photos[startIndex]?.description || 'Assessment photo'}"
                                         class="max-w-full max-h-full object-contain cursor-zoom-in"
                                         onclick="togglePhotoZoom()">
                                    
                                    <!-- Photo Navigation Arrows -->
                                    <button onclick="previousPhoto()" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all duration-200">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button onclick="nextPhoto()" class="absolute right-4 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all duration-200">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                    
                                    <!-- Photo Info Overlay -->
                                    <div class="absolute bottom-4 left-4 right-4 bg-black bg-opacity-75 text-white p-3 rounded">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <div id="photoTitle" class="font-medium">${photos[startIndex]?.title || 'Assessment Photo'}</div>
                                                <div id="photoDescription" class="text-sm text-gray-300">${photos[startIndex]?.description || 'No description available'}</div>
                                            </div>
                                            <div class="text-right">
                                                <div id="photoCounter" class="text-sm">${startIndex + 1} of ${photos.length}</div>
                                                <div id="photoTimestamp" class="text-xs text-gray-400">${photos[startIndex]?.timestamp || 'Unknown date'}</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Zoom Controls -->
                                    <div class="absolute top-4 right-4 flex flex-col space-y-2">
                                        <button onclick="zoomIn()" class="w-8 h-8 bg-black bg-opacity-50 text-white rounded hover:bg-opacity-75 transition-all duration-200">
                                            <i class="fas fa-plus text-sm"></i>
                                        </button>
                                        <button onclick="zoomOut()" class="w-8 h-8 bg-black bg-opacity-50 text-white rounded hover:bg-opacity-75 transition-all duration-200">
                                            <i class="fas fa-minus text-sm"></i>
                                        </button>
                                        <button onclick="resetZoom()" class="w-8 h-8 bg-black bg-opacity-50 text-white rounded hover:bg-opacity-75 transition-all duration-200">
                                            <i class="fas fa-expand-arrows-alt text-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Thumbnail Sidebar -->
                            <div class="w-64 bg-gray-50 border-l border-gray-200 overflow-y-auto">
                                <div class="p-3">
                                    <h4 class="text-sm font-semibold text-gray-900 mb-3">Photo Thumbnails</h4>
                                    <div id="thumbnailContainer" class="space-y-2">
                                        ${photos.map((photo, index) => `
                                            <div class="thumbnail-item ${index === startIndex ? 'active' : ''} cursor-pointer border-2 ${index === startIndex ? 'border-blue-500' : 'border-transparent'} rounded-lg overflow-hidden hover:border-blue-300 transition-colors duration-200" 
                                                 onclick="selectPhoto(${index})" data-category="${photo.category}">
                                                <div class="relative">
                                                    <img src="${photo.thumbnail || photo.url}" alt="${photo.title}" class="w-full h-16 object-cover">
                                                    <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-75"></div>
                                                    <div class="absolute bottom-1 left-1 right-1">
                                                        <div class="text-xs text-white font-medium truncate">${photo.title}</div>
                                                        <div class="text-xs text-gray-300">${photo.category}</div>
                                                    </div>
                                                    <!-- Category Badge -->
                                                    <div class="absolute top-1 right-1">
                                                        <span class="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium ${getCategoryBadge(photo.category).class}">
                                                            ${getCategoryBadge(photo.category).label}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gallery Footer -->
                        <div class="p-4 border-t border-gray-200 bg-gray-50">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="downloadPhoto()" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                        <i class="fas fa-download mr-2"></i>
                                        Download
                                    </button>
                                    <button onclick="sharePhoto()" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                        <i class="fas fa-share mr-2"></i>
                                        Share
                                    </button>
                                    <button onclick="addPhotoNote()" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                        <i class="fas fa-sticky-note mr-2"></i>
                                        Add Note
                                    </button>
                                </div>
                                
                                <div class="flex items-center space-x-2">
                                    <button onclick="uploadAdditionalPhotos()" class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700">
                                        <i class="fas fa-plus mr-2"></i>
                                        Upload More
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Initialize gallery state
            window.currentPhotoIndex = startIndex;
            window.currentPhotos = photos;
            window.allPhotos = photos;
            window.currentZoom = 1;
            
            // Add keyboard navigation
            document.addEventListener('keydown', handlePhotoGalleryKeyboard);
        }
        
        function handlePhotoGalleryKeyboard(event) {
            if (!document.getElementById('photoGalleryModal')) return;
            
            switch(event.key) {
                case 'ArrowLeft':
                    event.preventDefault();
                    previousPhoto();
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    nextPhoto();
                    break;
                case 'Escape':
                    event.preventDefault();
                    closePhotoGallery();
                    break;
                case '+':
                case '=':
                    event.preventDefault();
                    zoomIn();
                    break;
                case '-':
                    event.preventDefault();
                    zoomOut();
                    break;
                case '0':
                    event.preventDefault();
                    resetZoom();
                    break;
            }
        }
        
        function getComponentPhotos(componentName) {
            // Mock photo data - in real implementation, this would come from the backend
            const photoData = {
                'Front Bumper': [
                    { 
                        id: 1, 
                        title: 'Front Bumper - Overall Damage', 
                        description: 'Complete view of front bumper damage from collision',
                        url: '/static/images/damage/front-bumper-overall.jpg',
                        thumbnail: '/static/images/damage/thumbs/front-bumper-overall-thumb.jpg',
                        category: 'damage',
                        timestamp: 'Dec 16, 2024 10:30 AM'
                    },
                    { 
                        id: 2, 
                        title: 'Front Bumper - Left Side Detail', 
                        description: 'Detailed view of left side impact damage',
                        url: '/static/images/damage/front-bumper-left.jpg',
                        thumbnail: '/static/images/damage/thumbs/front-bumper-left-thumb.jpg',
                        category: 'detail',
                        timestamp: 'Dec 16, 2024 10:32 AM'
                    },
                    { 
                        id: 3, 
                        title: 'Front Bumper - Right Side Detail', 
                        description: 'Detailed view of right side impact damage',
                        url: '/static/images/damage/front-bumper-right.jpg',
                        thumbnail: '/static/images/damage/thumbs/front-bumper-right-thumb.jpg',
                        category: 'detail',
                        timestamp: 'Dec 16, 2024 10:33 AM'
                    },
                    { 
                        id: 4, 
                        title: 'Front Bumper - Mounting Points', 
                        description: 'Inspection of bumper mounting bracket damage',
                        url: '/static/images/damage/front-bumper-mounts.jpg',
                        thumbnail: '/static/images/damage/thumbs/front-bumper-mounts-thumb.jpg',
                        category: 'detail',
                        timestamp: 'Dec 16, 2024 10:35 AM'
                    },
                    { 
                        id: 5, 
                        title: 'Front Bumper - Before Damage', 
                        description: 'Reference photo showing bumper before incident',
                        url: '/static/images/reference/front-bumper-before.jpg',
                        thumbnail: '/static/images/reference/thumbs/front-bumper-before-thumb.jpg',
                        category: 'overview',
                        timestamp: 'Dec 15, 2024 (Reference)'
                    }
                ],
                'Hood': [
                    { 
                        id: 6, 
                        title: 'Hood - Overall Damage', 
                        description: 'Complete view of hood deformation',
                        url: '/static/images/damage/hood-overall.jpg',
                        thumbnail: '/static/images/damage/thumbs/hood-overall-thumb.jpg',
                        category: 'damage',
                        timestamp: 'Dec 16, 2024 10:40 AM'
                    },
                    { 
                        id: 7, 
                        title: 'Hood - Crease Detail', 
                        description: 'Close-up of hood crease from impact',
                        url: '/static/images/damage/hood-crease.jpg',
                        thumbnail: '/static/images/damage/thumbs/hood-crease-thumb.jpg',
                        category: 'detail',
                        timestamp: 'Dec 16, 2024 10:42 AM'
                    }
                ]
            };
            
            return photoData[componentName] || [
                {
                    id: 999,
                    title: 'No Photos Available',
                    description: 'No photos have been uploaded for this component yet',
                    url: '/static/images/placeholder-no-photo.jpg',
                    thumbnail: '/static/images/placeholder-no-photo-thumb.jpg',
                    category: 'overview',
                    timestamp: 'N/A'
                }
            ];
        }
        
        function getCategoryBadge(category) {
            const badges = {
                'damage': { class: 'bg-red-100 text-red-800', label: 'DMG' },
                'detail': { class: 'bg-blue-100 text-blue-800', label: 'DTL' },
                'overview': { class: 'bg-green-100 text-green-800', label: 'OVR' },
                'reference': { class: 'bg-gray-100 text-gray-800', label: 'REF' }
            };
            return badges[category] || badges['overview'];
        }
        
        function selectPhoto(index) {
            window.currentPhotoIndex = index;
            const photo = window.currentPhotos[index];
            
            // Update main photo
            const mainPhoto = document.getElementById('mainPhoto');
            const photoTitle = document.getElementById('photoTitle');
            const photoDescription = document.getElementById('photoDescription');
            const photoCounter = document.getElementById('photoCounter');
            const photoTimestamp = document.getElementById('photoTimestamp');
            
            if (mainPhoto) mainPhoto.src = photo.url;
            if (photoTitle) photoTitle.textContent = photo.title;
            if (photoDescription) photoDescription.textContent = photo.description;
            if (photoCounter) photoCounter.textContent = `${index + 1} of ${window.currentPhotos.length}`;
            if (photoTimestamp) photoTimestamp.textContent = photo.timestamp;
            
            // Update thumbnail selection
            const thumbnails = document.querySelectorAll('.thumbnail-item');
            thumbnails.forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.add('active', 'border-blue-500');
                    thumb.classList.remove('border-transparent');
                } else {
                    thumb.classList.remove('active', 'border-blue-500');
                    thumb.classList.add('border-transparent');
                }
            });
            
            // Reset zoom
            resetZoom();
        }
        
        function previousPhoto() {
            if (window.currentPhotoIndex > 0) {
                selectPhoto(window.currentPhotoIndex - 1);
            }
        }
        
        function nextPhoto() {
            if (window.currentPhotoIndex < window.currentPhotos.length - 1) {
                selectPhoto(window.currentPhotoIndex + 1);
            }
        }
        
        function filterPhotos(category) {
            const filterButtons = document.querySelectorAll('.photo-filter-btn');
            filterButtons.forEach(btn => {
                btn.classList.remove('active', 'bg-blue-100', 'text-blue-700');
                btn.classList.add('bg-gray-100', 'text-gray-700');
            });
            
            event.target.classList.add('active', 'bg-blue-100', 'text-blue-700');
            event.target.classList.remove('bg-gray-100', 'text-gray-700');
            
            if (category === 'all') {
                window.currentPhotos = window.allPhotos;
            } else {
                window.currentPhotos = window.allPhotos.filter(photo => photo.category === category);
            }
            
            // Update thumbnail display
            const thumbnails = document.querySelectorAll('.thumbnail-item');
            thumbnails.forEach(thumb => {
                const thumbCategory = thumb.getAttribute('data-category');
                if (category === 'all' || thumbCategory === category) {
                    thumb.style.display = 'block';
                } else {
                    thumb.style.display = 'none';
                }
            });
            
            // Select first visible photo
            if (window.currentPhotos.length > 0) {
                selectPhoto(0);
            }
        }
        
        function togglePhotoZoom() {
            const mainPhoto = document.getElementById('mainPhoto');
            if (window.currentZoom === 1) {
                zoomIn();
            } else {
                resetZoom();
            }
        }
        
        function zoomIn() {
            window.currentZoom = Math.min(window.currentZoom * 1.5, 4);
            updateZoom();
        }
        
        function zoomOut() {
            window.currentZoom = Math.max(window.currentZoom / 1.5, 0.5);
            updateZoom();
        }
        
        function resetZoom() {
            window.currentZoom = 1;
            updateZoom();
        }
        
        function updateZoom() {
            const mainPhoto = document.getElementById('mainPhoto');
            if (mainPhoto) {
                mainPhoto.style.transform = `scale(${window.currentZoom})`;
                mainPhoto.style.cursor = window.currentZoom > 1 ? 'zoom-out' : 'zoom-in';
            }
        }
        
        function closePhotoGallery() {
            const modal = document.getElementById('photoGalleryModal');
            if (modal) {
                modal.remove();
            }
            
            // Remove keyboard event listener
            document.removeEventListener('keydown', handlePhotoGalleryKeyboard);
            
            // Clean up global variables
            window.currentPhotoIndex = null;
            window.currentPhotos = null;
            window.allPhotos = null;
            window.currentZoom = null;
        }
        
        function downloadPhoto() {
            const photo = window.currentPhotos[window.currentPhotoIndex];
            console.log('Downloading photo:', photo.title);
            alert(`Downloading: ${photo.title}`);
        }
        
        function sharePhoto() {
            const photo = window.currentPhotos[window.currentPhotoIndex];
            console.log('Sharing photo:', photo.title);
            alert(`Share link generated for: ${photo.title}`);
        }
        
        function addPhotoNote() {
            const photo = window.currentPhotos[window.currentPhotoIndex];
            const note = prompt(`Add a note for: ${photo.title}`, '');
            if (note) {
                console.log('Adding note to photo:', photo.title, 'Note:', note);
                alert(`Note added to ${photo.title}: "${note}"`);
            }
        }
        
        function uploadAdditionalPhotos() {
            console.log('Opening photo upload dialog');
            alert('Photo upload functionality would open a file selection dialog and upload interface.');
        }
        
        function viewRepairRecommendations(componentName) {
            console.log('Viewing repair recommendations for:', componentName);
            
            // Create modal for repair recommendations
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.id = 'repairRecommendationsModal';
            
            const recommendations = getRepairRecommendations(componentName);
            
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Repair Recommendations: ${componentName}</h3>
                        <button onclick="closeRepairModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-4">
                        <!-- Damage Assessment -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-gray-900 mb-2 flex items-center">
                                <i class="fas fa-search text-blue-600 mr-2"></i>
                                Damage Assessment
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Severity Level:</span>
                                    <span class="text-sm font-medium ${recommendations.severity.color}">${recommendations.severity.label}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Repair Priority:</span>
                                    <span class="text-sm font-medium ${recommendations.priority.color}">${recommendations.priority.label}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Estimated Cost:</span>
                                    <span class="text-sm font-medium text-gray-900">£${recommendations.cost.toLocaleString()}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm text-gray-600">Labor Hours:</span>
                                    <span class="text-sm font-medium text-gray-900">${recommendations.laborHours}h</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Repair Steps -->
                        <div class="bg-blue-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-list-ol text-blue-600 mr-2"></i>
                                Recommended Repair Steps
                            </h4>
                            <div class="space-y-2">
                                ${recommendations.steps.map((step, index) => `
                                    <div class="flex items-start space-x-3">
                                        <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                            <span class="text-xs font-medium text-blue-600">${index + 1}</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="text-sm font-medium text-gray-900">${step.title}</div>
                                            <div class="text-xs text-gray-600">${step.description}</div>
                                            <div class="text-xs text-blue-600 mt-1">Est. ${step.time}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- Parts Required -->
                        <div class="bg-green-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                <i class="fas fa-cog text-green-600 mr-2"></i>
                                Required Parts & Materials
                            </h4>
                            <div class="space-y-2">
                                ${recommendations.parts.map(part => `
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-2">
                                            <div class="w-4 h-4 ${part.type === 'OEM' ? 'bg-green-100' : 'bg-yellow-100'} rounded flex items-center justify-center">
                                                <i class="fas ${part.type === 'OEM' ? 'fa-check' : 'fa-exclamation'} text-xs ${part.type === 'OEM' ? 'text-green-600' : 'text-yellow-600'}"></i>
                                            </div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">${part.name}</div>
                                                <div class="text-xs text-gray-600">${part.type} • Part #${part.partNumber}</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-sm font-medium text-gray-900">£${part.cost}</div>
                                            <div class="text-xs text-gray-600">Qty: ${part.quantity}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- Special Considerations -->
                        ${recommendations.considerations.length > 0 ? `
                            <div class="bg-yellow-50 rounded-lg p-4">
                                <h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>
                                    Special Considerations
                                </h4>
                                <div class="space-y-2">
                                    ${recommendations.considerations.map(consideration => `
                                        <div class="flex items-start space-x-2">
                                            <i class="fas fa-info-circle text-yellow-600 text-sm mt-0.5"></i>
                                            <span class="text-sm text-gray-700">${consideration}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
                        <button onclick="closeRepairModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Close
                        </button>
                        <button onclick="approveRepair('${componentName}')" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                            Approve Repair
                        </button>
                        <button onclick="requestQuote('${componentName}')" class="px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700">
                            Request Quote
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function getRepairRecommendations(componentName) {
            const recommendationsData = {
                'Front Bumper': {
                    severity: { label: 'Severe Damage', color: 'text-red-600' },
                    priority: { label: 'High Priority', color: 'text-red-600' },
                    cost: 1250,
                    laborHours: 4,
                    steps: [
                        { title: 'Remove damaged bumper assembly', description: 'Carefully disconnect all electrical connections and mounting points', time: '1h' },
                        { title: 'Inspect mounting brackets', description: 'Check for structural damage to mounting points', time: '30min' },
                        { title: 'Install new bumper assembly', description: 'Mount new OEM bumper with proper alignment', time: '2h' },
                        { title: 'Reconnect electrical systems', description: 'Test all lights, sensors, and electrical components', time: '30min' }
                    ],
                    parts: [
                        { name: 'Front Bumper Assembly', type: 'OEM', partNumber: 'BMW-51117379434', cost: '850', quantity: 1 },
                        { name: 'Mounting Brackets', type: 'OEM', partNumber: 'BMW-51117379435', cost: '120', quantity: 2 },
                        { name: 'Electrical Harness', type: 'OEM', partNumber: 'BMW-61129384756', cost: '85', quantity: 1 }
                    ],
                    considerations: [
                        'Ensure proper alignment with headlights and grille',
                        'Test all parking sensors and fog lights after installation',
                        'Check for any damage to underlying crash structure'
                    ]
                },
                'Hood': {
                    severity: { label: 'Moderate Damage', color: 'text-yellow-600' },
                    priority: { label: 'Medium Priority', color: 'text-yellow-600' },
                    cost: 850,
                    laborHours: 3,
                    steps: [
                        { title: 'Assess hood damage', description: 'Determine if repair or replacement is needed', time: '30min' },
                        { title: 'Remove hood assembly', description: 'Disconnect hood struts and hinges', time: '45min' },
                        { title: 'Install replacement hood', description: 'Mount new hood with proper gap alignment', time: '1.5h' },
                        { title: 'Adjust and test', description: 'Ensure proper fit and operation', time: '15min' }
                    ],
                    parts: [
                        { name: 'Hood Panel', type: 'OEM', partNumber: 'BMW-41617294856', cost: '650', quantity: 1 },
                        { name: 'Hood Struts', type: 'OEM', partNumber: 'BMW-51238254789', cost: '95', quantity: 2 }
                    ],
                    considerations: [
                        'Check hood latch mechanism for proper operation',
                        'Ensure even gaps around hood perimeter'
                    ]
                }
            };
            
            return recommendationsData[componentName] || {
                severity: { label: 'Unknown', color: 'text-gray-600' },
                priority: { label: 'To Be Determined', color: 'text-gray-600' },
                cost: 0,
                laborHours: 0,
                steps: [{ title: 'Assessment required', description: 'Detailed assessment needed', time: 'TBD' }],
                parts: [],
                considerations: ['Detailed assessment required']
            };
        }
        
        function closeRepairModal() {
            const modal = document.getElementById('repairRecommendationsModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function approveRepair(componentName) {
            console.log('Approving repair for:', componentName);
            alert(`Repair approved for ${componentName}. Work order will be generated.`);
            closeRepairModal();
        }
        
        function requestQuote(componentName) {
            console.log('Requesting quote for:', componentName);
            alert(`Quote request sent for ${componentName}. You will receive estimates within 24 hours.`);
            closeRepairModal();
        }
        
        function toggleComponentDetails(componentId) {
            const detailsElement = document.getElementById(`details-${componentId}`);
            const toggleIcon = event.target.closest('button').querySelector('.component-toggle-icon');
            
            if (detailsElement) {
                if (detailsElement.classList.contains('hidden')) {
                    detailsElement.classList.remove('hidden');
                    toggleIcon.classList.remove('fa-chevron-down');
                    toggleIcon.classList.add('fa-chevron-up');
                } else {
                    detailsElement.classList.add('hidden');
                    toggleIcon.classList.remove('fa-chevron-up');
                    toggleIcon.classList.add('fa-chevron-down');
                }
            }
        }
        
        function getImpactType(severity) {
            const impactTypes = {
                'severe': 'High-speed collision',
                'moderate': 'Medium impact',
                'minor': 'Low-speed contact',
                'none': 'No impact detected'
            };
            return impactTypes[severity] || 'Unknown';
        }
        
        function getAffectedArea(componentName) {
            const areas = {
                'Front Bumper': '85% of surface',
                'Hood': '60% of panel',
                'Front Fenders': '70% of both sides',
                'Doors': '25% of surface',
                'Rear Quarter Panel': 'No damage',
                'Engine Block': 'Minor surface damage',
                'Transmission': 'No damage detected',
                'Cooling System': 'Radiator damage',
                'Exhaust System': 'Pipe deformation'
            };
            return areas[componentName] || 'Assessment pending';
        }
        
        function getRepairMethod(severity) {
            const methods = {
                'severe': 'Complete replacement',
                'moderate': 'Repair and refinish',
                'minor': 'Touch-up repair',
                'none': 'No repair needed'
            };
            return methods[severity] || 'TBD';
        }
        
        function editComponent(componentName) {
            console.log('Editing component:', componentName);
            
            // Create edit modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.id = 'editComponentModal';
            
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Edit Component: ${componentName}</h3>
                        <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <form class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Damage Severity</label>
                                <select class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="none">No Damage</option>
                                    <option value="minor">Minor Damage</option>
                                    <option value="moderate" selected>Moderate Damage</option>
                                    <option value="severe">Severe Damage</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Repair Cost (£)</label>
                                <input type="number" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" value="850">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Assessment Status</label>
                                <select class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                    <option value="pending">Pending</option>
                                    <option value="in-progress">In Progress</option>
                                    <option value="complete" selected>Complete</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Photos Count</label>
                                <input type="number" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" value="6">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Assessment Notes</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" rows="3" placeholder="Add detailed assessment notes...">${componentName} shows moderate damage requiring repair and refinishing. Recommend OEM parts for optimal results.</textarea>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Repair Recommendations</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" rows="2" placeholder="Specific repair recommendations...">Replace damaged section, use OEM parts, professional installation required.</textarea>
                        </div>
                    </form>
                    
                    <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
                        <button onclick="closeEditModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button onclick="saveComponentChanges('${componentName}')" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                            Save Changes
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function closeEditModal() {
            const modal = document.getElementById('editComponentModal');
            if (modal) {
                modal.remove();
            }
        }
        
        function saveComponentChanges(componentName) {
            console.log('Saving changes for:', componentName);
            alert(`Changes saved for ${componentName}. Assessment updated successfully.`);
            closeEditModal();
            // Refresh the section details to show updated information
            // In a real implementation, this would update the backend and refresh the UI
        }

        // Initialize damage overview controls
        document.addEventListener('DOMContentLoaded', function() {
            const resetBtn = document.getElementById('resetDamageView');
            const toggleBtn = document.getElementById('toggleDamageView');
            
            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    hideDamageDetail();
                    const sections = document.querySelectorAll('.damage-section');
                    sections.forEach(section => {
                        section.style.opacity = '1';
                    });
                });
            }
            
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    const map = document.getElementById('vehicleDamageMap');
                    if (map) {
                        map.style.transform = map.style.transform === 'scale(1.2)' ? 'scale(1)' : 'scale(1.2)';
                    }
                });
            }

            // Initialize decision support tools
            initializeDecisionSupportTools();
        });

        // Decision Support Tools JavaScript Functions
        function setupDecisionSupportTools() {
            setupActionPanelInteractions();
            setupSettlementCalculator();
            setupWriteOffClassification();
        }

        function setupActionPanelInteractions() {
            // Action Panel Button Handlers - using text content matching
            const buttons = document.querySelectorAll('button');
            
            buttons.forEach(button => {
                const buttonText = button.textContent.trim();
                
                if (buttonText.includes('Approve Total Loss')) {
                    button.addEventListener('click', approveAssessment);
                } else if (buttonText.includes('Reject Assessment')) {
                    button.addEventListener('click', rejectAssessment);
                } else if (buttonText.includes('Review Required')) {
                    button.addEventListener('click', requireReview);
                }
            });

            // Settlement option handlers
            const settlementOptions = document.querySelectorAll('.bg-gray-50.rounded.cursor-pointer');
            settlementOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove previous selection
                    settlementOptions.forEach(opt => {
                        opt.classList.remove('border-blue-500', 'bg-blue-100');
                        opt.classList.add('bg-gray-50');
                    });
                    // Add selection to clicked option
                    this.classList.remove('bg-gray-50');
                    this.classList.add('border-blue-500', 'bg-blue-100');
                });
            });

            // Next steps handlers - using icon-based identification
            const nextStepButtons = document.querySelectorAll('.bg-blue-50, .bg-green-50, .bg-purple-50');
            nextStepButtons.forEach(button => {
                const icon = button.querySelector('i');
                if (icon) {
                    if (icon.classList.contains('fa-phone')) {
                        button.addEventListener('click', initiateCall);
                    } else if (icon.classList.contains('fa-envelope')) {
                        button.addEventListener('click', composeEmail);
                    } else if (icon.classList.contains('fa-file-alt')) {
                        button.addEventListener('click', generateReport);
                    }
                }
            });
        }

        function setupSettlementCalculator() {
            // Find authorize button by text content
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.textContent.trim().includes('Authorize Settlement')) {
                    button.addEventListener('click', authorizeSettlement);
                }
            });

            // Add input fields for dynamic calculation
            addCalculatorInputFields();
            
            // Setup real-time calculation updates
            setupCalculatorInputs();
        }

        function addCalculatorInputFields() {
            // Add editable input fields to the settlement calculator
            const calculatorSection = document.querySelector('.bg-green-50.rounded-lg.p-3.border.border-green-200');
            if (calculatorSection) {
                // Make values editable by adding input functionality
                const valueElements = calculatorSection.querySelectorAll('.font-medium, .font-bold');
                valueElements.forEach(element => {
                    if (element.textContent.includes('£')) {
                        element.style.cursor = 'pointer';
                        element.title = 'Click to edit';
                        element.addEventListener('click', function() {
                            makeValueEditable(this);
                        });
                    }
                });
            }
        }

        function setupCalculatorInputs() {
            // Monitor for changes in calculator values
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        updateSettlementCalculation();
                    }
                });
            });

            const calculatorSection = document.querySelector('.bg-green-50');
            if (calculatorSection) {
                observer.observe(calculatorSection, {
                    childList: true,
                    subtree: true,
                    characterData: true
                });
            }
        }

        function makeValueEditable(element) {
            const currentValue = element.textContent.replace('£', '').replace(',', '');
            const input = document.createElement('input');
            input.type = 'number';
            input.value = currentValue;
            input.className = 'w-20 px-2 py-1 border border-gray-300 rounded text-sm';
            input.style.display = 'inline-block';
            
            input.addEventListener('blur', function() {
                const newValue = parseFloat(this.value) || 0;
                element.textContent = '£' + newValue.toLocaleString();
                element.style.display = 'inline';
                this.remove();
                updateSettlementCalculation();
            });
            
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    this.blur();
                }
            });
            
            element.style.display = 'none';
            element.parentNode.insertBefore(input, element.nextSibling);
            input.focus();
            input.select();
        }

        function setupWriteOffClassification() {
            const classificationRadios = document.querySelectorAll('input[name="uk_classification"]');
            
            // Setup radio button change handlers
            classificationRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    updateClassificationDisplay(this.value);
                });
            });

            // Setup submit button handler
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.textContent.trim().includes('Submit Classification')) {
                    button.addEventListener('click', submitClassification);
                }
            });

            // Initialize with current selection
            const selectedRadio = document.querySelector('input[name="uk_classification"]:checked');
            if (selectedRadio) {
                updateClassificationDisplay(selectedRadio.value);
            }

            // Setup real-time justification validation
            const justificationTextarea = document.querySelector('textarea[placeholder*="justification"]');
            if (justificationTextarea) {
                justificationTextarea.addEventListener('input', function() {
                    validateJustificationRealTime(this.value);
                });
            }
        }

        function validateJustificationRealTime(justification) {
            const selectedClassification = document.querySelector('input[name="uk_classification"]:checked');
            if (!selectedClassification) return;

            const minLength = {
                'A': 50, 'B': 50, 'S': 40, 'N': 30
            }[selectedClassification.value] || 30;

            const textarea = document.querySelector('textarea[placeholder*="justification"]');
            const currentLength = justification.length;
            
            // Add or update character counter
            let counter = textarea.parentNode.querySelector('.char-counter');
            if (!counter) {
                counter = document.createElement('div');
                counter.className = 'char-counter text-xs mt-1';
                textarea.parentNode.appendChild(counter);
            }
            
            const isValid = currentLength >= minLength;
            counter.className = `char-counter text-xs mt-1 ${isValid ? 'text-green-600' : 'text-red-600'}`;
            counter.textContent = `${currentLength}/${minLength} characters ${isValid ? '✓' : '(minimum required)'}`;
        }

        // Action Panel Functions
        function approveAssessment() {
            if (confirm('Are you sure you want to approve this total loss assessment?')) {
                console.log('Assessment approved');
                showNotification('Assessment approved successfully', 'success');
                // Update UI to reflect approval
                updateAssessmentStatus('approved');
            }
        }

        function rejectAssessment() {
            const reason = prompt('Please provide a reason for rejection:');
            if (reason) {
                console.log('Assessment rejected:', reason);
                showNotification('Assessment rejected', 'warning');
                updateAssessmentStatus('rejected');
            }
        }

        function requireReview() {
            const notes = prompt('Please add review notes:');
            if (notes) {
                console.log('Review required:', notes);
                showNotification('Assessment marked for review', 'info');
                updateAssessmentStatus('review_required');
            }
        }

        function initiateCall() {
            console.log('Initiating call to customer');
            showNotification('Call initiated - Customer: +44 7700 900123', 'info');
            // In real implementation, this would integrate with phone system
        }

        function composeEmail() {
            console.log('Composing email to customer');
            const emailModal = createEmailModal();
            document.body.appendChild(emailModal);
        }

        function generateReport() {
            console.log('Generating assessment report');
            showNotification('Report generation started - You will receive a notification when complete', 'info');
            // Simulate report generation
            setTimeout(() => {
                showNotification('Assessment report generated successfully', 'success');
            }, 3000);
        }

        // Settlement Calculator Functions
        function authorizeSettlement() {
            const settlementAmountElement = document.querySelector('.text-green-700.text-lg');
            const settlementAmount = settlementAmountElement ? settlementAmountElement.textContent : '£16,150';
            
            // Check if amount requires supervisor approval
            const amount = parseFloat(settlementAmount.replace('£', '').replace(',', ''));
            const requiresSupervisorApproval = amount > 15000;
            
            let confirmMessage = `Authorize settlement of ${settlementAmount}?`;
            if (requiresSupervisorApproval) {
                confirmMessage += '\n\nNote: This amount requires supervisor approval.';
            }
            
            if (confirm(confirmMessage)) {
                console.log('Settlement authorized:', settlementAmount);
                
                if (requiresSupervisorApproval) {
                    showNotification('Settlement submitted for supervisor approval', 'warning');
                    updateAuthorizationStatus('pending_approval');
                } else {
                    showNotification('Settlement authorized - Processing payment', 'success');
                    updateAuthorizationStatus('authorized');
                }
                
                // Log authorization details
                logAuthorizationDetails(settlementAmount, requiresSupervisorApproval);
            }
        }

        function updateSettlementCalculation() {
            try {
                // Get current values from the calculator
                const calculatorSection = document.querySelector('.bg-green-50.rounded-lg.p-3.border.border-green-200');
                if (!calculatorSection) return;

                // Extract values (in a real implementation, these would come from form inputs)
                const netLossElement = calculatorSection.querySelector('.flex.justify-between:nth-child(1) .font-medium');
                const deductibleElement = calculatorSection.querySelector('.flex.justify-between:nth-child(2) .font-medium');
                const settlementElement = calculatorSection.querySelector('.border-t .font-bold');

                if (netLossElement && deductibleElement && settlementElement) {
                    const netLoss = parseFloat(netLossElement.textContent.replace('£', '').replace(',', '')) || 16650;
                    const deductible = parseFloat(deductibleElement.textContent.replace('£', '').replace(',', '').replace('-', '')) || 500;
                    
                    const finalSettlement = netLoss - deductible;
                    
                    // Update the settlement amount display
                    settlementElement.textContent = '£' + finalSettlement.toLocaleString();
                    
                    // Update authorization requirements notice
                    updateAuthorizationNotice(finalSettlement);
                    
                    console.log('Settlement calculation updated:', {
                        netLoss: netLoss,
                        deductible: deductible,
                        finalSettlement: finalSettlement
                    });
                }
            } catch (error) {
                console.error('Error updating settlement calculation:', error);
            }
        }

        function updateAuthorizationStatus(status) {
            const buttons = document.querySelectorAll('button');
            let authorizeBtn = null;
            
            buttons.forEach(button => {
                if (button.textContent.trim().includes('Authorize Settlement')) {
                    authorizeBtn = button;
                }
            });
            
            if (authorizeBtn) {
                switch (status) {
                    case 'pending_approval':
                        authorizeBtn.innerHTML = '<i class="fas fa-clock mr-2"></i>Pending Approval';
                        authorizeBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                        authorizeBtn.classList.add('bg-yellow-500');
                        authorizeBtn.disabled = true;
                        break;
                    case 'authorized':
                        authorizeBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Authorized';
                        authorizeBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                        authorizeBtn.classList.add('bg-gray-500');
                        authorizeBtn.disabled = true;
                        break;
                }
            }
        }

        function updateAuthorizationNotice(amount) {
            const noticeElement = document.querySelector('.text-xs.text-gray-500.text-center');
            if (noticeElement) {
                if (amount > 15000) {
                    noticeElement.textContent = `Requires supervisor approval for amounts over £15,000 (Current: £${amount.toLocaleString()})`;
                    noticeElement.classList.add('text-yellow-600');
                    noticeElement.classList.remove('text-gray-500');
                } else {
                    noticeElement.textContent = 'Amount within authorization limits';
                    noticeElement.classList.add('text-green-600');
                    noticeElement.classList.remove('text-gray-500', 'text-yellow-600');
                }
            }
        }

        function logAuthorizationDetails(amount, requiresApproval) {
            const authDetails = {
                timestamp: new Date().toISOString(),
                amount: amount,
                requiresSupervisorApproval: requiresApproval,
                authorizedBy: 'Current User', // In real implementation, get from user session
                claimId: 'CLM-2024-156', // In real implementation, get from current claim
                status: requiresApproval ? 'pending_supervisor_approval' : 'authorized'
            };
            
            console.log('Authorization logged:', authDetails);
            
            // In real implementation, this would be sent to the backend
            // sendAuthorizationToBackend(authDetails);
        }

        // Write-off Classification Functions
        function updateClassificationDisplay(classification) {
            console.log('Classification updated to:', classification);
            
            // Update DVLA requirements based on classification
            updateDVLARequirements(classification);
            
            // Update SA 70% rule validation
            validateSA70PercentRule(classification);
            
            // Update justification placeholder based on classification
            updateJustificationPlaceholder(classification);
        }

        function submitClassification() {
            const selectedClassification = document.querySelector('input[name="uk_classification"]:checked');
            const justificationTextarea = document.querySelector('textarea[placeholder*="justification"]');
            const justification = justificationTextarea ? justificationTextarea.value : '';
            
            if (!selectedClassification) {
                alert('Please select a classification category');
                return;
            }
            
            if (!justification.trim()) {
                alert('Please provide justification for the classification');
                return;
            }

            // Validate classification requirements
            const validationResult = validateClassificationRequirements(selectedClassification.value, justification);
            if (!validationResult.isValid) {
                alert(validationResult.message);
                return;
            }
            
            if (confirm(`Submit ${getClassificationName(selectedClassification.value)} classification?\n\nThis will trigger DVLA notification requirements.`)) {
                const classificationData = {
                    category: selectedClassification.value,
                    categoryName: getClassificationName(selectedClassification.value),
                    justification: justification,
                    timestamp: new Date().toISOString(),
                    claimId: 'CLM-2024-156',
                    vehicleDetails: getCurrentVehicleDetails(),
                    dvlaRequirements: getDVLARequirements(selectedClassification.value),
                    sa70PercentCompliance: checkSA70PercentCompliance()
                };
                
                console.log('Classification submitted:', classificationData);
                
                showNotification('Classification submitted successfully - DVLA notification initiated', 'success');
                
                // Update UI to show submission status
                updateSubmissionStatus();
                
                // Generate DVLA notification
                generateDVLANotification(classificationData);
            }
        }

        function validateClassificationRequirements(classification, justification) {
            const minJustificationLength = {
                'A': 50,  // Category A requires detailed justification
                'B': 50,  // Category B requires detailed justification
                'S': 40,  // Category S requires moderate justification
                'N': 30   // Category N requires basic justification
            };

            const requiredLength = minJustificationLength[classification] || 30;
            
            if (justification.length < requiredLength) {
                return {
                    isValid: false,
                    message: `Justification for Category ${classification} must be at least ${requiredLength} characters. Current: ${justification.length} characters.`
                };
            }

            // Check for specific keywords based on classification
            const requiredKeywords = {
                'A': ['scrap', 'destruction', 'safety'],
                'B': ['structural', 'shell', 'parts'],
                'S': ['structural', 'damage', 'repair'],
                'N': ['non-structural', 'cosmetic', 'repair']
            };

            const keywords = requiredKeywords[classification] || [];
            const hasRequiredKeywords = keywords.some(keyword => 
                justification.toLowerCase().includes(keyword.toLowerCase())
            );

            if (!hasRequiredKeywords && keywords.length > 0) {
                return {
                    isValid: false,
                    message: `Justification should include relevant terms for Category ${classification}: ${keywords.join(', ')}`
                };
            }

            return { isValid: true };
        }

        function updateDVLARequirements(classification) {
            const requirements = {
                'A': {
                    form: 'Form V23 - Immediate notification required',
                    timeline: 'Submit immediately',
                    certificate: 'Certificate of Destruction mandatory',
                    registration: 'Vehicle cannot be re-registered',
                    color: 'text-red-700',
                    bgColor: 'bg-red-50',
                    borderColor: 'border-red-200'
                },
                'B': {
                    form: 'Form V23 - Notification of Total Loss',
                    timeline: 'Submit within 7 days',
                    certificate: 'Certificate of Destruction for body shell',
                    registration: 'Body shell cannot be re-registered',
                    color: 'text-orange-700',
                    bgColor: 'bg-orange-50',
                    borderColor: 'border-orange-200'
                },
                'S': {
                    form: 'Form V23 - Notification of Total Loss',
                    timeline: 'Submit within 7 days',
                    certificate: 'Structural repair documentation required',
                    registration: 'Re-registration allowed after proper repair',
                    color: 'text-yellow-700',
                    bgColor: 'bg-yellow-50',
                    borderColor: 'border-yellow-200'
                },
                'N': {
                    form: 'Form V23 - Notification of Total Loss',
                    timeline: 'Submit within 7 days',
                    certificate: 'Non-structural repair documentation',
                    registration: 'Re-registration allowed after repair',
                    color: 'text-blue-700',
                    bgColor: 'bg-blue-50',
                    borderColor: 'border-blue-200'
                }
            };

            const dvlaSection = document.querySelector('.bg-yellow-50.rounded-lg.p-3.border.border-yellow-200');
            if (dvlaSection && requirements[classification]) {
                const req = requirements[classification];
                
                // Update the section styling
                dvlaSection.className = `rounded-lg p-3 border ${req.bgColor} ${req.borderColor}`;
                
                // Update the content
                dvlaSection.innerHTML = `
                    <h5 class="text-sm font-medium ${req.color} mb-2">DVLA Notification Required - Category ${classification}</h5>
                    <div class="text-xs ${req.color} space-y-1">
                        <div class="flex items-center">
                            <i class="fas fa-file-alt mr-2"></i>
                            ${req.form}
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-calendar mr-2"></i>
                            ${req.timeline}
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-certificate mr-2"></i>
                            ${req.certificate}
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-car mr-2"></i>
                            ${req.registration}
                        </div>
                    </div>
                `;
            }
        }

        function validateSA70PercentRule(classification) {
            const saSection = document.querySelector('.bg-blue-50.rounded-lg.p-3');
            if (!saSection) return;

            // Get current values
            const repairCost = 13125; // In real implementation, get from assessment
            const vehicleValue = 18750; // In real implementation, get from valuation
            const damageRatio = (repairCost / vehicleValue) * 100;
            
            // Update the display
            const ratioElement = saSection.querySelector('.flex.justify-between:nth-child(3) .font-medium');
            const statusElement = saSection.querySelector('.inline-flex.items-center');
            
            if (ratioElement) {
                ratioElement.textContent = `${damageRatio.toFixed(1)}%`;
            }
            
            if (statusElement) {
                const isCompliant = damageRatio >= 70;
                const statusText = isCompliant ? 'Compliant' : 'Non-Compliant';
                const statusColor = isCompliant ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
                const statusIcon = isCompliant ? 'fa-check' : 'fa-times';
                
                statusElement.className = `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColor}`;
                statusElement.innerHTML = `<i class="fas ${statusIcon} mr-1"></i>${statusText}`;
                
                // Add compliance note
                let complianceNote = saSection.querySelector('.compliance-note');
                if (!complianceNote) {
                    complianceNote = document.createElement('div');
                    complianceNote.className = 'compliance-note text-xs mt-2 p-2 rounded';
                    saSection.appendChild(complianceNote);
                }
                
                if (isCompliant) {
                    complianceNote.className = 'compliance-note text-xs mt-2 p-2 rounded bg-green-50 text-green-700';
                    complianceNote.textContent = 'Vehicle meets SA 70% rule for total loss classification.';
                } else {
                    complianceNote.className = 'compliance-note text-xs mt-2 p-2 rounded bg-red-50 text-red-700';
                    complianceNote.textContent = 'Vehicle does not meet SA 70% rule. Consider repair option or additional assessment.';
                }
            }
        }

        function updateJustificationPlaceholder(classification) {
            const textarea = document.querySelector('textarea[placeholder*="justification"]');
            if (textarea) {
                const placeholders = {
                    'A': 'Enter detailed justification for Category A classification. Include safety concerns, extent of damage, and why the vehicle must be scrapped entirely...',
                    'B': 'Enter justification for Category B classification. Describe structural damage to body shell and why only parts can be salvaged...',
                    'S': 'Enter justification for Category S classification. Detail structural damage and repair requirements...',
                    'N': 'Enter justification for Category N classification. Describe non-structural damage and repair feasibility...'
                };
                
                textarea.placeholder = placeholders[classification] || 'Enter classification justification...';
            }
        }

        function getClassificationName(code) {
            const names = {
                'A': 'Category A (Scrap Only)',
                'B': 'Category B (Body Shell Scrap)',
                'S': 'Category S (Structural Damage)',
                'N': 'Category N (Non-Structural Damage)'
            };
            return names[code] || `Category ${code}`;
        }

        function getCurrentVehicleDetails() {
            // In real implementation, get from current assessment
            return {
                make: 'BMW',
                model: '3 Series',
                year: '2019',
                vin: 'WBADT43452G123456',
                registration: 'AB19 XYZ'
            };
        }

        function getDVLARequirements(classification) {
            const requirements = {
                'A': ['Immediate V23 submission', 'Certificate of Destruction', 'No re-registration'],
                'B': ['V23 within 7 days', 'Shell destruction certificate', 'Parts salvage documentation'],
                'S': ['V23 within 7 days', 'Structural repair documentation', 'Re-registration after repair'],
                'N': ['V23 within 7 days', 'Non-structural repair documentation', 'Re-registration after repair']
            };
            return requirements[classification] || [];
        }

        function checkSA70PercentCompliance() {
            const repairCost = 13125;
            const vehicleValue = 18750;
            const ratio = (repairCost / vehicleValue) * 100;
            return {
                ratio: ratio,
                isCompliant: ratio >= 70,
                repairCost: repairCost,
                vehicleValue: vehicleValue
            };
        }

        function updateSubmissionStatus() {
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (button.textContent.trim().includes('Submit Classification')) {
                    button.innerHTML = '<i class="fas fa-check mr-2"></i>Submitted';
                    button.classList.remove('bg-orange-600', 'hover:bg-orange-700');
                    button.classList.add('bg-gray-500');
                    button.disabled = true;
                }
            });
        }

        function generateDVLANotification(classificationData) {
            console.log('Generating DVLA notification:', classificationData);
            
            // Simulate DVLA notification generation
            setTimeout(() => {
                showNotification('DVLA Form V23 generated and submitted electronically', 'success');
            }, 2000);
            
            // In real implementation, this would:
            // 1. Generate the appropriate DVLA form
            // 2. Submit electronically to DVLA system
            // 3. Create audit trail
            // 4. Schedule follow-up actions
        }

        // Utility Functions
        function updateAssessmentStatus(status) {
            console.log('Assessment status updated to:', status);
            // In real implementation, this would update the backend
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${getNotificationClasses(type)}`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${getNotificationIcon(type)} mr-2"></i>
                    <span class="text-sm font-medium">${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-current opacity-70 hover:opacity-100">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        function getNotificationClasses(type) {
            const classes = {
                'success': 'bg-green-100 text-green-800 border border-green-200',
                'warning': 'bg-yellow-100 text-yellow-800 border border-yellow-200',
                'error': 'bg-red-100 text-red-800 border border-red-200',
                'info': 'bg-blue-100 text-blue-800 border border-blue-200'
            };
            return classes[type] || classes.info;
        }

        function getNotificationIcon(type) {
            const icons = {
                'success': 'fa-check-circle',
                'warning': 'fa-exclamation-triangle',
                'error': 'fa-times-circle',
                'info': 'fa-info-circle'
            };
            return icons[type] || icons.info;
        }

        function createEmailModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.id = 'emailModal';
            
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-md bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Compose Email</h3>
                        <button onclick="closeEmailModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                            <input type="email" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" value="customer@example.com" readonly>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Subject:</label>
                            <input type="text" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" value="Assessment Update - Claim CLM-2024-156">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Message:</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" rows="8">Dear Customer,

We have completed the assessment of your vehicle following the recent incident. Based on our comprehensive evaluation, we have determined that your vehicle has sustained significant damage that exceeds the economical repair threshold.

Assessment Summary:
- Total Loss Classification: Category S
- Settlement Amount: £16,150
- Processing Time: 2-3 business days

Our team will contact you within 24 hours to discuss the next steps and answer any questions you may have.

Best regards,
Insurance Claims Team</textarea>
                        </div>
                    </form>
                    
                    <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
                        <button onclick="closeEmailModal()" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button onclick="sendEmail()" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">
                            <i class="fas fa-paper-plane mr-2"></i>Send Email
                        </button>
                    </div>
                </div>
            `;
            
            return modal;
        }

        function closeEmailModal() {
            const modal = document.getElementById('emailModal');
            if (modal) {
                modal.remove();
            }
        }

        function sendEmail() {
            console.log('Sending email to customer');
            showNotification('Email sent successfully', 'success');
            closeEmailModal();
        }
        
        // Tablet and Mobile Navigation Functions
        function initializeTabletNavigation() {
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarClose = document.getElementById('sidebarClose');
            const tabletSidebar = document.getElementById('tabletSidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            if (sidebarToggle && tabletSidebar && sidebarOverlay) {
                // Open sidebar
                sidebarToggle.addEventListener('click', function() {
                    tabletSidebar.classList.add('active');
                    sidebarOverlay.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
                
                // Close sidebar
                function closeSidebar() {
                    tabletSidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
                
                if (sidebarClose) {
                    sidebarClose.addEventListener('click', closeSidebar);
                }
                
                sidebarOverlay.addEventListener('click', closeSidebar);
                
                // Close on escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && tabletSidebar.classList.contains('active')) {
                        closeSidebar();
                    }
                });
                
                // Close sidebar when clicking nav links
                const navLinks = tabletSidebar.querySelectorAll('a');
                navLinks.forEach(link => {
                    link.addEventListener('click', closeSidebar);
                });
            }
        }
        
        function handleResponsiveLayout() {
            const isTablet = window.innerWidth >= 768 && window.innerWidth < 1024;
            const isMobile = window.innerWidth < 768;
            
            if (isTablet) {
                enableTabletLayout();
            } else if (isMobile) {
                enableMobileLayout();
            } else {
                enableDesktopLayout();
            }
        }
        
        function enableTabletLayout() {
            // Tablet-specific layout adjustments
            const kpiGrid = document.querySelector('.kpi-grid');
            if (kpiGrid) {
                kpiGrid.className = 'kpi-grid tablet-grid grid grid-cols-3 gap-4';
            }
            
            const alertsGrid = document.querySelector('.tablet-alerts');
            if (alertsGrid) {
                alertsGrid.className = 'tablet-alerts adaptive-grid-2 grid grid-cols-2 gap-4';
            }
        }
        
        function enableMobileLayout() {
            // Mobile-specific layout adjustments
            const kpiGrid = document.querySelector('.kpi-grid');
            if (kpiGrid) {
                kpiGrid.className = 'kpi-grid mobile-alerts grid grid-cols-2 gap-3';
            }
            
            const alertsGrid = document.querySelector('.tablet-alerts');
            if (alertsGrid) {
                alertsGrid.className = 'tablet-alerts mobile-alerts grid grid-cols-1 gap-3';
            }
        }
        
        function enableDesktopLayout() {
            // Desktop-specific layout adjustments
            const kpiGrid = document.querySelector('.kpi-grid');
            if (kpiGrid) {
                kpiGrid.className = 'kpi-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4';
            }
            
            const alertsGrid = document.querySelector('.tablet-alerts');
            if (alertsGrid) {
                alertsGrid.className = 'tablet-alerts grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6';
            }
        }
        
        function initializeTouchGestures() {
            // Add swipe gesture support for cards
            const cards = document.querySelectorAll('.kpi-card, .bg-white.rounded-lg.shadow');
            
            cards.forEach(card => {
                let startX = 0;
                let startY = 0;
                let isScrolling = false;
                
                card.addEventListener('touchstart', function(e) {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    isScrolling = false;
                }, { passive: true });
                
                card.addEventListener('touchmove', function(e) {
                    if (!startX || !startY) return;
                    
                    const diffX = Math.abs(e.touches[0].clientX - startX);
                    const diffY = Math.abs(e.touches[0].clientY - startY);
                    
                    if (diffY > diffX) {
                        isScrolling = true;
                    }
                }, { passive: true });
                
                card.addEventListener('touchend', function(e) {
                    if (!startX || !startY || isScrolling) return;
                    
                    const endX = e.changedTouches[0].clientX;
                    const diffX = startX - endX;
                    
                    // Swipe left for additional actions
                    if (Math.abs(diffX) > 50) {
                        // Add visual feedback
                        card.style.transform = 'translateX(-10px)';
                        setTimeout(() => {
                            card.style.transform = '';
                        }, 200);
                    }
                    
                    startX = 0;
                    startY = 0;
                }, { passive: true });
            });
        }
        
        // Initialize tablet navigation when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabletNavigation();
            handleResponsiveLayout();
            initializeTouchGestures();
            
            // Handle window resize
            window.addEventListener('resize', handleResponsiveLayout);
        });
    </script>
    
    <!-- Dashboard Interactivity Scripts -->
    <script src="{% static 'js/performance-optimizer.js' %}"></script>
    <script src="{% static 'js/dashboard-interactivity.js' %}" data-critical="false"></script>
    <script src="{% static 'js/notifications.js' %}" data-critical="false"></script>
    <script src="{% static 'js/dashboard-navigation.js' %}"></script>
    <script src="{% static 'js/dashboard-animations.js' %}" data-critical="false"></script>
    <script src="{% static 'js/dashboard-integration.js' %}"></script>
</body>
</html>
{% else %}
    <div class="min-h-screen flex items-center justify-center bg-gray-50">
        <div class="max-w-md w-full space-y-8">
            <div class="text-center">
                <h2 class="mt-6 text-3xl font-extrabold text-gray-900">
                    Access Denied
                </h2>
                <p class="mt-2 text-sm text-gray-600">
                    Please log in to access the assessment dashboard.
                </p>
                <div class="mt-4">
                    <a href="{% url 'users:login' %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        Log In
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endif %}
{% endblock %}