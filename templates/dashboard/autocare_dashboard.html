{% extends 'base/base.html' %}
{% load static %}
{% load dashboard_extras %}

{% block title %}AutoCare Dashboard - Carfinity{% endblock %}

{% block content %}
  <style>
    /* small helper for chart placeholder shimmer */
    .chart-placeholder {
      background: linear-gradient(90deg, rgba(0,0,0,0.03) 25%, rgba(0,0,0,0.06) 50%, rgba(0,0,0,0.03) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.6s linear infinite;
    }
    @keyframes shimmer { to { background-position: -200% 0; } }
  </style>
  <div class="max-w-7xl mx-auto p-4 sm:p-6 text-gray-800">

    <!-- Header -->
    <header class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
      <div>
        <h1 class="text-2xl font-extrabold">Good morning, Alex</h1>
        <p class="text-sm text-gray-500">Overview of your vehicle health & maintenance</p>
      </div>
      <div class="flex items-center gap-3">
        <button class="p-3 bg-white rounded-full shadow-md">
          <!-- Bell -->
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C8.67 6.165 8 7.388 8 8.75V14l-1.405 1.405C6.21 15.79 6 16.368 6 17h5m4 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
        </button>
        <button class="p-3 bg-white rounded-full shadow-md">
          <!-- Settings -->
          <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 3a.75.75 0 01.75.75V5.5h3V3.75A.75.75 0 0114.25 3h1.5A1.5 1.5 0 0117.25 4.5v1.25h1.5a.75.75 0 01.75.75V9.75h-1.5v3h1.5v1.5a.75.75 0 01-.75.75h-1.5V17.5a1.5 1.5 0 01-1.5 1.5h-1.5V20.25a.75.75 0 01-.75.75h-3a.75.75 0 01-.75-.75V19h-3v1.25A.75.75 0 014.25 20.25h-1.5A.75.75 0 012 19.5v-1.5h1.5V16.5H2v-1.5h1.5V12H2V9.75a.75.75 0 01.75-.75H4.5V7.5H3A1.5 1.5 0 011.5 6V4.5A1.5 1.5 0 013 3h6.75z"/></svg>
        </button>
      </div>
    </header>

    <!-- Grid layout: mobile 1 column, md 2 columns, lg 3 columns. We'll make the main area span 2 columns on large screens -->
    <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">

      <!-- Main column (vehicle overview + upcoming maintenance + alerts + history) -->
      <main class="lg:col-span-2 space-y-6">

        <!-- Vehicle Overview Card -->
        <section class="bg-white rounded-2xl p-6 shadow">
          <div class="flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6">
            <div class="w-28 h-16 rounded-lg bg-gradient-to-br from-gray-100 to-gray-50 flex items-center justify-center">
              <!-- simple car SVG / image placeholder -->
              <svg class="w-14 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 13s1.5-4 6-4 6 4 6 4 1.5 0 3 0 1 2 1 2H2s.5-2 1-2 1-0 3-0z"/></svg>
            </div>
            <div class="flex-1 w-full">
              <h2 class="text-xl font-semibold">Toyota Corolla ‚Äî 2018</h2>
              <p class="text-sm text-gray-500">VIN: <span class="font-medium">1HGCM82633A00435</span> ‚Ä¢ Mileage: <span class="font-medium">123,400 km</span></p>
              <div class="mt-4 flex flex-wrap gap-2 sm:gap-4">
                <div class="rounded-lg bg-gray-50 px-3 py-2 text-sm">
                  <div class="text-xs text-gray-500">Next Service</div>
                  <div class="font-semibold">In 12 days</div>
                </div>
                <div class="rounded-lg bg-gray-50 px-3 py-2 text-sm">
                  <div class="text-xs text-gray-500">Next Service Mileage</div>
                  <div class="font-semibold">125,000 km</div>
                </div>
                <div class="rounded-lg bg-gray-50 px-3 py-2 text-sm">
                  <div class="text-xs text-gray-500">Status</div>
                  <div class="font-semibold text-green-600">Healthy</div>
                </div>
              </div>
            </div>
            <div class="w-full md:w-auto md:text-right">
              <div class="text-sm text-gray-500">Estimated Value</div>
              <div class="text-2xl font-bold text-green-600">$8,200</div>
              <button class="mt-3 inline-flex items-center gap-2 px-3 py-2 bg-white border rounded-full text-sm shadow-sm">View VIN</button>
            </div>
          </div>
        </section>

        <!-- Upcoming Maintenance & Alerts (side-by-side on md+) -->
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">

          <!-- Upcoming maintenance -->
          <section class="bg-white rounded-2xl p-4 shadow">
            <h3 class="font-semibold mb-2">Upcoming Maintenance</h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div>
                  <div class="text-sm text-gray-500">Oil Change & Brake Inspection</div>
                  <div class="font-medium">Scheduled ‚Ä¢ 2025-10-10</div>
                </div>
                <div class="text-right">
                  <div class="text-sm text-gray-500">In</div>
                  <div class="text-xl font-bold text-orange-600">12 days</div>
                </div>
              </div>

              <div class="flex flex-col sm:flex-row gap-2">
                <button class="sm:flex-1 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-indigo-500 text-white font-medium">Reschedule</button>
                <button class="sm:flex-1 py-2 rounded-lg border border-gray-200">Details</button>
              </div>
            </div>
          </section>

          <!-- Alerts -->
          <section class="bg-white rounded-2xl p-4 shadow">
            <h3 class="font-semibold mb-3">Alerts & Notifications</h3>
            <ul class="space-y-3">
              <li class="flex items-start gap-3">
                <span class="flex-none mt-1 text-red-600">‚ö†Ô∏è</span>
                <div class="flex-1 text-sm">
                  <div class="font-medium">Oil Change Overdue</div>
                  <div class="text-gray-500">3 days ago ‚Ä¢ Recommended service now</div>
                </div>
                <div class="text-xs text-gray-400">High</div>
              </li>

              <li class="flex items-start gap-3">
                <span class="flex-none mt-1 text-orange-500">üõ†Ô∏è</span>
                <div class="flex-1 text-sm">
                  <div class="font-medium">Brake pads at 30%</div>
                  <div class="text-gray-500">Book replacement within 2 weeks</div>
                </div>
                <div class="text-xs text-gray-400">Medium</div>
              </li>

              <li class="flex items-start gap-3">
                <span class="flex-none mt-1 text-blue-500">üìë</span>
                <div class="flex-1 text-sm">
                  <div class="font-medium">Insurance expires</div>
                  <div class="text-gray-500">In 5 days ‚Äî renew to stay covered</div>
                </div>
                <div class="text-xs text-gray-400">Low</div>
              </li>
            </ul>
          </section>

        </div>

        <!-- Service History Table -->
        <section class="bg-white rounded-2xl p-4 shadow">
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-semibold">Service History</h3>
            <button class="text-sm text-indigo-600">See all</button>
          </div>

          <div class="overflow-x-auto">
            <table class="min-w-full text-sm">
              <thead class="text-left text-gray-500">
                <tr>
                  <th class="pb-2">Date</th>
                  <th class="pb-2">Service</th>
                  <th class="pb-2">Provider</th>
                  <th class="pb-2">Cost</th>
                </tr>
              </thead>
              <tbody class="text-gray-700">
                <tr class="border-t">
                  <td class="py-3">2025-09-01</td>
                  <td class="py-3">Oil Change</td>
                  <td class="py-3">Speedy Auto</td>
                  <td class="py-3">$45</td>
                </tr>
                <tr class="border-t">
                  <td class="py-3">2025-06-10</td>
                  <td class="py-3">Brake Pads</td>
                  <td class="py-3">BrakeWorks</td>
                  <td class="py-3">$210</td>
                </tr>
                <tr class="border-t">
                  <td class="py-3">2024-12-03</td>
                  <td class="py-3">Full Service</td>
                  <td class="py-3">AutoCare</td>
                  <td class="py-3">$380</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

      </main>

      <!-- Right column / Sidebar (valuation, costs, stats, VIN decoder) -->
      <aside class="space-y-6">

        <!-- Valuation Card -->
        <section class="bg-white rounded-2xl p-4 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-xs text-gray-500">Estimated Market Value</div>
              <div class="text-xl font-bold text-green-600">$8,200</div>
            </div>
            <div class="text-sm text-gray-500 text-right">
              <div>Condition: <span class="font-medium">Good</span></div>
              <div>Last updated: <span class="font-medium">2 days ago</span></div>
            </div>
          </div>
        </section>

        <!-- Costs Card -->
        <section class="bg-white rounded-2xl p-4 shadow">
          <h4 class="font-semibold mb-2">Costs</h4>
          <div class="flex items-center justify-between text-sm mb-2">
            <div>This month</div>
            <div class="font-bold">$210</div>
          </div>
          <div class="flex items-center justify-between text-sm mb-2">
            <div>Lifetime</div>
            <div class="font-bold">$4,870</div>
          </div>
          <div class="h-28 mt-3 rounded-lg chart-placeholder"></div>
        </section>

        <!-- Statistics / Insights -->
        <section class="bg-white rounded-2xl p-4 shadow">
          <h4 class="font-semibold mb-2">Statistics & Insights</h4>
          <ul class="text-sm space-y-2">
            <li class="flex justify-between"><span>Avg monthly spend</span><span class="font-medium">$75</span></li>
            <li class="flex justify-between"><span>Days until next service</span><span class="font-medium">12</span></li>
            <li class="flex justify-between"><span>Vehicle health score</span><span class="font-medium">87 / 100</span></li>
          </ul>
          <p class="text-xs text-gray-500 mt-3">Tip: Follow the recommended service plan to keep resale value high.</p>
        </section>

        <!-- VIN Decoder Card -->
        <section class="bg-white rounded-2xl p-4 shadow">
          <h4 class="font-semibold mb-2">VIN Decoder</h4>
          <form class="space-y-3">
            <input type="text" placeholder="Enter VIN" class="w-full px-3 py-2 border rounded-lg text-sm" />
            <div class="flex flex-col sm:flex-row gap-2">
              <button class="sm:flex-1 py-2 rounded-lg bg-indigo-600 text-white font-medium">Decode VIN</button>
              <button class="sm:flex-1 py-2 rounded-lg border">Scan VIN</button>
            </div>
          </form>
        </section>

      </aside>

    </div>

  </div>

{% endblock %}

